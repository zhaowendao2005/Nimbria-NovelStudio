## ğŸ“ æ–‡ä»¶ç»“æ„è§„åˆ’
- æ–‡ä»¶ç®¡ç†å™¨ç»„ä»¶ï¼š`Nimbria\Client\GUI\components\ProjectPage.Shell\Navbar.content\FileTree`
- LLMå¯¹è¯ç»„ä»¶ï¼š`Nimbria\Client\GUI\components\ProjectPage.Shell\Navbar.content\LlmChat`

## ğŸ¨ äº¤äº’è®¾è®¡è¦ç‚¹
1. **é€‰é¡¹å¡è®¾è®¡**ï¼šä½¿ç”¨Element Plusçš„é€‰é¡¹é¡µç»„ä»¶ï¼Œå°†æ¨¡å‹é€‰æ‹©ã€æ–°å¯¹è¯ã€å†å²è®°å½•æ”¹ä¸ºé€‰é¡¹å¡å½¢å¼
2. **å·¥å…·æ è®¾è®¡**ï¼šæœ€å³è¾¹æ”¾ç½®å·¥å…·ç®±æŒ‰é’®ï¼ŒåŒ…å«åˆ›å»ºæ–°å¯¹è¯ã€å†å²è®°å½•ç­‰åŠŸèƒ½
3. **è¾“å…¥æ è®¾è®¡**ï¼šåº•éƒ¨å·¥å…·æ åŒ…å«æ¨¡å‹é€‰æ‹©å’Œå‘é€æŒ‰é’®
4. **æ¨¡å‹é€‰æ‹©æœºåˆ¶**ï¼š
   - ç‚¹å‡»åå‘ä¸Šå±•å¼€é€‰æ‹©èœå•
   - åˆå§‹ä¸ºç©ºï¼Œæ˜¾ç¤º"add model"æŒ‰é’®
   - å¼¹å‡ºå¯¹è¯æ¡†é€‰æ‹©å½“å‰æ´»è·ƒæ¨¡å‹
   - æ•°æ®å­˜å‚¨åœ¨localStorage
   - éœ€è¦æ ¡éªŒæœºåˆ¶ç¡®ä¿é€‰ä¸­çš„æ¨¡å‹ä»ç„¶æ´»è·ƒ

æˆ‘çœ‹åˆ°å¯¹è¯åœ¨æˆ‘å‡†å¤‡è¾“å‡ºè®¾è®¡æ–‡æ¡£æ—¶è¢«æˆªæ–­äº†ã€‚ç°åœ¨éœ€è¦æˆ‘ç»§ç»­å®Œæˆè¿™ä¸ªLLMå¯¹è¯åŠŸèƒ½çš„è¯¦ç»†è®¾è®¡æ–‡æ¡£å—ï¼Ÿ

[1 tool called]

ç°åœ¨æˆ‘å®Œå…¨äº†è§£äº†ä¸Šä¸‹æ–‡ã€‚è®©æˆ‘ä¸ºä½ è¾“å‡ºå®Œæ•´çš„LLMå¯¹è¯åŠŸèƒ½è®¾è®¡æ–‡æ¡£ï¼š

# ğŸ¤– é¡¹ç›®é¡µé¢LLMå¯¹è¯åŠŸèƒ½è®¾è®¡æ–‡æ¡£

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

ä¸ºNimbriaé¡¹ç›®çš„å·¦ä¾§æ æ·»åŠ AIåŠ©æ‰‹å¯¹è¯åŠŸèƒ½ï¼Œå®ç°ä¸é¡¹ç›®æ–‡ä»¶çš„æ™ºèƒ½äº¤äº’å’Œä»£ç è¾…åŠ©ã€‚

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### æ–‡ä»¶ç»“æ„
```
Nimbria/Client/GUI/components/ProjectPage.Shell/Navbar.content/
â”œâ”€â”€ FileTree/          # æ–‡ä»¶ç®¡ç†å™¨ç»„ä»¶
â”‚   â”œâ”€â”€ FileTreePanel.vue
â”‚   â”œâ”€â”€ FileTreeToolbar.vue
â”‚   â””â”€â”€ FileTreeContent.vue
â””â”€â”€ LlmChat/           # LLMå¯¹è¯ç»„ä»¶ (æ–°å¢)
    â”œâ”€â”€ LlmChatPanel.vue         # ä¸»é¢æ¿
    â”œâ”€â”€ ChatTabs.vue             # é€‰é¡¹å¡ç»„ä»¶
    â”œâ”€â”€ ChatToolbox.vue          # å·¥å…·ç®±ç»„ä»¶
    â”œâ”€â”€ ChatInput.vue            # è¾“å…¥ç»„ä»¶
    â”œâ”€â”€ ChatMessages.vue         # æ¶ˆæ¯åˆ—è¡¨
    â”œâ”€â”€ ModelSelector.vue        # æ¨¡å‹é€‰æ‹©å™¨
    â””â”€â”€ types.ts                 # ç±»å‹å®šä¹‰
```

## ğŸ¨ ç•Œé¢è®¾è®¡è§„èŒƒ

### æ•´ä½“å¸ƒå±€ (280pxå®½åº¦)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [å¯¹è¯1] [å¯¹è¯2] [+]      [ğŸ”§]   â”‚ â† é€‰é¡¹å¡ + å·¥å…·ç®±
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚
â”‚         æ¶ˆæ¯åŒºåŸŸ                 â”‚ â† å¯¹è¯å†…å®¹
â”‚    (æ»šåŠ¨åŒºåŸŸï¼Œé«˜åº¦è‡ªé€‚åº”)         â”‚
â”‚                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ è¾“å…¥æ¡†...                   â”‚ â”‚ â† è¾“å…¥åŒºåŸŸ
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ [ğŸ¤– æ¨¡å‹] [ğŸ“] [ğŸ¯] [ğŸ“¤å‘é€]    â”‚ â† å·¥å…·æ 
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### é€‰é¡¹å¡è®¾è®¡
- **Element Plus Tabsç»„ä»¶**
- **æœ€å¤§æ˜¾ç¤º3ä¸ªå¯¹è¯æ ‡ç­¾**ï¼Œè¶…å‡ºæ˜¾ç¤ºæ»šåŠ¨
- **å³ä¾§å·¥å…·ç®±æŒ‰é’®**å›ºå®šä½ç½®
- **æ–°å»ºå¯¹è¯**è‡ªåŠ¨ç”Ÿæˆæ ‡é¢˜"å¯¹è¯ N"

### å·¥å…·ç®±åŠŸèƒ½èœå•
```
ğŸ”§ å·¥å…·ç®±
â”œâ”€â”€ â• åˆ›å»ºæ–°å¯¹è¯
â”œâ”€â”€ ğŸ“š å†å²è®°å½•
â”œâ”€â”€ ğŸ“¤ å¯¼å‡ºå¯¹è¯
â”œâ”€â”€ ğŸ—‘ï¸ æ¸…ç©ºå½“å‰å¯¹è¯
â””â”€â”€ âš™ï¸ æ›´å¤šè®¾ç½®
```

### è¾“å…¥åŒºåŸŸè®¾è®¡
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åœ¨è¿™é‡Œè¾“å…¥æ¶ˆæ¯...                â”‚ â† å¤šè¡Œæ–‡æœ¬æ¡†
â”‚                                 â”‚   è‡ªåŠ¨é«˜åº¦(æœ€å¤§120px)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
[ğŸ¤– GPT-4] [ğŸ“] [ğŸ¯] [ğŸ“¤]          â† å·¥å…·æ 
```

## ğŸ”§ åŠŸèƒ½æ¨¡å—è®¾è®¡

### 1. æ¨¡å‹é€‰æ‹©å™¨ (ModelSelector)

#### äº¤äº’æµç¨‹
```
ç‚¹å‡» [ğŸ¤– æ¨¡å‹åç§°] 
â†’ å‘ä¸Šå¼¹å‡ºé€‰æ‹©èœå•
â†’ æ˜¾ç¤ºå·²é…ç½®æ¨¡å‹åˆ—è¡¨
â†’ åº•éƒ¨æ˜¾ç¤º [+ æ·»åŠ æ¨¡å‹] æŒ‰é’®
```

#### æ·»åŠ æ¨¡å‹å¯¹è¯æ¡†
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“± é€‰æ‹©èŠå¤©æ¨¡å‹              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â˜‘ï¸ GPT-4 Turbo             â”‚
â”‚ â˜‘ï¸ Claude-3.5 Sonnet       â”‚
â”‚ â˜ GPT-3.5 Turbo           â”‚
â”‚ â˜ Gemini Pro              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚        [å–æ¶ˆ]    [ç¡®å®š]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### æ ¡éªŒæœºåˆ¶
- **å¯åŠ¨æ—¶æ ¡éªŒ**ï¼šæ£€æŸ¥localStorageä¸­çš„æ¨¡å‹æ˜¯å¦ä»åœ¨æ´»è·ƒåˆ—è¡¨
- **å®æ—¶æ ¡éªŒ**ï¼šæ‰“å¼€é€‰æ‹©å™¨æ—¶åŒæ­¥æœ€æ–°çš„æ´»è·ƒæ¨¡å‹çŠ¶æ€
- **è‡ªåŠ¨æ¸…ç†**ï¼šç§»é™¤å·²å¤±æ•ˆçš„æ¨¡å‹é…ç½®

### 2. å¯¹è¯ç®¡ç† (ChatTabs)

#### æ•°æ®ç»“æ„
```typescript
interface ChatConversation {
  id: string
  title: string
  messages: ChatMessage[]
  modelId: string
  createdAt: Date
  updatedAt: Date
}

interface ChatMessage {
  id: string
  role: 'user' | 'assistant'
  content: string
  timestamp: Date
  status: 'sending' | 'sent' | 'error' | 'streaming'
  attachments?: FileReference[]
}
```

#### é€‰é¡¹å¡åŠŸèƒ½
- **è‡ªåŠ¨æ ‡é¢˜ç”Ÿæˆ**ï¼šåŸºäºé¦–æ¡æ¶ˆæ¯å†…å®¹
- **æ‰‹åŠ¨é‡å‘½å**ï¼šåŒå‡»æ ‡é¢˜ç¼–è¾‘
- **å…³é—­ç¡®è®¤**ï¼šæœ‰æœªä¿å­˜å†…å®¹æ—¶æç¤º
- **æœ€å¤§é™åˆ¶**ï¼šåŒæ—¶æœ€å¤šæ‰“å¼€5ä¸ªå¯¹è¯

### 3. æ¶ˆæ¯æ˜¾ç¤º (ChatMessages)

#### æ¶ˆæ¯æ ·å¼
```
ğŸ‘¤ ç”¨æˆ·æ¶ˆæ¯
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è¯·è§£é‡Šè¿™æ®µä»£ç çš„ä½œç”¨           â”‚
â”‚                             â”‚
â”‚ ```javascript               â”‚
â”‚ function test() {           â”‚
â”‚   return 'hello'            â”‚
â”‚ }                          â”‚
â”‚ ```                        â”‚
â”‚                             â”‚
â”‚ 13:45                  [â‹¯]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ¤– AIå›å¤
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è¿™æ˜¯ä¸€ä¸ªç®€å•çš„JavaScriptå‡½æ•°  â”‚
â”‚ åŠŸèƒ½æ˜¯è¿”å›å­—ç¬¦ä¸² "hello"...   â”‚
â”‚                             â”‚
â”‚ 13:45    [ğŸ‘] [ğŸ‘] [ğŸ“‹] [ğŸ”„] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### æ¶ˆæ¯æ“ä½œ
- **ğŸ‘ğŸ‘** åé¦ˆæŒ‰é’®
- **ğŸ“‹** å¤åˆ¶å†…å®¹
- **ğŸ”„** é‡æ–°ç”Ÿæˆ
- **â‹¯** æ›´å¤šæ“ä½œ(ç¼–è¾‘ã€åˆ é™¤)

### 4. é¡¹ç›®é›†æˆåŠŸèƒ½

#### æ–‡ä»¶å¼•ç”¨ç³»ç»Ÿ
- **@æ–‡ä»¶å** è¯­æ³•å¿«é€Ÿå¼•ç”¨
- **æ‹–æ‹½æ–‡ä»¶**åˆ°è¾“å…¥æ¡†è‡ªåŠ¨å¼•ç”¨
- **é€‰ä¸­ä»£ç **å³é”®èœå•"å‘é€åˆ°AI"

#### ä¸Šä¸‹æ–‡ç®¡ç†
```typescript
interface ProjectContext {
  currentFile?: string
  selectedCode?: string
  projectStructure: FileNode[]
  recentFiles: string[]
}
```

## ğŸ’¾ æ•°æ®å­˜å‚¨è®¾è®¡

### LocalStorageç»“æ„
```typescript
interface ChatSettings {
  selectedModels: string[]        // å·²é€‰æ‹©çš„æ¨¡å‹åˆ—è¡¨
  defaultModel: string           // é»˜è®¤æ¨¡å‹
  conversations: ChatConversation[] // å¯¹è¯å†å²
  preferences: {
    autoSave: boolean            // è‡ªåŠ¨ä¿å­˜
    maxHistory: number           // æœ€å¤§å†å²è®°å½•
    streamResponse: boolean      // æµå¼å“åº”
  }
}
```

### å­˜å‚¨é”®å
- `nimbria_chat_settings` - èŠå¤©é…ç½®
- `nimbria_chat_conversations` - å¯¹è¯è®°å½•
- `nimbria_chat_temp` - ä¸´æ—¶æ•°æ®

## ğŸ”„ çŠ¶æ€ç®¡ç† (Pinia Store)

### ChatStoreç»“æ„
```typescript
// Client/stores/chat/chatStore.ts
export const useChatStore = defineStore('chat', {
  state: (): ChatState => ({
    conversations: [],
    activeConversationId: null,
    isLoading: false,
    selectedModels: [],
    defaultModel: null,
    projectContext: null
  }),
  
  actions: {
    // å¯¹è¯ç®¡ç†
    createConversation(),
    deleteConversation(id: string),
    setActiveConversation(id: string),
    
    // æ¶ˆæ¯ç®¡ç†  
    sendMessage(content: string),
    regenerateMessage(messageId: string),
    deleteMessage(messageId: string),
    
    // æ¨¡å‹ç®¡ç†
    setSelectedModels(models: string[]),
    validateModels(),
    
    // é¡¹ç›®é›†æˆ
    setProjectContext(context: ProjectContext),
    addFileReference(filePath: string)
  }
})
```

## ğŸ¯ å¼€å‘ä¼˜å…ˆçº§

### Phase 1 - åŸºç¡€åŠŸèƒ½ (MVP)
- âœ… åŸºç¡€UIç»„ä»¶æ­å»º
- âœ… é€‰é¡¹å¡ç³»ç»Ÿ
- âœ… æ¶ˆæ¯å‘é€/æ¥æ”¶
- âœ… LocalStorageå­˜å‚¨
- âœ… æ¨¡å‹é€‰æ‹©å™¨

### Phase 2 - å¢å¼ºåŠŸèƒ½
- ğŸ”„ æµå¼å“åº”æ˜¾ç¤º
- ğŸ”„ æ–‡ä»¶å¼•ç”¨ç³»ç»Ÿ
- ğŸ”„ ä»£ç é«˜äº®
- ğŸ”„ å·¥å…·ç®±åŠŸèƒ½
- ğŸ”„ å¯¹è¯å¯¼å‡º

### Phase 3 - é«˜çº§åŠŸèƒ½
- ğŸ“‹ é¡¹ç›®ä¸Šä¸‹æ–‡é›†æˆ
- ğŸ“Š ä½¿ç”¨ç»Ÿè®¡
- ğŸ¨ ä¸»é¢˜å®šåˆ¶
- ğŸ”§ é«˜çº§é…ç½®

## ğŸ”Œ æŠ€æœ¯æ ˆ

- **UIæ¡†æ¶**: Element Plus (é€‰é¡¹å¡ã€å¯¹è¯æ¡†ã€æŒ‰é’®)
- **çŠ¶æ€ç®¡ç†**: Pinia Store
- **å­˜å‚¨**: LocalStorage + IndexedDB(å¤§æ–‡ä»¶)
- **æ ·å¼**: SCSS + Quasarå˜é‡
- **ç±»å‹**: TypeScript
- **å›¾æ ‡**: Element Plus Icons + è‡ªå®šä¹‰SVG

## ğŸ“ å¼€å‘æ³¨æ„äº‹é¡¹

1. **æ€§èƒ½ä¼˜åŒ–**ï¼šå¤§é‡æ¶ˆæ¯æ—¶ä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨
2. **å†…å­˜ç®¡ç†**ï¼šé™åˆ¶åŒæ—¶æ‰“å¼€çš„å¯¹è¯æ•°é‡
3. **é”™è¯¯å¤„ç†**ï¼šç½‘ç»œå¼‚å¸¸ã€æ¨¡å‹è°ƒç”¨å¤±è´¥çš„ä¼˜é›…å¤„ç†
4. **ç”¨æˆ·ä½“éªŒ**ï¼šåŠ è½½çŠ¶æ€ã€è¿›åº¦æŒ‡ç¤ºã€æ“ä½œåé¦ˆ
5. **æ•°æ®å®‰å…¨**ï¼šæ•æ„Ÿä¿¡æ¯ä¸å­˜å‚¨åœ¨localStorage
6. **å“åº”å¼è®¾è®¡**ï¼šé€‚é…ä¸åŒå±å¹•å°ºå¯¸