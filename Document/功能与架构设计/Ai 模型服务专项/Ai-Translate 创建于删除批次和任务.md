# LLMç¿»è¯‘ç³»ç»Ÿä»»åŠ¡ç®¡ç†é¢æ¿ - åˆ é™¤ä¸æ–°å»ºåŠŸèƒ½æ€»ç»“
## 2025å¹´10æœˆ20æ—¥

---

## ğŸ“‹ ç›®å½•
1. [æ¶æ„æ¦‚è¿°](#æ¶æ„æ¦‚è¿°)
2. [æ•°æ®æµé“¾è·¯](#æ•°æ®æµé“¾è·¯)
3. [é€šé“è®¾è®¡](#é€šé“è®¾è®¡)
4. [ç±»å‹ç³»ç»Ÿ](#ç±»å‹ç³»ç»Ÿ)
5. [æ–‡ä»¶ç»„ç»‡](#æ–‡ä»¶ç»„ç»‡)
6. [åŠŸèƒ½è¯¦è§£](#åŠŸèƒ½è¯¦è§£)
7. [æ“ä½œæŒ‡å—](#æ“ä½œæŒ‡å—)
8. [æ ¸å¿ƒæœºåˆ¶](#æ ¸å¿ƒæœºåˆ¶)

---

## æ¶æ„æ¦‚è¿°

### æ•´ä½“æ¶æ„å›¾
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Vue3 GUI (Renderer Process)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  TaskManagePage.vue (UI Layer)                   â”‚   â”‚
â”‚  â”‚  - æ‰¹æ¬¡åˆ—è¡¨ä¸å·¥å…·æ                                â”‚   â”‚
â”‚  â”‚  - ä»»åŠ¡åˆ—è¡¨ä¸æ“ä½œæŒ‰é’®                             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  translate.store.ts (State Management)           â”‚   â”‚
â”‚  â”‚  - Pinia Store (çŠ¶æ€ç®¡ç†)                         â”‚   â”‚
â”‚  â”‚  - äº‹ä»¶ç›‘å¬å™¨æ³¨å†Œ                                  â”‚   â”‚
â”‚  â”‚  - æ‰¹æ¬¡/ä»»åŠ¡é€‰æ‹©çŠ¶æ€                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  translate.datasource.ts (Data Layer)            â”‚   â”‚
â”‚  â”‚  - IPC è°ƒç”¨å°è£…                                   â”‚   â”‚
â”‚  â”‚  - Mock æ•°æ®æ”¯æŒ                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â†• IPC åŒå‘é€šä¿¡ (contextBridge)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Electron Main Process (Main Thread)                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  llm-translate-handlers.ts (IPC Layer)           â”‚   â”‚
â”‚  â”‚  - ipcMain.handle() å¤„ç†è¯·æ±‚                      â”‚   â”‚
â”‚  â”‚  - äº‹ä»¶å¹¿æ’­åˆ°æ‰€æœ‰çª—å£                             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  llm-translate-service.ts (Business Logic)       â”‚   â”‚
â”‚  â”‚  - æ‰¹æ¬¡åˆ›å»º/åˆ é™¤é€»è¾‘                              â”‚   â”‚
â”‚  â”‚  - ä»»åŠ¡åˆ é™¤ä¸çº§è”åˆ é™¤                            â”‚   â”‚
â”‚  â”‚  - EventEmitter äº‹ä»¶é©±åŠ¨                        â”‚   â”‚
â”‚  â”‚  - ç»Ÿè®¡ä¿¡æ¯æ›´æ–°                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ProjectDatabase (SQLite)                        â”‚   â”‚
â”‚  â”‚  - Llmtranslate_batches                          â”‚   â”‚
â”‚  â”‚  - Llmtranslate_tasks                            â”‚   â”‚
â”‚  â”‚  - Llmtranslate_stats                            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒç‰¹ç‚¹
- **äº‹ä»¶é©±åŠ¨æ¶æ„**ï¼šåŸºäº EventEmitterï¼Œç¡®ä¿å¤šçª—å£å®æ—¶åŒæ­¥
- **æ— åç«¯æœåŠ¡**ï¼šæ‰€æœ‰æ“ä½œåœ¨æœ¬åœ° SQLite å®Œæˆï¼Œæ— ç½‘ç»œè°ƒç”¨
- **IPC å¼‚æ­¥é€šä¿¡**ï¼šä½¿ç”¨ Electron IPC å®ç°è¿›ç¨‹é—´é€šä¿¡
- **ç±»å‹å®‰å…¨**ï¼šä¸¥æ ¼çš„ TypeScript ç±»å‹è§„èŒƒ
- **è‡ªåŠ¨çº§è”**ï¼šåˆ é™¤ä»»åŠ¡æ—¶è‡ªåŠ¨æ¸…ç†ç©ºæ‰¹æ¬¡

---

## æ•°æ®æµé“¾è·¯

### åˆ é™¤ä»»åŠ¡æµç¨‹

```
UI: ç”¨æˆ·é€‰æ‹©ä»»åŠ¡ & ç‚¹å‡»"åˆ é™¤"
  â†“
TaskManagePage.vue::deleteSelected()
  â†“
translate.store.ts::deleteSelectedTasks()
  â”œâ†’ éªŒè¯é€‰æ‹©çš„ä»»åŠ¡ID
  â”œâ†’ è°ƒç”¨ datasource.deleteTasks(taskIds)
  â””â†’ æ¸…ç©ºé€‰æ‹©çŠ¶æ€
      â†“
translate.datasource.ts::deleteTasks()
  â”œâ†’ è°ƒç”¨ electronAPI.deleteTasks(taskIds)
  â””â†’ è¿”å› Promise
      â†“
[IPC Channel] 'llm-translate:delete-tasks'
  â†“
llm-translate-handlers.ts::ipcMain.handle()
  â”œâ†’ éªŒè¯å‚æ•°
  â”œâ†’ è°ƒç”¨ llmTranslateService.deleteTasks(taskIds, batchId)
  â””â†’ è¿”å› operationId
      â†“
llm-translate-service.ts::deleteTasks()
  â”œâ†’ ç”Ÿæˆ operationId
  â”œâ†’ å‘å°„ 'task:delete-start' äº‹ä»¶
  â””â†’ å¼‚æ­¥è°ƒç”¨ deleteTasksAsync()
      â†“
llm-translate-service.ts::deleteTasksAsync()
  â”œâ†’ æ•°æ®åº“åˆ é™¤ä»»åŠ¡
  â”œâ†’ æ£€æŸ¥æ‰¹æ¬¡æ˜¯å¦ä¸ºç©º
  â”‚  â”œâ”€ YES â†’ è‡ªåŠ¨åˆ é™¤æ‰¹æ¬¡
  â”‚  â”‚         å‘å°„ 'batch:deleted' äº‹ä»¶
  â”‚  â””â”€ NO â†’ æ›´æ–°æ‰¹æ¬¡ç»Ÿè®¡
  â”‚         å‘å°„ 'task:deleted' äº‹ä»¶
  â””â†’ å¼‚å¸¸å¤„ç†å‘å°„ 'task:delete-error' äº‹ä»¶
      â†“
[IPC Broadcast] 'llm-translate:batch-deleted' æˆ– 'llm-translate:task-deleted'
  â†“
project-preload.ts::onBatchDeleted() æˆ– onTaskDeleted()
  â†“
translate.store.ts::setupEventListeners()
  â”œâ†’ ä»æ‰¹æ¬¡åˆ—è¡¨ç§»é™¤
  â”œâ†’ é‡æ–°åŠ è½½ä»»åŠ¡åˆ—è¡¨
  â””â†’ æ£€æŸ¥å¹¶è‡ªåŠ¨åˆ é™¤ç©ºæ‰¹æ¬¡
      â†“
UI è‡ªåŠ¨æ›´æ–° (Reactive)
  â”œâ†’ æ‰¹æ¬¡åˆ—è¡¨åˆ·æ–°
  â”œâ†’ ä»»åŠ¡åˆ—è¡¨åˆ·æ–°
  â””â†’ ç»Ÿè®¡ä¿¡æ¯æ›´æ–°
```

### åˆ é™¤æ‰¹æ¬¡æµç¨‹

```
UI: ç”¨æˆ·å¯ç”¨é€‰æ‹©æ¨¡å¼ â†’ å…¨é€‰/å‹¾é€‰æ‰¹æ¬¡ â†’ ç‚¹å‡»"åˆ é™¤"
  â†“
TaskManagePage.vue::deleteSelectedBatches()
  â”œâ†’ æ˜¾ç¤ºç¡®è®¤å¯¹è¯æ¡†
  â””â†’ è°ƒç”¨ store.deleteSelectedBatches()
      â†“
translate.store.ts::deleteSelectedBatches()
  â”œâ†’ éªŒè¯é€‰æ‹©çš„æ‰¹æ¬¡ID
  â”œâ†’ å¹¶è¡Œè°ƒç”¨å¤šä¸ª deleteBatch(batchId)
  â”œâ†’ é‡æ–°åŠ è½½æ‰¹æ¬¡åˆ—è¡¨
  â”œâ†’ æ¸…ç©ºé€‰æ‹©çŠ¶æ€å’Œé€‰æ‹©æ¨¡å¼
  â””â†’ æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
      â†“
translate.datasource.ts::deleteBatch()
  â”œâ†’ è°ƒç”¨ electronAPI.deleteBatch(batchId)
  â””â†’ è¿”å› Promise
      â†“
[IPC Channel] 'llm-translate:delete-batch'
  â†“
llm-translate-handlers.ts::ipcMain.handle()
  â”œâ†’ éªŒè¯å‚æ•°
  â”œâ†’ è°ƒç”¨ llmTranslateService.deleteBatch(batchId)
  â””â†’ è¿”å› operationId
      â†“
llm-translate-service.ts::deleteBatch()
  â”œâ†’ ç”Ÿæˆ operationId
  â”œâ†’ å‘å°„ 'batch:delete-start' äº‹ä»¶
  â””â†’ å¼‚æ­¥è°ƒç”¨ deleteBatchAsync()
      â†“
llm-translate-service.ts::deleteBatchAsync()
  â”œâ†’ æ•°æ®åº“åˆ é™¤æ‰¹æ¬¡åŠæ‰€æœ‰ä»»åŠ¡
  â”œâ†’ åˆ é™¤ç»Ÿè®¡ä¿¡æ¯
  â”œâ†’ æ¸…ç†å†…å­˜ç¼“å­˜
  â””â†’ å‘å°„ 'batch:deleted' æˆ– 'batch:delete-error' äº‹ä»¶
      â†“
[IPC Broadcast] 'llm-translate:batch-deleted'
  â†“
translate.store.ts::setupEventListeners()
  â”œâ†’ ä»æ‰¹æ¬¡åˆ—è¡¨ç§»é™¤
  â”œâ†’ æ¸…ç©ºå½“å‰æ‰¹æ¬¡
  â””â†’ æ¸…ç©ºä»»åŠ¡åˆ—è¡¨
      â†“
UI è‡ªåŠ¨æ›´æ–° (Reactive)
  â””â†’ æ‰¹æ¬¡åˆ—è¡¨åˆ·æ–°
```

---

## é€šé“è®¾è®¡

### IPC Handler é€šé“

#### åˆ é™¤æ“ä½œé€šé“

| é€šé“å | æ–¹å‘ | å‚æ•° | è¿”å›å€¼ | è¯´æ˜ |
|-------|------|------|--------|------|
| `llm-translate:delete-batch` | invoke | `{ batchId: string }` | `{ operationId: string }` | åˆ é™¤å•ä¸ªæ‰¹æ¬¡ |
| `llm-translate:delete-tasks` | invoke | `{ taskIds: string[] }` | `{ operationId: string }` | åˆ é™¤å¤šä¸ªä»»åŠ¡ |

#### äº‹ä»¶å¹¿æ’­é€šé“

| é€šé“å | æ¥æº | æ•°æ® | è¯´æ˜ |
|-------|------|------|------|
| `llm-translate:batch-delete-start` | Service â†’ Handler â†’ Renderer | `{ batchId: string }` | æ‰¹æ¬¡åˆ é™¤å¼€å§‹ |
| `llm-translate:batch-deleted` | Service â†’ Handler â†’ Renderer | `{ batchId: string; deletedTaskCount: number }` | æ‰¹æ¬¡åˆ é™¤å®Œæˆ |
| `llm-translate:batch-delete-error` | Service â†’ Handler â†’ Renderer | `{ batchId: string; error: string }` | æ‰¹æ¬¡åˆ é™¤å‡ºé”™ |
| `llm-translate:task-delete-start` | Service â†’ Handler â†’ Renderer | `{ taskIds: string[]; batchId: string }` | ä»»åŠ¡åˆ é™¤å¼€å§‹ |
| `llm-translate:task-deleted` | Service â†’ Handler â†’ Renderer | `{ taskIds: string[]; batchId: string; deletedCount: number }` | ä»»åŠ¡åˆ é™¤å®Œæˆ |
| `llm-translate:task-delete-error` | Service â†’ Handler â†’ Renderer | `{ taskIds: string[]; batchId: string; error: string }` | ä»»åŠ¡åˆ é™¤å‡ºé”™ |

### ä¸Šä¸‹æ–‡æ¡¥æ¥ (contextBridge)

```typescript
// project-preload.ts æš´éœ²çš„ API
nimbria.llmTranslate = {
  // åˆ é™¤æ“ä½œ
  deleteBatch: (args: { batchId: string }) => ipcRenderer.invoke(...)
  deleteTasks: (args: { taskIds: string[] }) => ipcRenderer.invoke(...)
  
  // åˆ é™¤äº‹ä»¶ç›‘å¬
  onBatchDeleteStart: (callback) => ipcRenderer.on(...)
  onBatchDeleted: (callback) => ipcRenderer.on(...)
  onBatchDeleteError: (callback) => ipcRenderer.on(...)
  onTaskDeleteStart: (callback) => ipcRenderer.on(...)
  onTaskDeleted: (callback) => ipcRenderer.on(...)
  onTaskDeleteError: (callback) => ipcRenderer.on(...)
}
```

---

## ç±»å‹ç³»ç»Ÿ

### åç«¯äº‹ä»¶ç±»å‹ï¼ˆBackend Eventsï¼‰

**æ–‡ä»¶**: `Nimbria/src-electron/types/LlmTranslate/backend/events.ts`

```typescript
// æ‰¹æ¬¡åˆ é™¤äº‹ä»¶
export interface BatchDeleteStartEvent {
  batchId: string
}

export interface BatchDeletedEvent {
  batchId: string
  deletedTaskCount: number
}

export interface BatchDeleteErrorEvent {
  batchId: string
  error: string
}

// ä»»åŠ¡åˆ é™¤äº‹ä»¶
export interface TaskDeleteStartEvent {
  taskIds: string[]
  batchId: string
}

export interface TaskDeletedEvent {
  taskIds: string[]
  batchId: string
  deletedCount: number
}

export interface TaskDeleteErrorEvent {
  taskIds: string[]
  batchId: string
  error: string
}
```

### API ç±»å‹ï¼ˆFrontend-Backend Contractï¼‰

**æ–‡ä»¶**: `Nimbria/Client/GUI/DemoPage/LlmTranslate/types/api.ts`

```typescript
// åˆ é™¤æ‰¹æ¬¡
export interface DeleteBatchRequest {
  batchId: string
}

export interface DeleteBatchResponse {
  operationId: string
}

// åˆ é™¤ä»»åŠ¡
export interface DeleteTasksRequest {
  taskIds: string[]
}

export interface DeleteTasksResponse {
  operationId: string
}
```

### Store ç±»å‹ï¼ˆFrontend Stateï¼‰

**æ–‡ä»¶**: `Nimbria/Client/GUI/DemoPage/LlmTranslate/stores/translate.types.ts`

```typescript
// æ‰¹æ¬¡é€‰æ‹©ç›¸å…³çŠ¶æ€
selectedBatchIds: Set<string>  // é€‰ä¸­çš„æ‰¹æ¬¡IDé›†åˆ
batchSelectMode: boolean       // æ˜¯å¦å¯ç”¨æ‰¹æ¬¡é€‰æ‹©æ¨¡å¼

// ä»»åŠ¡é€‰æ‹©ç›¸å…³çŠ¶æ€
selectedTaskIds: Set<string>   // é€‰ä¸­çš„ä»»åŠ¡IDé›†åˆ
taskFilters: {
  selectMode: boolean          // ä»»åŠ¡æ˜¯å¦å¯ç”¨é€‰æ‹©æ¨¡å¼
  ...
}
```

---

## æ–‡ä»¶ç»„ç»‡

### åç«¯æœåŠ¡å±‚ (Electron Main)

```
src-electron/
â”œâ”€â”€ types/LlmTranslate/
â”‚   â”œâ”€â”€ backend/
â”‚   â”‚   â””â”€â”€ events.ts              â† åç«¯äº‹ä»¶ç±»å‹å®šä¹‰
â”‚   â””â”€â”€ client/
â”‚       â”œâ”€â”€ batch.ts               â† æ‰¹æ¬¡ç±»å‹
â”‚       â”œâ”€â”€ task.ts                â† ä»»åŠ¡ç±»å‹
â”‚       â””â”€â”€ ...
â”œâ”€â”€ services/llm-translate-service/
â”‚   â”œâ”€â”€ llm-translate-service.ts   â† æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ deleteBatch()          â† æ‰¹æ¬¡åˆ é™¤å…¥å£
â”‚   â”‚   â”œâ”€â”€ deleteBatchAsync()     â† å¼‚æ­¥æ‰¹æ¬¡åˆ é™¤
â”‚   â”‚   â”œâ”€â”€ deleteTasks()          â† ä»»åŠ¡åˆ é™¤å…¥å£
â”‚   â”‚   â””â”€â”€ deleteTasksAsync()     â† å¼‚æ­¥ä»»åŠ¡åˆ é™¤ (å«è‡ªåŠ¨æ¸…ç†)
â”‚   â””â”€â”€ ...
â”œâ”€â”€ ipc/main-renderer/
â”‚   â””â”€â”€ llm-translate-handlers.ts   â† IPCå¤„ç†å™¨
â”‚       â”œâ”€â”€ ipcMain.handle('llm-translate:delete-batch', ...)
â”‚       â”œâ”€â”€ ipcMain.handle('llm-translate:delete-tasks', ...)
â”‚       â”œâ”€â”€ service.on('batch:deleted', ...)
â”‚       â””â”€â”€ service.on('task:deleted', ...)
â””â”€â”€ core/
    â””â”€â”€ project-preload.ts         â† contextBridge APIæš´éœ²
        â””â”€â”€ nimbria.llmTranslate.{deleteBatch, deleteTasks, on*}
```

### å‰ç«¯åº”ç”¨å±‚ (Vue3 GUI)

```
Client/GUI/DemoPage/LlmTranslate/
â”œâ”€â”€ components/
â”‚   â””â”€â”€ TaskManagePage.vue         â† UI ç»„ä»¶
â”‚       â”œâ”€â”€ sidebar (æ‰¹æ¬¡åˆ—è¡¨)
â”‚       â”‚   â”œâ”€â”€ batch-toolbar      â† æ‰¹æ¬¡ç®¡ç†å·¥å…·æ 
â”‚       â”‚   â””â”€â”€ batch-list         â† æ‰¹æ¬¡é¡¹åˆ—è¡¨
â”‚       â”œâ”€â”€ main-content           â† ä»»åŠ¡å†…å®¹åŒº
â”‚       â”‚   â”œâ”€â”€ task-toolbar       â† ä»»åŠ¡æ“ä½œå·¥å…·æ 
â”‚       â”‚   â””â”€â”€ task-list          â† ä»»åŠ¡å¡ç‰‡åˆ—è¡¨
â”‚       â””â”€â”€ scripts
â”‚           â”œâ”€â”€ handleBatchClick()
â”‚           â”œâ”€â”€ selectAllBatches()
â”‚           â””â”€â”€ deleteSelectedBatches()
â”œâ”€â”€ stores/
â”‚   â””â”€â”€ translate.store.ts         â† Pinia Store
â”‚       â”œâ”€â”€ State: selectedBatchIds, batchSelectMode
â”‚       â”œâ”€â”€ Methods: toggleBatchSelection()
â”‚       â”‚           selectAllBatches()
â”‚       â”‚           deleteSelectedBatches()
â”‚       â”œâ”€â”€ Events: setupEventListeners()
â”‚       â”‚         onBatchDeleted()
â”‚       â”‚         onTaskDeleted()
â”‚       â””â”€â”€ Auto-cleanup: checkAndDeleteEmptyBatch()
â”œâ”€â”€ types/
â”‚   â”œâ”€â”€ api.ts                     â† API ç±»å‹
â”‚   â”œâ”€â”€ batch.ts                   â† æ‰¹æ¬¡ç±»å‹
â”‚   â”œâ”€â”€ task.ts                    â† ä»»åŠ¡ç±»å‹
â”‚   â””â”€â”€ ...
â””â”€â”€ datasource/
    â””â”€â”€ translate.datasource.ts    â† æ•°æ®æºå°è£…
        â”œâ”€â”€ deleteBatch()
        â””â”€â”€ deleteTasks()
```

### æ ·å¼ç»„ç»‡

**æ–‡ä»¶**: `TaskManagePage.vue` ä¸­çš„ `<style scoped lang="scss">`

```scss
.sidebar-header
  â”œâ”€â”€ .header-content        // æ ‡é¢˜å†…å®¹
  â””â”€â”€ .batch-toolbar         // å·¥å…·æ å®¹å™¨
      â”œâ”€â”€ .batch-tool-item   // å·¥å…·æŒ‰é’®
      â”‚   â”œâ”€â”€ &:hover        // æ‚¬åœæ ·å¼
      â”‚   â”œâ”€â”€ &--active      // æ¿€æ´»æ ·å¼ (é€‰æ‹©æ¨¡å¼å¯ç”¨æ—¶)
      â”‚   â””â”€â”€ &--danger      // å±é™©æŒ‰é’® (åˆ é™¤)
      â””â”€â”€ .el-icon           // Element Plus å›¾æ ‡

.batch-item
  â”œâ”€â”€ &.active              // å½“å‰æ‰¹æ¬¡æ ·å¼
  â”œâ”€â”€ &.selected            // é€‰ä¸­æ‰¹æ¬¡æ ·å¼
  â”œâ”€â”€ .batch-checkbox       // å¤é€‰æ¡†å®¹å™¨
  â””â”€â”€ .batch-info           // æ‰¹æ¬¡ä¿¡æ¯å®¹å™¨
      â”œâ”€â”€ .batch-id
      â”œâ”€â”€ .batch-status
      â””â”€â”€ .batch-stats
```

---

## åŠŸèƒ½è¯¦è§£

### 1. æ‰¹æ¬¡ç®¡ç†å·¥å…·æ 

#### UI ç»„ä»¶ (TaskManagePage.vue)

```vue
<!-- æ‰¹æ¬¡åˆ—è¡¨æ ‡é¢˜æ  + å·¥å…·æ  -->
<div class="sidebar-header">
  <div class="header-content">
    <el-icon><Collection /></el-icon> 
    <span>æ‰¹æ¬¡åˆ—è¡¨</span>
  </div>
  
  <!-- æ‰¹æ¬¡ç®¡ç†å·¥å…·æ  -->
  <div class="batch-toolbar">
    <!-- åˆ‡æ¢é€‰æ‹©æ¨¡å¼ -->
    <div class="batch-tool-item" 
         :class="{ 'batch-tool-item--active': store.batchSelectMode }"
         @click="store.batchSelectMode = !store.batchSelectMode">
      <el-icon><Check /></el-icon>
    </div>

    <!-- å…¨é€‰æ‰¹æ¬¡ (ä»…åœ¨é€‰æ‹©æ¨¡å¼ä¸‹æ˜¾ç¤º) -->
    <div v-show="store.batchSelectMode"
         class="batch-tool-item" 
         @click="selectAllBatches">
      <el-icon><Select /></el-icon>
    </div>

    <!-- åˆ é™¤é€‰ä¸­æ‰¹æ¬¡ (ä»…é€‰æ‹©æ¨¡å¼ & æœ‰é€‰ä¸­æ—¶æ˜¾ç¤º) -->
    <div v-show="store.batchSelectMode && store.selectedBatchIds.size > 0"
         class="batch-tool-item batch-tool-item--danger" 
         @click="deleteSelectedBatches">
      <el-icon><Delete /></el-icon>
    </div>
  </div>
</div>
```

#### åŠŸèƒ½è¯´æ˜

| æŒ‰é’® | å›¾æ ‡ | è¡Œä¸º | æ•ˆæœ |
|-----|------|------|------|
| å¯ç”¨/å–æ¶ˆé€‰æ‹© | Check âœ“ | åˆ‡æ¢ `batchSelectMode` | æ˜¾ç¤º/éšè—å¤é€‰æ¡†å’Œå…¨é€‰æŒ‰é’® |
| å…¨é€‰æ‰¹æ¬¡ | Select âŠŸ | è°ƒç”¨ `selectAllBatches()` | é€‰ä¸­æ‰€æœ‰æ‰¹æ¬¡ |
| åˆ é™¤æ‰¹æ¬¡ | Delete ğŸ—‘ | è°ƒç”¨ `deleteSelectedBatches()` | åˆ é™¤æ‰€æœ‰é€‰ä¸­æ‰¹æ¬¡ |

### 2. ä»»åŠ¡é€‰æ‹©ä¸åˆ é™¤

#### ä»»åŠ¡é€‰æ‹©æ¨¡å¼

```typescript
// Store ä¸­çš„ä»»åŠ¡é€‰æ‹©é€»è¾‘
const taskFilters = ref<TaskFilter>({
  status: ['queued', 'waiting', 'throttled', 'error', 'unsent'],
  searchText: '',
  selectMode: false  // åˆ‡æ¢é€‰æ‹©æ¨¡å¼
})

const selectedTaskIds = ref<Set<string>>(new Set())

// åˆ‡æ¢ä»»åŠ¡é€‰æ‹©
const toggleTaskSelection = (taskId: string) => {
  if (selectedTaskIds.value.has(taskId)) {
    selectedTaskIds.value.delete(taskId)
  } else {
    selectedTaskIds.value.add(taskId)
  }
}

// åˆ é™¤é€‰ä¸­ä»»åŠ¡
const deleteSelectedTasks = async () => {
  await datasource.deleteTasks(Array.from(selectedTaskIds.value))
  selectedTaskIds.value.clear()
  // é‡æ–°åŠ è½½ä»»åŠ¡åˆ—è¡¨...
}
```

### 3. è‡ªåŠ¨çº§è”åˆ é™¤æœºåˆ¶

#### ç©ºæ‰¹æ¬¡è‡ªåŠ¨åˆ é™¤

å½“åˆ é™¤ä»»åŠ¡æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æ£€æŸ¥æ‰¹æ¬¡æ˜¯å¦ä»æœ‰å‰©ä½™ä»»åŠ¡ï¼š

```typescript
// llm-translate-service.ts ä¸­çš„ deleteTasksAsync()
private async deleteTasksAsync(taskIds: string[], batchId: string): Promise<void> {
  // 1. åˆ é™¤ä»»åŠ¡
  db.execute(`DELETE FROM Llmtranslate_tasks WHERE id IN (...)`, taskIds)

  // 2. æ£€æŸ¥æ‰¹æ¬¡æ˜¯å¦ä¸ºç©º
  const remainingTasks = db.queryOne(
    `SELECT COUNT(*) as count FROM Llmtranslate_tasks WHERE batch_id = ?`,
    [batchId]
  )

  // 3. å¦‚æœä¸ºç©ºï¼Œè‡ªåŠ¨åˆ é™¤æ‰¹æ¬¡
  if (remainingTasks.count === 0) {
    db.execute(`DELETE FROM Llmtranslate_batches WHERE id = ?`, [batchId])
    db.execute(`DELETE FROM Llmtranslate_stats WHERE batch_id = ?`, [batchId])
    this.activeBatches.delete(batchId)
    
    // å‘å°„æ‰¹æ¬¡åˆ é™¤äº‹ä»¶
    this.emit('batch:deleted', { 
      batchId, 
      deletedTaskCount: taskIds.length 
    })
  }
}
```

#### æ•°æ®åº“çº§è”è§„åˆ™

```sql
-- è¡¨ç»“æ„ä¸­çš„å¤–é”®çº¦æŸ
CREATE TABLE Llmtranslate_tasks (
  id TEXT PRIMARY KEY,
  batch_id TEXT NOT NULL,
  FOREIGN KEY (batch_id) REFERENCES Llmtranslate_batches(id)
    ON DELETE CASCADE
)
```

---

## æ“ä½œæŒ‡å—

### åˆ é™¤å•ä¸ª/å¤šä¸ªä»»åŠ¡

#### ç¬¬ä¸€æ­¥ï¼šå¯ç”¨ä»»åŠ¡é€‰æ‹©æ¨¡å¼
1. åœ¨ä»»åŠ¡åˆ—è¡¨ä¸Šæ–¹æ‰¾åˆ°å·¥å…·æ 
2. ç‚¹å‡» **Check âœ“** å›¾æ ‡å¯ç”¨é€‰æ‹©æ¨¡å¼
3. ä»»åŠ¡å¡ç‰‡å·¦ä¾§ä¼šå‡ºç° **å¤é€‰æ¡†**

#### ç¬¬äºŒæ­¥ï¼šé€‰æ‹©ä»»åŠ¡
- **å•ä¸ªé€‰æ‹©**ï¼šç‚¹å‡»ä»»åŠ¡å¡ç‰‡å·¦ä¾§çš„å¤é€‰æ¡†
- **å…¨é€‰**ï¼šç‚¹å‡»å·¥å…·æ çš„ **Select âŠŸ** å›¾æ ‡
- **åé€‰**ï¼šå†æ¬¡ç‚¹å‡»å·²é€‰æ‹©çš„å¤é€‰æ¡†

#### ç¬¬ä¸‰æ­¥ï¼šåˆ é™¤ä»»åŠ¡
1. ç‚¹å‡»å·¥å…·æ çš„ **Delete ğŸ—‘** å›¾æ ‡
2. ç³»ç»Ÿä¼šè‡ªåŠ¨æ£€æŸ¥ä»»åŠ¡æ‰€å±æ‰¹æ¬¡
3. å¦‚æœæ‰¹æ¬¡æ— å‰©ä½™ä»»åŠ¡ï¼Œ**è¯¥æ‰¹æ¬¡ä¼šè‡ªåŠ¨åˆ é™¤**

#### ç¬¬å››æ­¥ï¼šå…³é—­é€‰æ‹©æ¨¡å¼
- ç‚¹å‡» **Check âœ“** å›¾æ ‡å–æ¶ˆé€‰æ‹©æ¨¡å¼
- æ‰€æœ‰é€‰æ‹©çŠ¶æ€ä¼šè¢«ä¿ç•™ï¼ˆå¯å†æ¬¡åˆ‡æ¢å›æ¥ï¼‰

### åˆ é™¤å•ä¸ª/å¤šä¸ªæ‰¹æ¬¡

#### ç¬¬ä¸€æ­¥ï¼šå¯ç”¨æ‰¹æ¬¡é€‰æ‹©æ¨¡å¼
1. åœ¨æ‰¹æ¬¡åˆ—è¡¨æ ‡é¢˜æ æ‰¾åˆ°å·¥å…·æ 
2. ç‚¹å‡» **Check âœ“** å›¾æ ‡å¯ç”¨é€‰æ‹©æ¨¡å¼
3. æ‰¹æ¬¡é¡¹å·¦ä¾§ä¼šå‡ºç° **å¤é€‰æ¡†**

#### ç¬¬äºŒæ­¥ï¼šé€‰æ‹©æ‰¹æ¬¡
- **å•ä¸ªé€‰æ‹©**ï¼šç‚¹å‡»æ‰¹æ¬¡é¡¹å·¦ä¾§çš„å¤é€‰æ¡†
- **å…¨é€‰**ï¼šç‚¹å‡»å·¥å…·æ çš„ **Select âŠŸ** å›¾æ ‡é€‰ä¸­æ‰€æœ‰æ‰¹æ¬¡
- **åé€‰**ï¼šå†æ¬¡ç‚¹å‡»å·²é€‰æ‹©çš„å¤é€‰æ¡†

#### ç¬¬ä¸‰æ­¥ï¼šåˆ é™¤æ‰¹æ¬¡
1. ç‚¹å‡»å·¥å…·æ çš„ **Delete ğŸ—‘** å›¾æ ‡
2. ä¼šå¼¹å‡º **ç¡®è®¤å¯¹è¯æ¡†**ï¼š
   ```
   "ç¡®å®šè¦åˆ é™¤é€‰ä¸­çš„ X ä¸ªæ‰¹æ¬¡å—ï¼Ÿè¿™å°†åŒæ—¶åˆ é™¤æ‰€æœ‰ç›¸å…³ä»»åŠ¡ã€‚"
   ```
3. ç‚¹å‡» **ç¡®å®šåˆ é™¤** ç¡®è®¤
4. ç³»ç»Ÿä¼š **å¹¶è¡Œåˆ é™¤** æ‰€æœ‰é€‰ä¸­æ‰¹æ¬¡
5. æ‰¹æ¬¡åˆ—è¡¨ä¼šè‡ªåŠ¨åˆ·æ–°

#### ç¬¬å››æ­¥ï¼šå…³é—­é€‰æ‹©æ¨¡å¼
- åˆ é™¤å®Œæˆåï¼Œé€‰æ‹©æ¨¡å¼ä¼šè‡ªåŠ¨å…³é—­
- é€‰æ‹©çŠ¶æ€ä¼šè¢«æ¸…ç©º

### å¸¸è§åœºæ™¯

#### åœºæ™¯ 1ï¼šæ¸…ç©ºæ•´ä¸ªæ‰¹æ¬¡
1. åœ¨ä»»åŠ¡åˆ—è¡¨ä¸­å¯ç”¨é€‰æ‹©æ¨¡å¼
2. ç‚¹å‡» "å…¨é€‰" é€‰ä¸­æ‰€æœ‰ä»»åŠ¡
3. ç‚¹å‡» "Delete ğŸ—‘" åˆ é™¤æ‰€æœ‰ä»»åŠ¡
4. **è‡ªåŠ¨åˆ é™¤ç©ºæ‰¹æ¬¡**
5. æ‰¹æ¬¡ä»å·¦ä¾§åˆ—è¡¨æ¶ˆå¤±

#### åœºæ™¯ 2ï¼šåˆ é™¤å¤±è´¥çš„æ‰¹æ¬¡åŠå…¶æ‰€æœ‰ä»»åŠ¡
1. åœ¨æ‰¹æ¬¡åˆ—è¡¨ä¸­å¯ç”¨é€‰æ‹©æ¨¡å¼
2. æ‰¾åˆ°å¤±è´¥çš„æ‰¹æ¬¡ï¼Œç‚¹å‡»å…¶å¤é€‰æ¡†é€‰ä¸­
3. ç‚¹å‡»å·¥å…·æ  "Delete ğŸ—‘"
4. ç¡®è®¤åˆ é™¤
5. è¯¥æ‰¹æ¬¡åŠæ‰€æœ‰ä»»åŠ¡ä¼šè¢«åˆ é™¤

#### åœºæ™¯ 3ï¼šæ‰¹é‡åˆ é™¤å¤šä¸ªå®Œæˆçš„æ‰¹æ¬¡
1. åœ¨æ‰¹æ¬¡åˆ—è¡¨ä¸­å¯ç”¨é€‰æ‹©æ¨¡å¼
2. ç‚¹å‡» "å…¨é€‰" é€‰ä¸­æ‰€æœ‰æ‰¹æ¬¡
3. **æˆ–æ‰‹åŠ¨é€ä¸ªå‹¾é€‰**
4. ç‚¹å‡»å·¥å…·æ  "Delete ğŸ—‘"
5. ç¡®è®¤åˆ é™¤
6. æ‰€æœ‰é€‰ä¸­æ‰¹æ¬¡ä¼šå¹¶è¡Œåˆ é™¤

---

## æ ¸å¿ƒæœºåˆ¶

### 1. äº‹ä»¶é©±åŠ¨æ¶æ„

#### EventEmitter å·¥ä½œæµ

```typescript
// åç«¯æœåŠ¡å‘å°„äº‹ä»¶
class LlmTranslateService extends EventEmitter {
  deleteTasks(taskIds) {
    // 1. å‘å°„å¼€å§‹äº‹ä»¶
    this.emit('task:delete-start', { taskIds, batchId })
    
    // 2. å¼‚æ­¥å¤„ç†
    this.deleteTasksAsync(taskIds, batchId)
  }
  
  private async deleteTasksAsync() {
    try {
      // ... æ•°æ®åº“æ“ä½œ ...
      
      // 3. å‘å°„å®Œæˆäº‹ä»¶
      this.emit('task:deleted', { taskIds, batchId, deletedCount })
    } catch (error) {
      // 4. å‘å°„é”™è¯¯äº‹ä»¶
      this.emit('task:delete-error', { taskIds, batchId, error })
    }
  }
}
```

#### IPC å¹¿æ’­

```typescript
// IPC å¤„ç†å™¨ç›‘å¬æœåŠ¡äº‹ä»¶
service.on('task:deleted', (data) => {
  // å¹¿æ’­ç»™æ‰€æœ‰çª—å£
  BrowserWindow.getAllWindows().forEach(win => {
    win.webContents.send('llm-translate:task-deleted', data)
  })
})
```

#### å‰ç«¯å“åº”

```typescript
// Store ç›‘å¬ IPC äº‹ä»¶
const setupEventListeners = () => {
  electronAPI.value.onTaskDeleted((data) => {
    // ä»åˆ—è¡¨ä¸­ç§»é™¤ä»»åŠ¡
    taskList.value = taskList.value.filter(
      t => !data.taskIds.includes(t.id)
    )
    // æ£€æŸ¥å¹¶è‡ªåŠ¨åˆ é™¤ç©ºæ‰¹æ¬¡
    checkAndDeleteEmptyBatch(data.batchId)
  })
}
```

### 2. æ‰¹æ¬¡è‡ªåŠ¨æ¸…ç†æœºåˆ¶

#### æ£€æµ‹ä¸æ¸…ç†æµç¨‹

```typescript
// æ£€æŸ¥å¹¶è‡ªåŠ¨åˆ é™¤ç©ºæ‰¹æ¬¡
const checkAndDeleteEmptyBatch = async (batchId: string) => {
  const batch = batchList.value.find(b => b.id === batchId)
  
  if (batch && batch.totalTasks === 0) {
    // åç«¯ä¼šè‡ªåŠ¨åˆ é™¤ï¼Œå‰ç«¯ä¹Ÿéœ€è¦æ¸…ç† UI
    batchList.value = batchList.value.filter(b => b.id !== batchId)
    
    if (currentBatch.value?.id === batchId) {
      currentBatch.value = null
      taskList.value = []
    }
  }
}
```

#### å±‚çº§å…³ç³»

```
æ‰¹æ¬¡è¡¨ (Llmtranslate_batches)
  â†“ 1:N
ä»»åŠ¡è¡¨ (Llmtranslate_tasks)
  
ç»Ÿè®¡è¡¨ (Llmtranslate_stats)
  â†“ FK
æ‰¹æ¬¡è¡¨ (Llmtranslate_batches)

åˆ é™¤æµç¨‹ï¼š
1. DELETE tasks WHERE batch_id = X  (è‡ªåŠ¨ç”± ON DELETE CASCADE)
2. DELETE batches WHERE id = X       (æ‰‹åŠ¨æ£€æŸ¥åæ‰§è¡Œ)
3. DELETE stats WHERE batch_id = X   (æ‰‹åŠ¨æ¸…ç†)
```

### 3. çŠ¶æ€åŒæ­¥æœºåˆ¶

#### Pinia å“åº”å¼çŠ¶æ€

```typescript
// Vue3 å“åº”å¼å¼•ç”¨
const selectedBatchIds = ref<Set<string>>(new Set())
const batchSelectMode = ref(false)
const selectedTaskIds = ref<Set<string>>(new Set())

// ä¾¦å¬å™¨è‡ªåŠ¨æ›´æ–° UI
watch(() => store.batchSelectMode, (newVal) => {
  // UI è‡ªåŠ¨æ˜¾ç¤º/éšè—å¤é€‰æ¡†
})

watch(() => store.selectedBatchIds.size, (newSize) => {
  // UI è‡ªåŠ¨æ˜¾ç¤º/éšè—åˆ é™¤æŒ‰é’®
})
```

#### å¤šçª—å£åŒæ­¥

```
Window A åˆ é™¤ä»»åŠ¡
  â†“
IPC è°ƒç”¨ (Main Process)
  â†“
Service å¤„ç† & å‘å°„äº‹ä»¶
  â†“
IPC å¹¿æ’­ç»™ WINDOW A å’Œ WINDOW B
  â†“
Window A Store æ›´æ–° âœ“
Window B Store æ›´æ–° âœ“
  â†“
ä¸¤ä¸ªçª—å£ UI åŒæ—¶åˆ·æ–°
```

---

## é”™è¯¯å¤„ç†

### å¸¸è§é”™è¯¯ä¸è§£å†³

| é”™è¯¯ | åŸå›  | è§£å†³æ–¹æ¡ˆ |
|-----|------|--------|
| `electronAPI.deleteTasks is not a function` | contextBridge æœªæ­£ç¡®æš´éœ² | æ£€æŸ¥ project-preload.ts ä¸­çš„ API å®šä¹‰ |
| `Cannot read property 'on' of undefined` | electronAPI å¯¹è±¡ä¸å­˜åœ¨ | ç¡®ä¿åœ¨ setupEventListeners() å‰åˆå§‹åŒ– |
| ä»»åŠ¡åˆ é™¤åæ‰¹æ¬¡æœªåˆ é™¤ | è‡ªåŠ¨æ¸…ç†æœºåˆ¶æœªè§¦å‘ | æ£€æŸ¥æ‰¹æ¬¡ç»Ÿè®¡æ˜¯å¦æ­£ç¡®æ›´æ–° |
| å¤šçª—å£ä¸åŒæ­¥ | IPC å¹¿æ’­å¤±è´¥ | æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°çš„ IPC æ¶ˆæ¯ |

---

## æ€»ç»“

### å…³é”®ç‰¹æ€§
âœ… **äº‹ä»¶é©±åŠ¨**ï¼šå®æ—¶åé¦ˆï¼Œå¤šçª—å£åŒæ­¥  
âœ… **è‡ªåŠ¨çº§è”**ï¼šåˆ é™¤ä»»åŠ¡è‡ªåŠ¨æ¸…ç†ç©ºæ‰¹æ¬¡  
âœ… **ç±»å‹å®‰å…¨**ï¼šä¸¥æ ¼çš„ TypeScript ç±»å‹è§„èŒƒ  
âœ… **æ¨¡æ€æ¸…æ™°**ï¼šæ˜ç¡®çš„åˆ é™¤ç¡®è®¤æµç¨‹  
âœ… **æ— åç«¯**ï¼šæ‰€æœ‰æ“ä½œæœ¬åœ°å®Œæˆï¼Œæ•ˆç‡é«˜  

### ä»£ç è¡Œæ•°ç»Ÿè®¡

| æ¨¡å— | æ–‡ä»¶ | ä»£ç è¡Œæ•° | è¯´æ˜ |
|-----|------|---------|------|
| Backend Events | events.ts | 138 | äº‹ä»¶ç±»å‹å®šä¹‰ |
| Backend Service | llm-translate-service.ts | 634 | æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ |
| IPC Handler | llm-translate-handlers.ts | 402 | IPC å¤„ç†ä¸å¹¿æ’­ |
| Frontend Store | translate.store.ts | 546 | çŠ¶æ€ç®¡ç†ä¸äº‹ä»¶ç›‘å¬ |
| Frontend Component | TaskManagePage.vue | 845 | UI ç»„ä»¶ä¸äº¤äº’ |
| **æ€»è®¡** | | **2,565** | |

---

**æ–‡æ¡£æ›´æ–°æ—¶é—´**: 2025å¹´10æœˆ20æ—¥ 23:59:59  
**ç‰ˆæœ¬**: v1.0  
**çŠ¶æ€**: âœ… å·²å®Œæˆ
```
