# Vue å¤šä¾‹ç»„ä»¶æ¨¡å¼å®Œæ•´æŒ‡å—

## ğŸ“š ç›®å½•
- [ä»€ä¹ˆæ˜¯å¤šä¾‹ç»„ä»¶æ¨¡å¼](#ä»€ä¹ˆæ˜¯å¤šä¾‹ç»„ä»¶æ¨¡å¼)
- [ä¸ºä»€ä¹ˆéœ€è¦å¤šä¾‹æ¨¡å¼](#ä¸ºä»€ä¹ˆéœ€è¦å¤šä¾‹æ¨¡å¼)
- [æ ¸å¿ƒåŸç†](#æ ¸å¿ƒåŸç†)
- [å®ç°æ­¥éª¤](#å®ç°æ­¥éª¤)
- [å¸¸è§é™·é˜±ä¸è§£å†³æ–¹æ¡ˆ](#å¸¸è§é™·é˜±ä¸è§£å†³æ–¹æ¡ˆ)
- [ç»´æŠ¤æ¸…å•](#ç»´æŠ¤æ¸…å•)
- [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)
- [å®æˆ˜æ¡ˆä¾‹](#å®æˆ˜æ¡ˆä¾‹)

---

## ä»€ä¹ˆæ˜¯å¤šä¾‹ç»„ä»¶æ¨¡å¼

**å¤šä¾‹ç»„ä»¶æ¨¡å¼**ï¼ˆMultiple Instance Patternï¼‰æ˜¯æŒ‡åŒä¸€ä¸ªç»„ä»¶ç±»å‹å¯ä»¥æœ‰å¤šä¸ªç‹¬ç«‹çš„å®ä¾‹åŒæ—¶å­˜åœ¨ï¼Œæ¯ä¸ªå®ä¾‹éƒ½ç»´æŠ¤è‡ªå·±ç‹¬ç«‹çš„çŠ¶æ€å’Œç”Ÿå‘½å‘¨æœŸã€‚

### å…¸å‹åœºæ™¯
- ğŸ“„ **å¤šæ ‡ç­¾é¡µç¼–è¾‘å™¨**ï¼šæ¯ä¸ªæ ‡ç­¾é¡µéƒ½æ˜¯ç‹¬ç«‹çš„Markdownç¼–è¾‘å™¨
- ğŸ” **å¤šæœç´¢é¢æ¿**ï¼šæ¯ä¸ªæœç´¢æ ‡ç­¾é¡µç»´æŠ¤è‡ªå·±çš„æœç´¢å†å²å’Œç»“æœ
- ğŸ“Š **å¤šå›¾è¡¨å®ä¾‹**ï¼šåŒä¸€ä¸ªå›¾è¡¨ç»„ä»¶çš„å¤šä¸ªå®ä¾‹ï¼Œå±•ç¤ºä¸åŒæ•°æ®
- ğŸ¬ **å¤šè§†é¢‘æ’­æ”¾å™¨**ï¼šæ¯ä¸ªæ’­æ”¾å™¨ç‹¬ç«‹æ’­æ”¾ã€æš‚åœã€æ§åˆ¶

---

## ä¸ºä»€ä¹ˆéœ€è¦å¤šä¾‹æ¨¡å¼

### âŒ ä¸ä½¿ç”¨å¤šä¾‹æ¨¡å¼çš„é—®é¢˜

```vue
<!-- é”™è¯¯ç¤ºä¾‹ï¼šå¤šä¸ªæ ‡ç­¾é¡µå…±äº«çŠ¶æ€ -->
<SearchPanel v-if="activeTab === 'search-1'" />
<SearchPanel v-if="activeTab === 'search-2'" />
```

**é—®é¢˜**ï¼š
- âŒ Vueä¼šå¤ç”¨ç»„ä»¶å®ä¾‹
- âŒ åˆ‡æ¢æ ‡ç­¾é¡µæ—¶ï¼ŒçŠ¶æ€ä¼šæ··ä¹±
- âŒ ç¬¬äºŒä¸ªæ ‡ç­¾é¡µä¼šç»§æ‰¿ç¬¬ä¸€ä¸ªçš„çŠ¶æ€

### âœ… ä½¿ç”¨å¤šä¾‹æ¨¡å¼çš„ä¼˜åŠ¿

```vue
<!-- æ­£ç¡®ç¤ºä¾‹ï¼šæ¯ä¸ªæ ‡ç­¾é¡µç‹¬ç«‹å®ä¾‹ -->
<SearchPanel 
  v-if="activeTab === 'search-1'" 
  :key="'search-1'"
  :tab-id="'search-1'"
/>
<SearchPanel 
  v-if="activeTab === 'search-2'" 
  :key="'search-2'"
  :tab-id="'search-2'"
/>
```

**ä¼˜åŠ¿**ï¼š
- âœ… æ¯ä¸ªå®ä¾‹å®Œå…¨ç‹¬ç«‹
- âœ… çŠ¶æ€ä¸ä¼šç›¸äº’å½±å“
- âœ… ç”Ÿå‘½å‘¨æœŸæ¸…æ™°å¯æ§
- âœ… æ˜“äºè°ƒè¯•å’Œç»´æŠ¤

---

## æ ¸å¿ƒåŸç†

### 1. Vueçš„keyæœºåˆ¶

Vueä½¿ç”¨`key`å±æ€§æ¥æ ‡è¯†æ¯ä¸ªç»„ä»¶çš„å”¯ä¸€æ€§ï¼š

```vue
<Component :key="uniqueId" />
```

**è§„åˆ™**ï¼š
- ç›¸åŒkey â†’ Vueå¤ç”¨ç»„ä»¶å®ä¾‹
- ä¸åŒkey â†’ Vueåˆ›å»ºæ–°çš„ç»„ä»¶å®ä¾‹

### 2. ç”Ÿå‘½å‘¨æœŸ

```
åˆ›å»ºå®ä¾‹A (key="a")
  â†“
mounted A
  â†“
åˆ‡æ¢åˆ°å®ä¾‹B (key="b")
  â†“
unmounted A â†’ mounted B
  â†“
å†åˆ‡æ¢å›A (key="a")
  â†“
mounted A (é‡æ–°åˆ›å»º)
```

### 3. çŠ¶æ€æŒä¹…åŒ–

ç”±äºç»„ä»¶ä¼šè¢«é”€æ¯å’Œé‡å»ºï¼Œéœ€è¦åœ¨å¤–éƒ¨å­˜å‚¨çŠ¶æ€ï¼š

```typescript
// Storeå±‚ç»´æŠ¤å¤šå®ä¾‹çŠ¶æ€
const instances = new Map<string, InstanceState>()

// ç»„ä»¶æŒ‚è½½æ—¶æ¢å¤
onMounted(() => {
  const state = store.initInstance(tabId)
  // æ¢å¤çŠ¶æ€...
})

// ç»„ä»¶å¸è½½æ—¶ä¿å­˜
onUnmounted(() => {
  store.updateInstance(tabId, currentState)
})
```

---

## å®ç°æ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šç»„ä»¶å±‚ - æ·»åŠ å”¯ä¸€æ ‡è¯†

```vue
<!-- PaneContent.vue -->
<template>
  <SearchPanel
    v-if="activeTabId && tabType === 'search'"
    :key="`search-${activeTabId}`"
    :tab-id="activeTabId"
  />
</template>
```

**å…³é”®ç‚¹**ï¼š
- `:key`ï¼šç¡®ä¿Vueåˆ›å»ºç‹¬ç«‹å®ä¾‹
- `:tab-id`ï¼šç»„ä»¶å†…éƒ¨ç”¨äºåŒºåˆ†çŠ¶æ€

### ç¬¬äºŒæ­¥ï¼šStoreå±‚ - å¤šå®ä¾‹çŠ¶æ€ç®¡ç†

```typescript
// searchPanel.store.ts
import { defineStore } from 'pinia'
import { ref } from 'vue'

interface InstanceState {
  tabId: string
  searchQuery: string
  results: any[]
  // å…¶ä»–çŠ¶æ€...
}

export const useSearchPanelStore = defineStore('searchPanel', () => {
  // ä½¿ç”¨Mapå­˜å‚¨æ¯ä¸ªå®ä¾‹çš„çŠ¶æ€
  const instances = ref<Map<string, InstanceState>>(new Map())
  
  /**
   * åˆå§‹åŒ–å®ä¾‹çŠ¶æ€
   */
  const initInstance = (tabId: string): InstanceState => {
    if (instances.value.has(tabId)) {
      return instances.value.get(tabId)!
    }
    
    const newInstance: InstanceState = {
      tabId,
      searchQuery: '',
      results: []
    }
    
    instances.value.set(tabId, newInstance)
    return newInstance
  }
  
  /**
   * æ›´æ–°å®ä¾‹çŠ¶æ€
   */
  const updateInstance = (
    tabId: string, 
    updates: Partial<InstanceState>
  ): void => {
    const instance = instances.value.get(tabId)
    if (instance) {
      Object.assign(instance, updates)
    }
  }
  
  /**
   * ç§»é™¤å®ä¾‹çŠ¶æ€
   */
  const removeInstance = (tabId: string): void => {
    instances.value.delete(tabId)
  }
  
  return {
    instances,
    initInstance,
    updateInstance,
    removeInstance
  }
})
```

### ç¬¬ä¸‰æ­¥ï¼šç»„ä»¶å±‚ - çŠ¶æ€åŒæ­¥

```vue
<script setup lang="ts">
import { ref, onMounted, onUnmounted } from 'vue'
import { useSearchPanelStore } from '@stores/searchPanel'

interface Props {
  tabId: string
}

const props = defineProps<Props>()
const store = useSearchPanelStore()

// ç»„ä»¶å†…éƒ¨çŠ¶æ€
const searchQuery = ref('')
const results = ref([])

// æŒ‚è½½æ—¶æ¢å¤çŠ¶æ€
onMounted(() => {
  const state = store.initInstance(props.tabId)
  searchQuery.value = state.searchQuery
  results.value = state.results
  
  console.log(`[Search ${props.tabId}] Component mounted`)
})

// å¸è½½æ—¶ä¿å­˜çŠ¶æ€
onUnmounted(() => {
  store.updateInstance(props.tabId, {
    searchQuery: searchQuery.value,
    results: results.value
  })
  
  console.log(`[Search ${props.tabId}] Component unmounted, state saved`)
})

// çŠ¶æ€å˜åŒ–æ—¶åŒæ­¥åˆ°store
const handleSearch = (query: string) => {
  searchQuery.value = query
  // æ‰§è¡Œæœç´¢...
  
  // åŒæ­¥åˆ°store
  store.updateInstance(props.tabId, {
    searchQuery: query,
    results: results.value
  })
}
</script>
```

### ç¬¬å››æ­¥ï¼šæ¸…ç†æœºåˆ¶

```typescript
// markdown.store.ts (æ ‡ç­¾é¡µç®¡ç†å™¨)
const closeTab = (tabId: string) => {
  // 1. ç§»é™¤æ ‡ç­¾é¡µ
  tabs.value.delete(tabId)
  
  // 2. æ¸…ç†ç›¸å…³ç»„ä»¶çš„çŠ¶æ€
  if (tabId.startsWith('search-')) {
    searchPanelStore.removeInstance(tabId)
  }
  
  // 3. æ¸…ç†èµ„æºï¼ˆå¦‚BrowserViewï¼‰
  if (searchScraperInstances.has(tabId)) {
    SearchAndScraperService.destroyView(tabId)
    searchScraperInstances.delete(tabId)
  }
}
```

---

## å¸¸è§é™·é˜±ä¸è§£å†³æ–¹æ¡ˆ

### é™·é˜±1ï¼šå¿˜è®°æ·»åŠ key

**é—®é¢˜**ï¼š
```vue
<!-- âŒ é”™è¯¯ï¼šç¼ºå°‘key -->
<SearchPanel 
  v-if="activeTab === 'search-1'"
  :tab-id="'search-1'"
/>
<SearchPanel 
  v-if="activeTab === 'search-2'"
  :tab-id="'search-2'"
/>
```

**ç°è±¡**ï¼šä¸¤ä¸ªæ ‡ç­¾é¡µå…±äº«åŒä¸€ä¸ªç»„ä»¶å®ä¾‹ï¼ŒçŠ¶æ€æ··ä¹±

**è§£å†³æ–¹æ¡ˆ**ï¼š
```vue
<!-- âœ… æ­£ç¡®ï¼šæ·»åŠ å”¯ä¸€key -->
<SearchPanel 
  v-if="activeTab === 'search-1'"
  :key="'search-1'"
  :tab-id="'search-1'"
/>
```

### é™·é˜±2ï¼škeyä¸å”¯ä¸€

**é—®é¢˜**ï¼š
```vue
<!-- âŒ é”™è¯¯ï¼šå¤šä¸ªåˆ†æ”¯ä½¿ç”¨ç›¸åŒkey -->
<ComponentA v-if="type === 'a'" :key="tabId" />
<ComponentB v-else-if="type === 'b'" :key="tabId" />
```

**Linté”™è¯¯**ï¼š
```
v-if/else branches must use unique keys
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```vue
<!-- âœ… æ­£ç¡®ï¼šç»„åˆtypeå’Œid -->
<ComponentA v-if="type === 'a'" :key="`a-${tabId}`" />
<ComponentB v-else-if="type === 'b'" :key="`b-${tabId}`" />
```

### é™·é˜±3ï¼šå­ç»„ä»¶çŠ¶æ€ä¸åŒæ­¥

**é—®é¢˜**ï¼š
```vue
<!-- SearchBox.vue -->
<script setup>
// âŒ é”™è¯¯ï¼šåˆ›å»ºç‹¬ç«‹çš„refï¼Œä¸åŒæ­¥props
const searchQuery = ref('')
</script>
```

**ç°è±¡**ï¼šçˆ¶ç»„ä»¶åˆ‡æ¢æ ‡ç­¾é¡µæ—¶ï¼ŒSearchBoxæ˜¾ç¤ºæ—§å€¼

**è§£å†³æ–¹æ¡ˆ**ï¼š
```vue
<!-- âœ… æ­£ç¡®ï¼šä½¿ç”¨computedä¿æŒåŒæ­¥ -->
<script setup>
const searchQuery = computed({
  get: () => props.modelValue,
  set: (value) => emit('update:modelValue', value)
})
</script>
```

### é™·é˜±4ï¼šå¿˜è®°æ¸…ç†èµ„æº

**é—®é¢˜**ï¼š
```typescript
// âŒ é”™è¯¯ï¼šåªåˆ›å»ºï¼Œä¸æ¸…ç†
onMounted(() => {
  BrowserViewService.create(props.tabId)
})
// ç¼ºå°‘onUnmountedæ¸…ç†
```

**ç°è±¡**ï¼šå†…å­˜æ³„æ¼ï¼Œèµ„æºå ç”¨æŒç»­å¢é•¿

**è§£å†³æ–¹æ¡ˆ**ï¼š
```typescript
// âœ… æ­£ç¡®ï¼šæˆå¯¹çš„åˆ›å»ºå’Œæ¸…ç†
let resizeObserver: ResizeObserver | null = null

onMounted(() => {
  resizeObserver = new ResizeObserver(() => {})
  resizeObserver.observe(element)
})

onUnmounted(() => {
  if (resizeObserver) {
    resizeObserver.disconnect()
    resizeObserver = null
  }
})
```

### é™·é˜±5ï¼šçŠ¶æ€æœªæŒä¹…åŒ–

**é—®é¢˜**ï¼š
```typescript
// âŒ é”™è¯¯ï¼šçŠ¶æ€åªåœ¨ç»„ä»¶å†…éƒ¨
const searchQuery = ref('')
// ç»„ä»¶é”€æ¯åï¼ŒçŠ¶æ€ä¸¢å¤±
```

**ç°è±¡**ï¼šåˆ‡æ¢å›æ ‡ç­¾é¡µæ—¶ï¼Œä¹‹å‰çš„æœç´¢å†…å®¹æ¶ˆå¤±

**è§£å†³æ–¹æ¡ˆ**ï¼š
```typescript
// âœ… æ­£ç¡®ï¼šåœ¨onUnmountedæ—¶ä¿å­˜
onUnmounted(() => {
  store.updateInstance(props.tabId, {
    searchQuery: searchQuery.value,
    results: results.value
  })
})
```

---

## ç»´æŠ¤æ¸…å•

### âœ… ç»„ä»¶å±‚æ£€æŸ¥æ¸…å•

- [ ] **æ‰€æœ‰åŠ¨æ€æ¸²æŸ“çš„ç»„ä»¶éƒ½æ·»åŠ äº†`:key`**
  ```vue
  <Component :key="`${type}-${id}`" />
  ```

- [ ] **PropsåŒ…å«å”¯ä¸€æ ‡è¯†ç¬¦**
  ```vue
  <Component :tab-id="uniqueId" />
  ```

- [ ] **ç”Ÿå‘½å‘¨æœŸé’©å­æˆå¯¹å‡ºç°**
  ```typescript
  onMounted(() => { /* åˆå§‹åŒ– */ })
  onUnmounted(() => { /* æ¸…ç† */ })
  ```

- [ ] **çŠ¶æ€åœ¨æŒ‚è½½æ—¶æ¢å¤**
  ```typescript
  const state = store.initInstance(props.tabId)
  localState.value = state.xxx
  ```

- [ ] **çŠ¶æ€åœ¨å¸è½½æ—¶ä¿å­˜**
  ```typescript
  store.updateInstance(props.tabId, {
    xxx: localState.value
  })
  ```

- [ ] **èµ„æºæ­£ç¡®æ¸…ç†**
  ```typescript
  // ResizeObserver, EventListener, BrowserViewç­‰
  ```

### âœ… Storeå±‚æ£€æŸ¥æ¸…å•

- [ ] **ä½¿ç”¨Mapå­˜å‚¨å¤šå®ä¾‹çŠ¶æ€**
  ```typescript
  const instances = ref<Map<string, State>>(new Map())
  ```

- [ ] **æä¾›åˆå§‹åŒ–æ–¹æ³•**
  ```typescript
  const initInstance = (id: string) => { /* ... */ }
  ```

- [ ] **æä¾›æ›´æ–°æ–¹æ³•**
  ```typescript
  const updateInstance = (id: string, updates: Partial<State>) => {}
  ```

- [ ] **æä¾›ç§»é™¤æ–¹æ³•**
  ```typescript
  const removeInstance = (id: string) => { /* ... */ }
  ```

- [ ] **æ·»åŠ è°ƒè¯•æ—¥å¿—**
  ```typescript
  console.log(`[Store] Instance initialized: ${id}`)
  ```

### âœ… è°ƒè¯•æ£€æŸ¥æ¸…å•

- [ ] **æ¯ä¸ªå®ä¾‹æŒ‚è½½æ—¶æ‰“å°æ—¥å¿—**
  ```typescript
  console.log(`[Component ${props.tabId}] Mounted`)
  ```

- [ ] **æ¯ä¸ªå®ä¾‹å¸è½½æ—¶æ‰“å°æ—¥å¿—**
  ```typescript
  console.log(`[Component ${props.tabId}] Unmounted`)
  ```

- [ ] **å…³é”®çŠ¶æ€å˜åŒ–æ‰“å°æ—¥å¿—**
  ```typescript
  console.log(`[Component ${props.tabId}] State updated:`, state)
  ```

- [ ] **å¯ä»¥é€šè¿‡æ—¥å¿—ç¡®è®¤å®ä¾‹çš„åˆ›å»ºå’Œé”€æ¯é¡ºåº**

---

## æœ€ä½³å®è·µ

### 1. å‘½åçº¦å®š

```typescript
// Storeæ–‡ä»¶å‘½å
searchPanel.store.ts
searchPanel.types.ts

// å®ä¾‹IDå‘½å
`${type}-${timestamp}` // search-and-scraper-1761285187072
`${type}-${uuid}` // search-panel-a1b2c3d4
```

### 2. ç±»å‹å®‰å…¨

```typescript
// å®šä¹‰æ¸…æ™°çš„çŠ¶æ€æ¥å£
interface SearchPanelState {
  tabId: string
  searchQuery: string
  results: SearchResult[]
  isLoading: boolean
  error: string | null
}

// Storeæ–¹æ³•ä½¿ç”¨å¼ºç±»å‹
const updateInstance = (
  tabId: string, 
  updates: Partial<Omit<SearchPanelState, 'tabId'>>
): void => {
  // å®ç°...
}
```

### 3. çŠ¶æ€æœ€å°åŒ–

åªæŒä¹…åŒ–å¿…è¦çš„çŠ¶æ€ï¼š

```typescript
// âœ… å¥½çš„è®¾è®¡ï¼šåªä¿å­˜å¿…è¦æ•°æ®
interface InstanceState {
  searchQuery: string    // éœ€è¦ä¿å­˜
  currentUrl: string     // éœ€è¦ä¿å­˜
  isViewCreated: boolean // éœ€è¦ä¿å­˜
}

// âŒ ä¸å¥½çš„è®¾è®¡ï¼šä¿å­˜æ´¾ç”ŸçŠ¶æ€
interface InstanceState {
  searchQuery: string
  searchQueryLength: number  // å¯ä»¥ä»searchQueryè®¡ç®—
  hasQuery: boolean          // å¯ä»¥ä»searchQueryè®¡ç®—
}
```

### 4. æ¸…ç†ç­–ç•¥

```typescript
// ç«‹å³æ¸…ç† vs å»¶è¿Ÿæ¸…ç†
const removeInstance = (tabId: string, immediate = false) => {
  if (immediate) {
    // ç«‹å³åˆ é™¤çŠ¶æ€
    instances.value.delete(tabId)
  } else {
    // å»¶è¿Ÿåˆ é™¤ï¼ˆç»™æ’¤é”€æœºä¼šï¼‰
    setTimeout(() => {
      instances.value.delete(tabId)
    }, 5000)
  }
}
```

### 5. æ€§èƒ½ä¼˜åŒ–

```typescript
// é¿å…é¢‘ç¹æ›´æ–°store
import { debounce } from 'lodash-es'

const syncToStore = debounce((state) => {
  store.updateInstance(props.tabId, state)
}, 500)

watch(searchQuery, (newValue) => {
  syncToStore({ searchQuery: newValue })
})
```

---

## å®æˆ˜æ¡ˆä¾‹

### æ¡ˆä¾‹1ï¼šSearchAndScraperå¤šæ ‡ç­¾é¡µ

**éœ€æ±‚**ï¼šç”¨æˆ·å¯ä»¥æ‰“å¼€å¤šä¸ªæœç´¢æ ‡ç­¾é¡µï¼Œæ¯ä¸ªæ ‡ç­¾é¡µç‹¬ç«‹æœç´¢å’Œæµè§ˆ

**å®ç°**ï¼š

```vue
<!-- PaneContent.vue -->
<SearchAndScraperPanel
  v-else-if="localActiveTabId && activeTabType === 'search-and-scraper'"
  :key="`search-and-scraper-${localActiveTabId}`"
  :tab-id="localActiveTabId"
/>
```

```typescript
// searchAndScraper.store.ts
export const useSearchAndScraperStore = defineStore('searchAndScraper', () => {
  const instances = ref<Map<string, SearchInstanceState>>(new Map())
  
  const initInstance = (tabId: string): SearchInstanceState => {
    if (instances.value.has(tabId)) {
      return instances.value.get(tabId)!
    }
    
    const newInstance: SearchInstanceState = {
      tabId,
      searchQuery: '',
      currentUrl: '',
      isViewCreated: false,
      isBrowserViewVisible: false
    }
    
    instances.value.set(tabId, newInstance)
    return newInstance
  }
  
  return { instances, initInstance, updateInstance, removeInstance }
})
```

```vue
<!-- SearchAndScraperPanel.vue -->
<script setup lang="ts">
const props = defineProps<{ tabId: string }>()
const store = useSearchAndScraperStore()

const searchQuery = ref('')
const isBrowserViewVisible = ref(false)

onMounted(() => {
  // æ¢å¤çŠ¶æ€
  const state = store.initInstance(props.tabId)
  searchQuery.value = state.searchQuery
  isBrowserViewVisible.value = state.isBrowserViewVisible
  
  console.log(`[SearchAndScraper ${props.tabId}] Mounted`)
})

onUnmounted(() => {
  // ä¿å­˜çŠ¶æ€
  store.updateInstance(props.tabId, {
    searchQuery: searchQuery.value,
    isBrowserViewVisible: isBrowserViewVisible.value
  })
  
  console.log(`[SearchAndScraper ${props.tabId}] Unmounted`)
})
</script>
```

**æ•ˆæœéªŒè¯**ï¼š

```javascript
// æœŸæœ›çš„æ—¥å¿—è¾“å‡º
[Markdown] SearchAndScraper tab created: search-and-scraper-111
[SearchAndScraper search-and-scraper-111] Mounted âœ…

[Markdown] SearchAndScraper tab created: search-and-scraper-222
[SearchAndScraper search-and-scraper-222] Mounted âœ…

// åˆ‡æ¢æ ‡ç­¾é¡µ
[SearchAndScraper search-and-scraper-222] Unmounted
[SearchAndScraper search-and-scraper-111] Mounted âœ…

// å…³é—­æ ‡ç­¾é¡µ
[SearchAndScraper search-and-scraper-111] Unmounted
[SearchAndScraper Store] Instance removed: search-and-scraper-111 âœ…
```

---

## æ€»ç»“

### æ ¸å¿ƒè¦ç‚¹

1. **`:key`æ˜¯å…³é”®**ï¼šç¡®ä¿æ¯ä¸ªå®ä¾‹çš„å”¯ä¸€æ€§
2. **Storeå±‚ç®¡ç†çŠ¶æ€**ï¼šä½¿ç”¨Mapå­˜å‚¨å¤šå®ä¾‹çŠ¶æ€
3. **ç”Ÿå‘½å‘¨æœŸå¯¹ç§°**ï¼šåˆ›å»ºå’Œæ¸…ç†æˆå¯¹å‡ºç°
4. **çŠ¶æ€æŒä¹…åŒ–**ï¼šåœ¨æŒ‚è½½æ—¶æ¢å¤ï¼Œå¸è½½æ—¶ä¿å­˜
5. **ç±»å‹å®‰å…¨**ï¼šä½¿ç”¨TypeScriptç¡®ä¿ç±»å‹æ­£ç¡®

### å†³ç­–æ ‘

```
éœ€è¦å¤šä¸ªåŒç±»å‹ç»„ä»¶? 
  â”œâ”€ æ˜¯ â†’ æ˜¯å¦éœ€è¦ç‹¬ç«‹çŠ¶æ€?
  â”‚      â”œâ”€ æ˜¯ â†’ ä½¿ç”¨å¤šä¾‹æ¨¡å¼ âœ…
  â”‚      â”‚      â”œâ”€ æ·»åŠ  :key
  â”‚      â”‚      â”œâ”€ Storeç®¡ç†çŠ¶æ€
  â”‚      â”‚      â””â”€ ç”Ÿå‘½å‘¨æœŸåŒæ­¥
  â”‚      â””â”€ å¦ â†’ ä½¿ç”¨å•ä¾‹æ¨¡å¼
  â””â”€ å¦ â†’ å¸¸è§„ç»„ä»¶
```

### å‚è€ƒæ–‡æ¡£

- [Vueå®˜æ–¹æ–‡æ¡£ - keyç‰¹æ®Šattribute](https://cn.vuejs.org/api/built-in-special-attributes.html#key)
- [Piniaå®˜æ–¹æ–‡æ¡£ - State](https://pinia.vuejs.org/core-concepts/state.html)
- [Vueç”Ÿå‘½å‘¨æœŸå›¾ç¤º](https://cn.vuejs.org/guide/essentials/lifecycle.html)

---

**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv1.0  
**æœ€åæ›´æ–°**ï¼š2025-01-24  
**ç»´æŠ¤è€…**ï¼šå¼€å‘å›¢é˜Ÿ

