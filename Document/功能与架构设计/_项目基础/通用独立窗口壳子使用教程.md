# StandaloneWindowShell - ç‹¬ç«‹çª—å£å£³å­

## ğŸ“ æ¦‚è¿°

`StandaloneWindowShell` æ˜¯ä¸€ä¸ªé€šç”¨çš„**çº¯å‡€ç‹¬ç«‹çª—å£å£³å­**ç»„ä»¶ï¼Œä¸ºéœ€è¦ç‹¬ç«‹çª—å£çš„ä¸šåŠ¡åœºæ™¯æä¾›ç»Ÿä¸€çš„å¤–å£³ã€‚

## âœ¨ ç‰¹ç‚¹

- âœ… **å®Œå…¨æ— çŠ¶æ€**ï¼šä¸æŒæœ‰ä»»ä½•ä¸šåŠ¡é€»è¾‘
- âœ… **å®Œå…¨ç‹¬ç«‹**ï¼šæ¯ä¸ªä½¿ç”¨å®ƒçš„ä¸šåŠ¡çª—å£çŠ¶æ€å®Œå…¨ç‹¬ç«‹
- âœ… **ç»Ÿä¸€æ ‡é¢˜æ **ï¼šæä¾› Nimbria æ ‡å‡†æ ‡é¢˜æ ï¼ˆæœ€å°åŒ–ã€æœ€å¤§åŒ–ã€å…³é—­ï¼‰
- âœ… **å¯æ‹–æ‹½å¤–å£³**ï¼šæ”¯æŒçª—å£æ‹–æ‹½
- âœ… **çº¯å‡€å†…å®¹æ§½**ï¼šä¸šåŠ¡ç»„ä»¶å®Œå…¨æ§åˆ¶å†…å®¹åŒºåŸŸ

## ğŸ¯ ä½¿ç”¨åœºæ™¯

é€‚ç”¨äºéœ€è¦åˆ›å»ºç‹¬ç«‹Electronçª—å£çš„åœºæ™¯ï¼š

- æ•°æ®å¯è§†åŒ–çª—å£ï¼ˆå¦‚ Sigma.js å›¾è¡¨ï¼‰
- ç‹¬ç«‹çš„å·¥å…·é¢æ¿
- é¢„è§ˆçª—å£
- ä»»ä½•éœ€è¦ç‹¬ç«‹çª—å£çš„ä¸šåŠ¡åœºæ™¯

## ğŸ“– ä½¿ç”¨ç¤ºä¾‹

### 1. åˆ›å»ºè·¯ç”±

```typescript
// router/routes.ts
{
  path: '/my-window',
  name: 'my-window',
  component: () => import('components/MyBusinessWindow.vue'),
  meta: {
    title: 'æˆ‘çš„çª—å£',
    requiresAuth: false
  }
}
```

### 2. åˆ›å»ºä¸šåŠ¡ç»„ä»¶

```vue
<!-- components/MyBusinessWindow.vue -->
<template>
  <StandaloneWindowShell title="æˆ‘çš„ä¸šåŠ¡çª—å£">
    <!-- ä¸šåŠ¡å†…å®¹ï¼šå®Œå…¨ç‹¬ç«‹æ§åˆ¶ -->
    <div class="my-business-content">
      <h1>æˆ‘çš„ä¸šåŠ¡å†…å®¹</h1>
      <!-- ä½ çš„ä¸šåŠ¡é€»è¾‘ -->
    </div>
  </StandaloneWindowShell>
</template>

<script setup lang="ts">
import { ref, onMounted } from 'vue'
import StandaloneWindowShell from '@pages/StandaloneWindowShell.vue'

// ä½ çš„ä¸šåŠ¡é€»è¾‘
const data = ref([])

onMounted(() => {
  // åˆå§‹åŒ–ä½ çš„ä¸šåŠ¡æ•°æ®
})
</script>

<style scoped lang="scss">
.my-business-content {
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  // ä½ çš„æ ·å¼
}
</style>
```

### 3. åˆ›å»ºIPC Handleræ‰“å¼€çª—å£

```typescript
// src-electron/ipc/main-renderer/my-handlers.ts
import { ipcMain, BrowserWindow, app } from 'electron'
import path from 'path'

function resolvePreloadPath(): string {
  const isDev = !!process.env.DEV || !!process.env.DEBUGGING
  if (isDev) {
    return path.join(app.getAppPath(), 'preload', 'project-preload.cjs')
  }
  const preloadFolder = process.env.QUASAR_ELECTRON_PRELOAD_FOLDER || 'electron-preload'
  const preloadExtension = process.env.QUASAR_ELECTRON_PRELOAD_EXTENSION || '.cjs'
  return path.join(app.getAppPath(), preloadFolder, `project-preload${preloadExtension}`)
}

export function registerMyHandlers(): void {
  ipcMain.handle('my:open-window', async (event, request) => {
    try {
      const myWindow = new BrowserWindow({
        width: 1200,
        height: 800,
        title: 'æˆ‘çš„çª—å£',
        titleBarStyle: 'hidden',
        backgroundColor: '#1e1e1e',
        webPreferences: {
          contextIsolation: true,
          nodeIntegration: false,
          preload: resolvePreloadPath()
        },
        parent: BrowserWindow.fromWebContents(event.sender) || undefined
      })

      const params = new URLSearchParams({
        data: encodeURIComponent(JSON.stringify(request.data))
      })

      if (process.env.DEV) {
        await myWindow.loadURL(`${process.env.APP_URL}/#/my-window?${params}`)
      } else {
        await myWindow.loadFile('index.html', {
          hash: `/my-window?${params}`
        })
      }

      return { success: true, windowId: myWindow.id }
    } catch (error) {
      return { success: false, error: { message: (error as Error).message } }
    }
  })
}
```

## ğŸ“‹ Props

| åç§° | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| title | string | 'Nimbria' | çª—å£æ ‡é¢˜ |

## ğŸ¨ æ’æ§½

| åç§° | è¯´æ˜ |
|------|------|
| default | ä¸šåŠ¡å†…å®¹åŒºåŸŸï¼Œå®Œå…¨ç”±ä¸šåŠ¡ç»„ä»¶æ§åˆ¶ |

## ğŸ’¡ æ³¨æ„äº‹é¡¹

1. **çŠ¶æ€ç®¡ç†**ï¼šæ‰€æœ‰ä¸šåŠ¡çŠ¶æ€ç”±ä¸šåŠ¡ç»„ä»¶è‡ªå·±ç®¡ç†ï¼Œä¸è¦ä¾èµ– StandaloneWindowShell
2. **æ ·å¼æ§åˆ¶**ï¼šå†…å®¹åŒºåŸŸçš„æ ·å¼å®Œå…¨ç”±ä¸šåŠ¡ç»„ä»¶æ§åˆ¶
3. **ç”Ÿå‘½å‘¨æœŸ**ï¼šä¸šåŠ¡ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸé’©å­æ­£å¸¸ä½¿ç”¨
4. **å®Œå…¨ç‹¬ç«‹**ï¼šæ¯ä¸ªçª—å£å®ä¾‹å®Œå…¨ç‹¬ç«‹ï¼Œäº’ä¸å½±å“

## ğŸ“¦ å·²æœ‰ä½¿ç”¨ç¤ºä¾‹

- `LinkNodeViewWindow.vue` - é“¾æ¥èŠ‚ç‚¹å¯è§†åŒ–çª—å£

