# Nimbriaé¡¹ç›®ï¼šObsidiané£æ ¼é¡¹ç›®é¡µé›†æˆæ€»ç»“

**ç”Ÿæˆæ—¶é—´**ï¼š2025å¹´10æœˆ6æ—¥  
**é¡¹ç›®é˜¶æ®µ**ï¼šObsidiané£æ ¼Markdownç¼–è¾‘å™¨é›†æˆ  
**å·¥ä½œæ€§è´¨**ï¼šåŸå‹ç³»ç»Ÿè¿ç§»ä¸å¤šçª—å£é›†æˆ

---

## ğŸ“‹ ç›®å½•

1. [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
2. [å·²å®ç°åŠŸèƒ½](#å·²å®ç°åŠŸèƒ½)
3. [æŠ€æœ¯å®ç°ç»†èŠ‚](#æŠ€æœ¯å®ç°ç»†èŠ‚)
4. [é¡¹ç›®è§„èŒƒä¸æ¶æ„](#é¡¹ç›®è§„èŒƒä¸æ¶æ„)
5. [é‡åˆ°çš„é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ](#é‡åˆ°çš„é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ)
6. [ç»éªŒæ€»ç»“](#ç»éªŒæ€»ç»“)
7. [æ ‡å‡†å·¥ä½œæµç¨‹](#æ ‡å‡†å·¥ä½œæµç¨‹)

---

## é¡¹ç›®æ¦‚è¿°

### ğŸ¯ ç›®æ ‡
å°†ç‹¬ç«‹çš„Obsidiané£æ ¼Markdownç¼–è¾‘å™¨åŸå‹ï¼ˆ`Reference-Page/ReferencePage`ï¼‰é›†æˆåˆ°Nimbriaä¸»åº”ç”¨ä¸­ï¼Œä½œä¸ºProjectPageç³»ç»Ÿçš„æ ¸å¿ƒåŠŸèƒ½ï¼Œæ”¯æŒå¤šçª—å£æ¶æ„ä¸‹çš„Markdownæ–‡æ¡£ç¼–è¾‘ä¸ç®¡ç†ã€‚

### ğŸ“¦ æ ¸å¿ƒç‰¹æ€§
- **ä¸‰æ å¸ƒå±€**ï¼šå·¦ä¾§æ–‡ä»¶æ ‘ + ä¸­é—´ç¼–è¾‘å™¨ + å³ä¾§å¤§çº²
- **å¤šæ ‡ç­¾é¡µç®¡ç†**ï¼šæ”¯æŒåŒæ—¶æ‰“å¼€å¤šä¸ªMarkdownæ–‡æ¡£
- **ç¼–è¾‘/é¢„è§ˆæ¨¡å¼åˆ‡æ¢**ï¼šåŸºäºVditorçš„åŒæ¨¡å¼æ”¯æŒ
- **è‡ªå®šä¹‰çª—å£æ§åˆ¶**ï¼šå®ç°è·¨å¹³å°ä¸€è‡´çš„çª—å£æ“ä½œä½“éªŒ

---

## å·²å®ç°åŠŸèƒ½

### 1. å¤šçª—å£ç³»ç»Ÿé›†æˆ âœ…

#### 1.1 é¡¹ç›®çª—å£åˆ›å»º
- **åŠŸèƒ½**ï¼šåœ¨ä¸»çª—å£ç‚¹å‡»é¡¹ç›®å¡ç‰‡åï¼Œåˆ›å»ºç‹¬ç«‹çš„é¡¹ç›®ç¼–è¾‘çª—å£
- **å®ç°ä½ç½®**ï¼š
  - `src-electron/core/app-manager.ts` - çª—å£ç”Ÿå‘½å‘¨æœŸç®¡ç†
  - `src-electron/services/window-service/window-manager.ts` - çª—å£è¿›ç¨‹ç®¡ç†

#### 1.2 ç‹¬ç«‹è·¯ç”±ç³»ç»Ÿ
- **åŠŸèƒ½**ï¼šä¸ºé¡¹ç›®çª—å£é…ç½®ç‹¬ç«‹çš„è·¯ç”±å…¥å£ `/project`
- **å®ç°ä½ç½®**ï¼š
  - `Client/GUI/router/routes.ts` - è·¯ç”±é…ç½®
  - `Client/GUI/Index/ProjectPageSystem.vue` - é¡¹ç›®ç³»ç»Ÿå…¥å£ç»„ä»¶

#### 1.3 è‡ªå®šä¹‰çª—å£æ§åˆ¶æ 
- **åŠŸèƒ½**ï¼šå®ç°Windows/macOSé£æ ¼çš„çª—å£æ§åˆ¶æ 
- **æ§åˆ¶åŠŸèƒ½**ï¼šæœ€å°åŒ–ã€æœ€å¤§åŒ–/è¿˜åŸã€å…³é—­
- **å®ç°ä½ç½®**ï¼š
  - `Client/GUI/layouts/ProjectMainLayout.vue` - çª—å£æ§åˆ¶UI
  - `src-electron/core/app-manager.ts` - IPCçª—å£æ“ä½œå¤„ç†

### 2. ä¸‰æ å¸ƒå±€ç³»ç»Ÿ âœ…

#### 2.1 å“åº”å¼åˆ†éš”é¢æ¿
- **æŠ€æœ¯æ ˆ**ï¼šElement Plus `<el-container>` + è‡ªå®šä¹‰åˆ†éš”å™¨
- **åŠŸèƒ½**ï¼š
  - å·¦å³é¢æ¿å¯æ‹–åŠ¨è°ƒæ•´å®½åº¦
  - å®½åº¦çŠ¶æ€æŒä¹…åŒ–ï¼ˆlocalStorageï¼‰
  - æœ€å°å®½åº¦é™åˆ¶ï¼ˆ150pxï¼‰
- **å®ç°ä½ç½®**ï¼š
  - `Client/GUI/layouts/ProjectMainLayout.vue` - å¸ƒå±€ä¸»ä½“
  - `Client/GUI/layouts/ProjectMainLayout.scss` - Flexboxå¸ƒå±€æ ·å¼

#### 2.2 Shellè®¾è®¡æ¨¡å¼
- **è®¾è®¡ç†å¿µ**ï¼šå·¦å³ä¾§æ å…±äº«åŒä¸€ç»„ä»¶ï¼Œé€šè¿‡propsåŒºåˆ†è¡Œä¸º
- **ç»„ä»¶**ï¼š`Client/GUI/PagesLayout/ProjectPage.Shell.vue`
- **Props**ï¼š`type: 'left' | 'right'`
- **å†…å®¹åˆ†å‘**ï¼š
  - **å·¦ä¾§**ï¼šå¯¼èˆªæ  + æ–‡ä»¶æ ‘
  - **å³ä¾§**ï¼šå¤§çº²é¢æ¿

### 3. Markdownç¼–è¾‘ç³»ç»Ÿ âœ…

#### 3.1 æ–‡ä»¶æ ‘ç®¡ç†
- **åŠŸèƒ½**ï¼š
  - é€’å½’æ¸²æŸ“æ–‡ä»¶å¤¹ç»“æ„
  - æ–‡ä»¶/æ–‡ä»¶å¤¹å±•å¼€æŠ˜å 
  - ç‚¹å‡»æ–‡ä»¶æ‰“å¼€æ ‡ç­¾é¡µ
- **å®ç°ä½ç½®**ï¼š
  - `Client/GUI/components/ProjectPage.Shell/FileTree/FileTreeContent.vue`
  - `Client/stores/projectPage/Markdown/markdown.store.ts`

#### 3.2 å¤šæ ‡ç­¾é¡µç³»ç»Ÿ
- **æŠ€æœ¯æ ˆ**ï¼šElement Plus `<el-tabs>`
- **åŠŸèƒ½**ï¼š
  - åŠ¨æ€æ·»åŠ /å…³é—­æ ‡ç­¾é¡µ
  - æ ‡ç­¾é¡µåˆ‡æ¢
  - æ–‡ä»¶è·¯å¾„é¢åŒ…å±‘å¯¼èˆª
- **å®ç°ä½ç½®**ï¼š
  - `Client/GUI/PagesLayout/ProjectPage.MainPanel.vue`

#### 3.3 Vditorç¼–è¾‘å™¨é›†æˆ
- **ç¼–è¾‘æ¨¡å¼**ï¼š
  - **ç¼–è¾‘æ¨¡å¼**ï¼šæ‰€è§å³æ‰€å¾—ç¼–è¾‘å™¨ï¼ˆ`MarkdownEditor.vue`ï¼‰
  - **é¢„è§ˆæ¨¡å¼**ï¼šåªè¯»æ¸²æŸ“è§†å›¾ï¼ˆ`MarkdownViewer.vue`ï¼‰
- **å®ç°ä½ç½®**ï¼š
  - `Client/GUI/components/ProjectPage.MainPanel/Markdown/MarkdownTab.vue`
  - `Client/GUI/components/ProjectPage.MainPanel/Markdown/MarkdownEditor.vue`
  - `Client/GUI/components/ProjectPage.MainPanel/Markdown/MarkdownViewer.vue`

### 4. æ•°æ®å±‚æ¶æ„ âœ…

#### 4.1 Pinia Storeæ¨¡å—åŒ–
- **æ¨¡å—**ï¼š`stores/projectPage/Markdown/`
- **æ–‡ä»¶ç»“æ„**ï¼š
  ```
  stores/projectPage/
    â”œâ”€â”€ Markdown/
    â”‚   â”œâ”€â”€ index.ts          # æ¨¡å—å¯¼å‡º
    â”‚   â”œâ”€â”€ markdown.store.ts # çŠ¶æ€ç®¡ç†é€»è¾‘
    â”‚   â”œâ”€â”€ markdown.mock.ts  # Mockæ•°æ®
    â”‚   â””â”€â”€ types.ts          # TypeScriptç±»å‹å®šä¹‰
    â””â”€â”€ index.ts              # projectPageæ¨¡å—æ€»å¯¼å‡º
  ```

#### 4.2 Mockæ•°æ®æ”¯æŒ
- **æ•°æ®ç±»å‹**ï¼š
  - `MarkdownFile[]` - æ–‡ä»¶æ ‘æ•°æ®
  - `MarkdownTab[]` - æ‰“å¼€çš„æ ‡ç­¾é¡µåˆ—è¡¨
- **å®ç°ä½ç½®**ï¼š`Client/stores/projectPage/Markdown/markdown.mock.ts`

---

## æŠ€æœ¯å®ç°ç»†èŠ‚

### ä½¿ç”¨çš„æ ¸å¿ƒAPIä¸æ–¹æ³•

#### Electron IPCé€šä¿¡

##### 1. çª—å£æ“ä½œIPCï¼ˆMain Processï¼‰
**æ–‡ä»¶**ï¼š`src-electron/core/app-manager.ts`

```typescript
// çª—å£æœ€å°åŒ–
ipcMain.handle('window:minimize', async (event, request: IPCRequest<'window:minimize'>) => {
  return this.handleWindowOperationFromEvent(event, 'minimize', request)
})

// çª—å£æœ€å¤§åŒ–
ipcMain.handle('window:maximize', async (event, request: IPCRequest<'window:maximize'>) => {
  return this.handleWindowOperationFromEvent(event, 'maximize', request)
})

// çª—å£å–æ¶ˆæœ€å¤§åŒ–
ipcMain.handle('window:unmaximize', async (event, request: IPCRequest<'window:unmaximize'>) => {
  return this.handleWindowOperationFromEvent(event, 'unmaximize', request)
})

// çª—å£å…³é—­
ipcMain.handle('window:close', async (event, request: IPCRequest<'window:close'>) => {
  return this.handleWindowOperationFromEvent(event, 'close', request)
})

// æŸ¥è¯¢çª—å£æ˜¯å¦æœ€å¤§åŒ–
ipcMain.handle('window:is-maximized', async (event, request: IPCRequest<'window:is-maximized'>) => {
  return this.handleWindowIsMaximizedFromEvent(event, request)
})
```

**å…³é”®æ”¹è¿›**ï¼šä½¿ç”¨ `event.sender` è¯†åˆ«è°ƒç”¨çª—å£
```typescript
private resolveWindowProcessFromEvent(
  event: Electron.IpcMainInvokeEvent,
  windowId?: string
): WindowProcess | null {
  if (!this.windowManager) return null
  
  // ä¼˜å…ˆä½¿ç”¨æä¾›çš„windowId
  if (windowId) {
    return this.windowManager.getProcess(windowId)
  }
  
  // ğŸ”‘ å…³é”®ï¼šé€šè¿‡event.senderè·å–è°ƒç”¨çª—å£
  const senderWindow = BrowserWindow.fromWebContents(event.sender)
  if (!senderWindow) {
    return null
  }
  
  return this.windowManager.getProcessByWindowId(senderWindow.id)
}
```

##### 2. çª—å£æ“ä½œIPCï¼ˆRenderer Processï¼‰
**æ–‡ä»¶**ï¼š`Client/GUI/layouts/ProjectMainLayout.vue`

```typescript
// æœ€å°åŒ–çª—å£
async function minimizeWindow() {
  try {
    await (window as any).nimbria.window.minimize()
  } catch (error) {
    console.error('Failed to minimize window:', error)
  }
}

// åˆ‡æ¢æœ€å¤§åŒ–çŠ¶æ€
async function toggleMaximize() {
  try {
    if (isMaximized.value) {
      await (window as any).nimbria.window.unmaximize()
      isMaximized.value = false
    } else {
      await (window as any).nimbria.window.maximize()
      isMaximized.value = true
    }
  } catch (error) {
    console.error('Failed to toggle maximize:', error)
  }
}

// å…³é—­çª—å£
async function closeWindow() {
  try {
    await (window as any).nimbria.window.close()
  } catch (error) {
    console.error('Failed to close window:', error)
  }
}
```

**ç±»å‹æ–­è¨€ç­–ç•¥**ï¼šä½¿ç”¨ `as any` ä¸´æ—¶ç»•è¿‡TypeScriptç±»å‹æ£€æŸ¥

##### 3. çª—å£URLåŠ è½½
**æ–‡ä»¶**ï¼š`src-electron/core/app-manager.ts`

```typescript
private loadProjectWindow(windowProcess: ProjectWindowProcess) {
  // å¼€å‘ç¯å¢ƒï¼šåŠ è½½å¸¦hashçš„å¼€å‘æœåŠ¡å™¨URL
  if (isDevEnvironment) {
    const baseUrl = process.env.APP_URL as string
    const projectUrl = `${baseUrl}#/project`
    void windowProcess.window.loadURL(projectUrl)
    windowProcess.window.webContents.openDevTools()
    return
  }
  
  // ç”Ÿäº§ç¯å¢ƒï¼šåŠ è½½æ‰“åŒ…åçš„index.html
  void windowProcess.window.loadFile(
    path.join(__dirname, '../../index.html'),
    { hash: '/project' }
  )
}
```

#### Vue Routerå‘½åè§†å›¾

**æ–‡ä»¶**ï¼š`Client/GUI/router/routes.ts`

```typescript
{
  path: '/project',
  component: () => import('@index/ProjectPageSystem.vue'),
  children: [
    {
      path: '',
      component: () => import('@layouts/ProjectMainLayout.vue'),
      children: [
        {
          path: '',
          name: 'project-workspace',
          components: {
            left: () => import('@pages/ProjectPage.Shell.vue'),
            center: () => import('@pages/ProjectPage.MainPanel.vue'),
            right: () => import('@pages/ProjectPage.Shell.vue')
          },
          props: {
            left: { type: 'left' },
            center: {},
            right: { type: 'right' }
          }
        }
      ]
    }
  ]
}
```

**å…³é”®ç‰¹æ€§**ï¼š
- ä½¿ç”¨ `components`ï¼ˆå¤æ•°ï¼‰å®šä¹‰å¤šä¸ªå‘½åè§†å›¾
- é€šè¿‡ `props` ä¸ºç›¸åŒç»„ä»¶ä¼ é€’ä¸åŒçš„é…ç½®

#### PiniaçŠ¶æ€ç®¡ç†

**æ–‡ä»¶**ï¼š`Client/stores/projectPage/Markdown/markdown.store.ts`

```typescript
export const useMarkdownStore = defineStore('projectPage-markdown', () => {
  // çŠ¶æ€å®šä¹‰
  const fileTree = ref<MarkdownFile[]>([])
  const openTabs = ref<MarkdownTab[]>([])
  const activeTabId = ref<string | null>(null)
  
  // æ“ä½œæ–¹æ³•
  function openFile(file: MarkdownFile) {
    // æ£€æŸ¥æ˜¯å¦å·²æ‰“å¼€
    const existingTab = openTabs.value.find(tab => tab.filePath === file.path)
    if (existingTab) {
      activeTabId.value = existingTab.id
      return
    }
    
    // åˆ›å»ºæ–°æ ‡ç­¾é¡µ
    const newTab: MarkdownTab = {
      id: `tab-${Date.now()}`,
      filePath: file.path,
      fileName: file.name,
      content: file.content,
      mode: 'edit',
      isDirty: false
    }
    openTabs.value.push(newTab)
    activeTabId.value = newTab.id
  }
  
  function closeTab(tabId: string) {
    const index = openTabs.value.findIndex(tab => tab.id === tabId)
    if (index === -1) return
    
    openTabs.value.splice(index, 1)
    
    // è‡ªåŠ¨åˆ‡æ¢åˆ°ç›¸é‚»æ ‡ç­¾é¡µ
    if (activeTabId.value === tabId) {
      if (openTabs.value.length > 0) {
        const nextIndex = Math.min(index, openTabs.value.length - 1)
        activeTabId.value = openTabs.value[nextIndex].id
      } else {
        activeTabId.value = null
      }
    }
  }
  
  return {
    fileTree,
    openTabs,
    activeTabId,
    openFile,
    closeTab,
    // ... å…¶ä»–æ–¹æ³•
  }
})
```

#### Element Plusç»„ä»¶

##### 1. å®¹å™¨å¸ƒå±€
```vue
<el-container class="project-content">
  <el-aside :width="leftWidth" class="left-panel">
    <router-view name="left" />
  </el-aside>
  
  <el-main class="center-panel">
    <router-view name="center" />
  </el-main>
  
  <el-aside :width="rightWidth" class="right-panel">
    <router-view name="right" />
  </el-aside>
</el-container>
```

##### 2. æ ‡ç­¾é¡µç³»ç»Ÿ
```vue
<el-tabs
  v-model="markdownStore.activeTabId"
  type="card"
  closable
  @tab-remove="handleTabRemove"
  @tab-click="handleTabClick"
>
  <el-tab-pane
    v-for="tab in markdownStore.openTabs"
    :key="tab.id"
    :label="tab.fileName"
    :name="tab.id"
  >
    <MarkdownTab :tab-id="tab.id" />
  </el-tab-pane>
</el-tabs>
```

##### 3. æ–‡ä»¶æ ‘ï¼ˆTreeç»„ä»¶ï¼‰
```vue
<el-tree
  :data="markdownStore.fileTree"
  :props="{ children: 'children', label: 'name' }"
  node-key="id"
  :default-expand-all="false"
  @node-click="handleFileClick"
>
  <template #default="{ node, data }">
    <span class="tree-node">
      <el-icon>
        <component :is="data.isFolder ? Folder : Document" />
      </el-icon>
      <span>{{ node.label }}</span>
    </span>
  </template>
</el-tree>
```

#### Vditor API

##### 1. ç¼–è¾‘å™¨åˆå§‹åŒ–
**æ–‡ä»¶**ï¼š`Client/GUI/components/ProjectPage.MainPanel/Markdown/MarkdownEditor.vue`

```typescript
import Vditor from 'vditor'
import 'vditor/dist/index.css'

let vditor: Vditor | null = null

onMounted(() => {
  vditor = new Vditor('vditor-editor', {
    mode: 'wysiwyg',  // æ‰€è§å³æ‰€å¾—æ¨¡å¼
    height: '100%',
    placeholder: 'å¼€å§‹ç¼–è¾‘Markdownæ–‡æ¡£...',
    theme: 'classic',
    cache: { enable: false },
    after: () => {
      vditor?.setValue(content.value)
    },
    input: (value: string) => {
      emit('update', value)
    }
  })
})
```

##### 2. é¢„è§ˆæ¸²æŸ“
**æ–‡ä»¶**ï¼š`Client/GUI/components/ProjectPage.MainPanel/Markdown/MarkdownViewer.vue`

```typescript
import Vditor from 'vditor'

const renderMarkdown = async () => {
  if (!contentRef.value) return
  
  await Vditor.preview(contentRef.value, props.content, {
    mode: 'light',
    markdown: {
      toc: true,
      mark: true,
      footnotes: true,
      autoSpace: true
    }
  })
}

watch(() => props.content, renderMarkdown, { immediate: true })
```

---

## é¡¹ç›®è§„èŒƒä¸æ¶æ„

### ç›®å½•ç»“æ„è§„èŒƒ

#### å‰ç«¯æ–‡ä»¶ç»„ç»‡

```
Client/
â”œâ”€â”€ GUI/                          # è§†å›¾å±‚
â”‚   â”œâ”€â”€ Index/                    # ç³»ç»Ÿå…¥å£ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ HomeSystem.vue        # ä¸»çª—å£ç³»ç»Ÿå…¥å£
â”‚   â”‚   â””â”€â”€ ProjectPageSystem.vue # é¡¹ç›®çª—å£ç³»ç»Ÿå…¥å£ â­æ–°å¢
â”‚   â”‚
â”‚   â”œâ”€â”€ layouts/                  # å¸ƒå±€ç»„ä»¶ï¼ˆè´Ÿè´£ç»“æ„ä¸flexå¸ƒå±€ï¼‰
â”‚   â”‚   â”œâ”€â”€ MainLayout.vue        # ä¸»çª—å£å¸ƒå±€
â”‚   â”‚   â”œâ”€â”€ ProjectMainLayout.vue # é¡¹ç›®çª—å£å¸ƒå±€ â­æ–°å¢
â”‚   â”‚   â””â”€â”€ ProjectMainLayout.scss # å¸ƒå±€æ ·å¼ â­æ–°å¢
â”‚   â”‚
â”‚   â”œâ”€â”€ PagesLayout/              # é¡µé¢å¸ƒå±€ç»„ä»¶ï¼ˆè´Ÿè´£è§†è§‰æ ·å¼ï¼‰
â”‚   â”‚   â”œâ”€â”€ HomeDashboardPage.vue
â”‚   â”‚   â”œâ”€â”€ ProjectPage.Shell.vue      â­æ–°å¢
â”‚   â”‚   â”œâ”€â”€ ProjectPage.Shell.scss     â­æ–°å¢
â”‚   â”‚   â”œâ”€â”€ ProjectPage.MainPanel.vue  â­æ–°å¢
â”‚   â”‚   â””â”€â”€ ProjectPage.MainPanel.scss â­æ–°å¢
â”‚   â”‚
â”‚   â”œâ”€â”€ components/               # ä¸šåŠ¡ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ProjectPage.Shell/        â­æ–°å¢
â”‚   â”‚   â”‚   â”œâ”€â”€ Navbar/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ProjectNavbar.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ FileTree/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ FileTreeToolbar.vue
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ FileTreeContent.vue
â”‚   â”‚   â”‚   â””â”€â”€ Outline/
â”‚   â”‚   â”‚       â””â”€â”€ OutlineContent.vue
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ ProjectPage.MainPanel/    â­æ–°å¢
â”‚   â”‚       â””â”€â”€ Markdown/
â”‚   â”‚           â”œâ”€â”€ MarkdownTab.vue
â”‚   â”‚           â”œâ”€â”€ MarkdownEditor.vue
â”‚   â”‚           â””â”€â”€ MarkdownViewer.vue
â”‚   â”‚
â”‚   â””â”€â”€ router/
â”‚       â”œâ”€â”€ index.ts
â”‚       â””â”€â”€ routes.ts             # è·¯ç”±é…ç½® â­ä¿®æ”¹
â”‚
â”œâ”€â”€ stores/                       # çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ projectPage/              â­æ–°å¢æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â””â”€â”€ Markdown/
â”‚   â”‚       â”œâ”€â”€ index.ts
â”‚   â”‚       â”œâ”€â”€ markdown.store.ts
â”‚   â”‚       â”œâ”€â”€ markdown.mock.ts
â”‚   â”‚       â””â”€â”€ types.ts
â”‚   â””â”€â”€ index.ts
â”‚
â”œâ”€â”€ boot/                         # å¯åŠ¨æ–‡ä»¶
â”‚   â”œâ”€â”€ axios.ts
â”‚   â”œâ”€â”€ framework-init.ts
â”‚   â””â”€â”€ element-plus.ts           â­æ–°å¢
â”‚
â””â”€â”€ types/                        # ç±»å‹å®šä¹‰
    â”œâ”€â”€ project.ts
    â””â”€â”€ window.d.ts
```

#### åç«¯æ–‡ä»¶ç»„ç»‡

```
src-electron/
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ electron-main.ts          # Electronå…¥å£
â”‚   â””â”€â”€ app-manager.ts            # åº”ç”¨ç®¡ç†å™¨ â­ä¿®æ”¹
â”‚
â”œâ”€â”€ services/
â”‚   â””â”€â”€ window-service/
â”‚       â”œâ”€â”€ window-manager.ts     # çª—å£ç®¡ç†å™¨ â­ä¿®æ”¹
â”‚       â””â”€â”€ process-manager.ts    # è¿›ç¨‹ç®¡ç†å™¨ â­ä¿®æ”¹
â”‚
â””â”€â”€ ipc/
    â””â”€â”€ main-renderer/
        â”œâ”€â”€ channel-definitions.ts
        â””â”€â”€ ipc-handlers.ts
```

### å‘½åè§„èŒƒ

#### 1. æ–‡ä»¶å‘½å

| æ–‡ä»¶ç±»å‹ | å‘½åè§„åˆ™ | ç¤ºä¾‹ |
|---------|---------|------|
| Vueç»„ä»¶ | PascalCase | `ProjectMainLayout.vue` |
| TypeScriptæ–‡ä»¶ | kebab-case | `markdown.store.ts` |
| SCSSæ–‡ä»¶ | kebab-case | `ProjectMainLayout.scss` |
| ç›®å½• | PascalCaseï¼ˆç»„ä»¶ç›®å½•ï¼‰<br>kebab-caseï¼ˆåŠŸèƒ½ç›®å½•ï¼‰ | `ProjectPage.Shell/`<br>`window-service/` |

#### 2. ç»„ä»¶å‘½åæ¨¡å¼

**æ¨¡å—åŒ–å‘½å**ï¼š`{Module}.{ComponentType}.{ComponentName}.vue`

ç¤ºä¾‹ï¼š
- `ProjectPage.Shell.vue` - é¡¹ç›®é¡µçš„Shellç»„ä»¶
- `ProjectPage.MainPanel.vue` - é¡¹ç›®é¡µçš„ä¸»é¢æ¿
- `HomeDashboard.KeyMetrics.vue` - é¦–é¡µä»ªè¡¨ç›˜çš„å…³é”®æŒ‡æ ‡ç»„ä»¶

#### 3. Storeå‘½å

**å‘½åç©ºé—´æ¨¡å¼**ï¼š`{module}-{subModule}`

```typescript
// âœ… æ­£ç¡®
defineStore('projectPage-markdown', () => {})
defineStore('home-dashboard', () => {})

// âŒ é”™è¯¯
defineStore('markdown', () => {})  // ç¼ºå°‘å‘½åç©ºé—´
```

#### 4. è·¯å¾„åˆ«å

**é…ç½®ä½ç½®**ï¼š`quasar.config.ts`

```typescript
alias.push(
  { find: '@', replacement: path.resolve(__dirname, 'Client') },
  { find: '@types', replacement: path.resolve(__dirname, 'Client/types') },
  { find: '@components', replacement: path.resolve(__dirname, 'Client/GUI/components') },
  { find: '@layouts', replacement: path.resolve(__dirname, 'Client/GUI/layouts') },
  { find: '@pages', replacement: path.resolve(__dirname, 'Client/GUI/PagesLayout') },
  { find: '@stores', replacement: path.resolve(__dirname, 'Client/stores') },
  { find: '@index', replacement: path.resolve(__dirname, 'Client/GUI/Index') }
)
```

**ä½¿ç”¨åŸåˆ™**ï¼š
- âœ… æ¨èï¼šä½¿ç”¨åˆ«åè¿›è¡Œè·¨æ¨¡å—å¯¼å…¥
- âŒ ç¦æ­¢ï¼šä½¿ç”¨ `../../` è·¨çˆ¶ç›®å½•çš„ç›¸å¯¹è·¯å¾„

```typescript
// âœ… æ­£ç¡®
import { useMarkdownStore } from '@stores/projectPage'
import ProjectNavbar from '@components/ProjectPage.Shell/Navbar/ProjectNavbar.vue'

// âŒ é”™è¯¯
import { useMarkdownStore } from '../../../stores/projectPage'
import ProjectNavbar from '../../components/ProjectPage.Shell/Navbar/ProjectNavbar.vue'
```

### æ¶æ„è®¾è®¡æ¨¡å¼

#### 1. Shellè®¾è®¡æ¨¡å¼

**æ ¸å¿ƒç†å¿µ**ï¼šé€šè¿‡å•ä¸€å¯å¤ç”¨ç»„ä»¶ + Propsé…ç½®ï¼Œå®ç°ä¸åŒè§†å›¾çš„å†…å®¹åˆ†å‘

**å®ç°**ï¼š
```vue
<!-- ProjectPage.Shell.vue -->
<template>
  <div class="project-page-shell" :class="[`shell-${type}`]">
    <template v-if="type === 'left'">
      <ProjectNavbar />
      <FileTreeContent />
    </template>
    
    <template v-else-if="type === 'right'">
      <OutlineContent />
    </template>
  </div>
</template>

<script setup lang="ts">
defineProps<{ type: 'left' | 'right' }>()
</script>
```

**è·¯ç”±é…ç½®**ï¼š
```typescript
{
  components: {
    left: () => import('@pages/ProjectPage.Shell.vue'),
    right: () => import('@pages/ProjectPage.Shell.vue')
  },
  props: {
    left: { type: 'left' },
    right: { type: 'right' }
  }
}
```

**ä¼˜åŠ¿**ï¼š
- å‡å°‘ä»£ç é‡å¤
- ç»Ÿä¸€å¸ƒå±€é€»è¾‘
- ä¾¿äºç»´æŠ¤å’Œæ‰©å±•

#### 2. æ ·å¼åˆ†å±‚æ¶æ„

**åŸåˆ™**ï¼šå¸ƒå±€é€»è¾‘ä¸è§†è§‰æ ·å¼åˆ†ç¦»

| å±‚çº§ | èŒè´£ | æ–‡ä»¶ä½ç½® |
|-----|------|---------|
| **Layoutå±‚** | Flexboxå¸ƒå±€ã€overflowæ§åˆ¶ã€é«˜åº¦ç®¡ç† | `layouts/*.scss` |
| **Pageå±‚** | é¢œè‰²ã€èƒŒæ™¯ã€è¾¹æ¡†ã€å­—ä½“ç­‰è§†è§‰æ ·å¼ | `PagesLayout/*.scss` |

**ç¤ºä¾‹**ï¼š

```scss
/* layouts/ProjectMainLayout.scss - å¸ƒå±€é€»è¾‘ */
.project-main-layout {
  display: flex;
  flex-direction: column;
  overflow: hidden;  /* ğŸ”‘ æ§åˆ¶æ»šåŠ¨è¡Œä¸º */
  height: 100vh;
}

.project-content {
  flex: 1;
  min-height: 0;  /* ğŸ”‘ å…è®¸flexå‹ç¼© */
}

/* PagesLayout/ProjectPage.Shell.scss - è§†è§‰æ ·å¼ */
.project-page-shell {
  background: var(--obsidian-bg-primary);
  border-right: 1px solid var(--obsidian-border);
  color: var(--obsidian-text-primary);
}
```

#### 3. Flexboxæ»šåŠ¨å®¹å™¨æ¨¡å¼

**å…³é”®æŠ€å·§**ï¼šæ­£ç¡®å¤„ç†flexå®¹å™¨ä¸­çš„æ»šåŠ¨åŒºåŸŸ

```scss
/* âœ… æ­£ç¡®çš„æ»šåŠ¨å®¹å™¨ç»“æ„ */
.parent {
  display: flex;
  flex-direction: column;
  overflow: hidden;      /* çˆ¶å®¹å™¨ç¦æ­¢æ»šåŠ¨ */
  height: 100%;
}

.header {
  flex-shrink: 0;        /* å¤´éƒ¨å›ºå®š */
}

.scrollable-content {
  flex: 1;
  min-height: 0;         /* ğŸ”‘ å…³é”®ï¼å…è®¸flexå‹ç¼© */
  overflow-y: auto;      /* å­å®¹å™¨å¯æ»šåŠ¨ */
}
```

**å¸¸è§é”™è¯¯**ï¼š
```scss
/* âŒ é”™è¯¯ï¼šç¼ºå°‘ min-height: 0 */
.scrollable-content {
  flex: 1;
  overflow-y: auto;  /* æ— æ•ˆï¼å› ä¸ºflexé»˜è®¤ min-height: auto */
}
```

#### 4. CSSå˜é‡ä¸»é¢˜åŒ–

**Obsidianä¸»é¢˜å˜é‡**ï¼š
```scss
.project-main-layout {
  /* åªåœ¨é¡¹ç›®é¡µä½œç”¨åŸŸå†…ç”Ÿæ•ˆ */
  --obsidian-bg-primary: #ffffff;
  --obsidian-bg-secondary: #f5f6f8;
  --obsidian-border: #e3e5e8;
  --obsidian-text-primary: #2e3338;
  --obsidian-text-secondary: #6a6d74;
  --obsidian-accent: #5b7fff;
  --obsidian-hover-bg: #e9e9e9;
}
```

**ä¸Quasarä¸»é¢˜å…±å­˜ç­–ç•¥**ï¼š
- Quasarå…¨å±€ä¸»é¢˜ä¸å—å½±å“
- Obsidianå˜é‡ä»…åœ¨ `.project-main-layout` ä½œç”¨åŸŸå†…æœ‰æ•ˆ
- å­ç»„ä»¶é€šè¿‡ `var(--obsidian-*)` å¼•ç”¨å˜é‡

---

## é‡åˆ°çš„é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

### é—®é¢˜1ï¼šæ–°çª—å£ç™½å± âŒâ¡ï¸âœ…

**ç°è±¡**ï¼š
- ç‚¹å‡»é¡¹ç›®å¡ç‰‡åï¼Œå¼¹å‡ºçš„æ–°çª—å£å®Œå…¨ç©ºç™½
- æ§åˆ¶å°æ— æŠ¥é”™ä¿¡æ¯

**æ ¹æœ¬åŸå› **ï¼š
çª—å£åˆ›å»ºåæœªåŠ è½½ä»»ä½•URL

**é”™è¯¯ä»£ç **ï¼š
```typescript
// app-manager.ts - é”™è¯¯ç¤ºèŒƒ
else if (windowProcess.type === 'project') {
  // ä»€ä¹ˆéƒ½æ²¡åšï¼çª—å£åˆ›å»ºåæœªåŠ è½½å†…å®¹
}
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```typescript
// app-manager.ts - ä¿®å¤å
else if (windowProcess.type === 'project') {
  this.loadProjectWindow(windowProcess as ProjectWindowProcess)
}

private loadProjectWindow(windowProcess: ProjectWindowProcess) {
  if (isDevEnvironment) {
    // å¼€å‘ç¯å¢ƒï¼šåŠ è½½hashè·¯ç”±
    const baseUrl = process.env.APP_URL as string
    const projectUrl = `${baseUrl}#/project`
    void windowProcess.window.loadURL(projectUrl)
    windowProcess.window.webContents.openDevTools()
    return
  }
  
  // ç”Ÿäº§ç¯å¢ƒï¼šåŠ è½½é™æ€æ–‡ä»¶
  void windowProcess.window.loadFile(
    path.join(__dirname, '../../index.html'),
    { hash: '/project' }
  )
}
```

**å…³é”®ç‚¹**ï¼š
- âœ… ä½¿ç”¨hashè·¯ç”±ï¼ˆ`#/project`ï¼‰è€Œéä¼ ç»Ÿè·¯ç”±
- âœ… å¼€å‘/ç”Ÿäº§ç¯å¢ƒåˆ†åˆ«å¤„ç†URLåŠ è½½æ–¹å¼

---

### é—®é¢˜2ï¼šCSSç¼–è¯‘é”™è¯¯ âŒâ¡ï¸âœ…

**é”™è¯¯ä¿¡æ¯**ï¼š
```
[postcss] Unknown word
D:/code/.../FileTreeContent.vue?vue&type=style&index=0&scoped=01806e68&lang.css:7:18
7 | min-height: 0; // ğŸ”‘ å…³é”®ï¼
  |                ^
```

**æ ¹æœ¬åŸå› **ï¼š
åœ¨CSS/Vueçš„ `<style scoped>` ä¸­ä½¿ç”¨äº† `//` æ³¨é‡Šï¼ŒPostCSSå°†å…¶ä½œä¸ºCSSè§£ææ—¶ä¸è®¤è¯†è¯¥è¯­æ³•

**é”™è¯¯ä»£ç **ï¼š
```vue
<style scoped lang="scss">
.file-tree {
  overflow-x: hidden;
  padding: 8px;
  min-height: 0; // ğŸ”‘ å…³é”®ï¼
}
</style>
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
å°†æ‰€æœ‰ `//` æ³¨é‡Šæ›¿æ¢ä¸º `/* */` æ³¨é‡Š

```vue
<style scoped lang="scss">
.file-tree {
  overflow-x: hidden;
  padding: 8px;
  min-height: 0; /* ğŸ”‘ å…³é”®ï¼ */
}
</style>
```

**æ¶‰åŠæ–‡ä»¶**ï¼š
- `FileTreeContent.vue`
- `OutlineContent.vue`
- `ProjectPage.Shell.vue`
- `ProjectPage.MainPanel.vue`
- `MarkdownTab.vue`
- `MarkdownViewer.vue`

**ç»éªŒæ•™è®­**ï¼š
- âœ… `/* */` æ³¨é‡Šå…¼å®¹CSSå’ŒSCSS
- âŒ `//` æ³¨é‡Šä»…åœ¨çº¯SCSSæ–‡ä»¶ä¸­æœ‰æ•ˆ
- ğŸ’¡ åœ¨Vueå•æ–‡ä»¶ç»„ä»¶ä¸­ï¼Œå³ä½¿å£°æ˜äº† `lang="scss"`ï¼ŒPostCSSä»å¯èƒ½å…ˆä½œä¸ºCSSå¤„ç†

---

### é—®é¢˜3ï¼šçª—å£æ§åˆ¶æŒ‰é’®æ“ä½œé”™è¯¯çª—å£ âŒâ¡ï¸âœ…

**ç°è±¡**ï¼š
- é¡¹ç›®çª—å£çš„æœ€å°åŒ–ã€æœ€å¤§åŒ–ã€å…³é—­æŒ‰é’®
- å®é™…æ§åˆ¶çš„æ˜¯ä¸»çª—å£ï¼ˆHomePageï¼‰

**æ ¹æœ¬åŸå› **ï¼š
IPCå¤„ç†å™¨æ— æ³•æ­£ç¡®è¯†åˆ«è°ƒç”¨æ¥æºçª—å£ï¼Œé»˜è®¤ä½¿ç”¨äº†ä¸»çª—å£

**é”™è¯¯ä»£ç **ï¼š
```typescript
// app-manager.ts - é”™è¯¯ç¤ºèŒƒ
ipcMain.handle('window:minimize', async (_, request: IPCRequest<'window:minimize'>) => {
  const windowProcess = this.resolveWindowProcess(request.data?.windowId)
  // å½“windowIdæœªæä¾›æ—¶ï¼Œé»˜è®¤è¿”å›ä¸»çª—å£
})

private resolveWindowProcess(windowId?: string): WindowProcess | null {
  if (!this.windowManager) return null
  
  if (windowId) {
    return this.windowManager.getProcess(windowId)
  }
  
  // âŒ é”™è¯¯ï¼šç›´æ¥è¿”å›ä¸»çª—å£è¿›ç¨‹
  return this.windowManager.getProcess(this.config.windows.main.name)
}
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
ä½¿ç”¨ `event.sender` è¯†åˆ«è°ƒç”¨çª—å£

```typescript
// app-manager.ts - ä¿®å¤å
ipcMain.handle('window:minimize', async (event, request: IPCRequest<'window:minimize'>) => {
  return this.handleWindowOperationFromEvent(event, 'minimize', request)
})

private handleWindowOperationFromEvent(
  event: Electron.IpcMainInvokeEvent,
  operation: 'minimize' | 'maximize' | 'unmaximize' | 'close' | 'focus',
  request: IPCRequest<any>
): IPCResponse<void> {
  try {
    // ğŸ”‘ å…³é”®ï¼šé€šè¿‡event.senderè¯†åˆ«çª—å£
    const windowProcess = this.resolveWindowProcessFromEvent(event, request.data?.windowId)
    
    if (!windowProcess) {
      return createIPCResponse(false, undefined, 'Window not found')
    }
    
    // æ‰§è¡Œçª—å£æ“ä½œ
    switch (operation) {
      case 'minimize':
        windowProcess.window.minimize()
        break
      case 'maximize':
        windowProcess.window.maximize()
        break
      // ... å…¶ä»–æ“ä½œ
    }
    
    return createIPCResponse(true)
  } catch (error) {
    return createIPCResponse(false, undefined, String(error))
  }
}

private resolveWindowProcessFromEvent(
  event: Electron.IpcMainInvokeEvent,
  windowId?: string
): WindowProcess | null {
  if (!this.windowManager) return null
  
  // ä¼˜å…ˆä½¿ç”¨æä¾›çš„windowId
  if (windowId) {
    return this.windowManager.getProcess(windowId)
  }
  
  // ğŸ”‘ å…³é”®ï¼šä»event.senderè·å–BrowserWindowå®ä¾‹
  const senderWindow = BrowserWindow.fromWebContents(event.sender)
  if (!senderWindow) {
    return null
  }
  
  // é€šè¿‡BrowserWindow.idæŸ¥æ‰¾å¯¹åº”çš„WindowProcess
  return this.windowManager.getProcessByWindowId(senderWindow.id)
}
```

**æ–°å¢æ–¹æ³•**ï¼š
```typescript
// window-manager.ts
public getProcessByWindowId(windowId: number): WindowProcess | null {
  return this.processManager.getProcessByWindowId(windowId)
}

// process-manager.ts
public getProcessByWindowId(windowId: number): WindowProcess | null {
  for (const entry of this.processes.values()) {
    if (entry.process.window.id === windowId) {
      return entry.process
    }
  }
  return null
}
```

**å…³é”®æ”¹è¿›**ï¼š
1. âœ… æ‰€æœ‰IPC handlersæ¥æ”¶ `event` å‚æ•°
2. âœ… ä½¿ç”¨ `BrowserWindow.fromWebContents(event.sender)` è·å–è°ƒç”¨çª—å£
3. âœ… é€šè¿‡ `window.id` æŸ¥æ‰¾å¯¹åº”çš„ `WindowProcess`
4. âœ… å®Œå…¨ç‹¬ç«‹çš„çª—å£æ“ä½œèƒ½åŠ›

---

### é—®é¢˜4ï¼šTypeScriptç±»å‹é”™è¯¯ âš ï¸â¡ï¸ğŸ”§

**ç°è±¡**ï¼š
```typescript
// ProjectMainLayout.vue
async function minimizeWindow() {
  await window.nimbria.window.minimize()  // âŒ ç±»å‹é”™è¯¯
}
```

**é”™è¯¯ä¿¡æ¯**ï¼š
```
Property 'nimbria' does not exist on type 'Window & typeof globalThis'
```

**æ ¹æœ¬åŸå› **ï¼š
`window.nimbria` APIåœ¨ `window.d.ts` ä¸­å®šä¹‰çš„ç±»å‹ç»“æ„ä¸å®é™…ä½¿ç”¨ä¸åŒ¹é…

**ä¸´æ—¶è§£å†³æ–¹æ¡ˆ**ï¼š
ä½¿ç”¨ç±»å‹æ–­è¨€ `as any`

```typescript
async function minimizeWindow() {
  try {
    await (window as any).nimbria.window.minimize()
  } catch (error) {
    console.error('Failed to minimize window:', error)
  }
}
```

**æ­£ç¡®çš„é•¿æœŸè§£å†³æ–¹æ¡ˆ**ï¼ˆå¾…å®æ–½ï¼‰ï¼š
ä¿®æ­£ `Client/types/window.d.ts` ä¸­çš„ç±»å‹å®šä¹‰

```typescript
// window.d.ts - åº”è¯¥ä¿®æ­£ä¸º
declare global {
  interface Window {
    nimbria: {
      window: {
        minimize: () => Promise<void>
        maximize: () => Promise<void>
        unmaximize: () => Promise<void>
        close: () => Promise<void>
        isMaximized: () => Promise<boolean>
      }
      // ... å…¶ä»–API
    }
  }
}
```

**æ³¨æ„äº‹é¡¹**ï¼š
- âš ï¸ `as any` æ˜¯ä¸´æ—¶ç»•è¿‡æ–¹æ¡ˆï¼Œä¼šå¤±å»ç±»å‹å®‰å…¨
- ğŸ”§ å»ºè®®åç»­ä¼˜å…ˆä¿®æ­£ç±»å‹å®šä¹‰æ–‡ä»¶
- ğŸ“ éœ€è¦åŒæ­¥æ£€æŸ¥ `preload.ts` ä¸­çš„APIæš´éœ²ç»“æ„

---

### é—®é¢˜5ï¼šçª—å£æ§åˆ¶æ æ ·å¼è°ƒæ•´ ğŸ¨â¡ï¸âœ…

**ç”¨æˆ·åé¦ˆ**ï¼š
1. æ§åˆ¶æ é¢œè‰²ä¸ä¸»ç¨‹åºä¸ä¸€è‡´
2. æœ€å°åŒ–æŒ‰é’®å‚ç›´ä½ç½®éœ€è¦å¾®è°ƒ

**è§£å†³æ–¹æ¡ˆ1ï¼šç»Ÿä¸€é¢œè‰²é£æ ¼**

```scss
/* ProjectMainLayout.scss - ä¿®æ”¹å‰ */
.project-titlebar {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);  /* ç´«è‰²æ¸å˜ */
  color: white;
}

/* ProjectMainLayout.scss - ä¿®æ”¹å */
.project-titlebar {
  background: #ffffff;  /* ç™½è‰²èƒŒæ™¯ */
  color: #2e3338;       /* æ·±è‰²æ–‡å­— */
  border-bottom: 1px solid #e3e5e8;  /* åº•éƒ¨è¾¹æ¡† */
}

.project-titlebar__btn {
  color: #6a6d74;  /* æŒ‰é’®é»˜è®¤é¢œè‰² */
  
  &:hover {
    background: rgba(0, 0, 0, 0.05);
    color: #2e3338;
  }
  
  &--close:hover {
    background: #e53935;  /* å…³é—­æŒ‰é’®çº¢è‰²æ‚¬åœ */
    color: white;
  }
}
```

**è§£å†³æ–¹æ¡ˆ2ï¼šæŒ‰é’®å‚ç›´åç§»**

```scss
/* ProjectMainLayout.scss */
.project-titlebar__btn {
  &--minimize {
    position: relative;
    top: -5px;  /* å‘ä¸Šåç§»5px */
  }
}
```

**Vueæ¨¡æ¿å¯¹åº”ä¿®æ”¹**ï¼š
```vue
<q-btn 
  icon="minimize"
  class="... project-titlebar__btn--minimize"
/>
```

**è°ƒæ•´æ–¹æ³•**ï¼š
- `top: -5px` - å‘ä¸Šç§»åŠ¨5px
- `top: 5px` - å‘ä¸‹ç§»åŠ¨5px
- ä¹Ÿå¯ä½¿ç”¨ `transform: translateY(-5px)`

---

## ç»éªŒæ€»ç»“

### 1. Electronå¤šçª—å£å¼€å‘

#### âœ… æœ€ä½³å®è·µ

1. **çª—å£URLåŠ è½½**
   - å¼€å‘ç¯å¢ƒä½¿ç”¨hashè·¯ç”±ï¼ˆ`#/route`ï¼‰
   - ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ `loadFile()` + hashå‚æ•°
   - åŒºåˆ†å¤„ç†é¿å…è·¯ç”±å¤±æ•ˆ

2. **IPCçª—å£è¯†åˆ«**
   - å§‹ç»ˆä½¿ç”¨ `event.sender` è¯†åˆ«è°ƒç”¨æº
   - ä¸è¦ä¾èµ–é»˜è®¤çª—å£æˆ–ç¡¬ç¼–ç çª—å£ID
   - é€šè¿‡ `BrowserWindow.id` å»ºç«‹ç²¾ç¡®æ˜ å°„

3. **ç±»å‹å®‰å…¨**
   - ç»´æŠ¤å®Œæ•´çš„ `window.d.ts` ç±»å‹å®šä¹‰
   - preloadè„šæœ¬æš´éœ²çš„APIè¦æœ‰å¯¹åº”ç±»å‹
   - é¿å…æ»¥ç”¨ `as any`

#### âŒ å¸¸è§é™·é˜±

1. **å¿˜è®°ä¸ºæ–°çª—å£åŠ è½½URL**
   - ç°è±¡ï¼šçª—å£åˆ›å»ºæˆåŠŸä½†æ˜¾ç¤ºç©ºç™½
   - æ£€æŸ¥ï¼šç¡®ä¿åœ¨çª—å£åˆ›å»ºå›è°ƒä¸­è°ƒç”¨ `loadURL()` æˆ– `loadFile()`

2. **IPC handleré»˜è®¤æ“ä½œä¸»çª—å£**
   - ç°è±¡ï¼šæ‰€æœ‰çª—å£çš„æŒ‰é’®éƒ½æ§åˆ¶ä¸»çª—å£
   - æ£€æŸ¥ï¼šIPC handleræ˜¯å¦æ­£ç¡®è¯†åˆ«äº†è°ƒç”¨æºçª—å£

3. **å¼€å‘/ç”Ÿäº§ç¯å¢ƒURLä¸ä¸€è‡´**
   - ç°è±¡ï¼šå¼€å‘æ­£å¸¸ï¼Œæ‰“åŒ…åè·¯ç”±å¤±æ•ˆ
   - æ£€æŸ¥ï¼šæ˜¯å¦åˆ†åˆ«å¤„ç†äº†devServer URLå’Œé™æ€æ–‡ä»¶è·¯å¾„

### 2. Vue Routerå¤šè§†å›¾

#### âœ… æœ€ä½³å®è·µ

1. **å‘½åè§†å›¾ + Propsæ¨¡å¼**
   ```typescript
   {
     components: { left: Shell, right: Shell },
     props: { left: { type: 'left' }, right: { type: 'right' } }
   }
   ```
   - å®ç°ç»„ä»¶å¤ç”¨
   - é€šè¿‡propsæ§åˆ¶è¡Œä¸ºå·®å¼‚

2. **è·¯ç”±å±‚çº§è®¾è®¡**
   ```
   /project (ç³»ç»Ÿå…¥å£)
     â””â”€â”€ '' (å¸ƒå±€å®¹å™¨)
           â””â”€â”€ '' (å‘½åè§†å›¾åˆ†å‘)
   ```
   - æ¸…æ™°çš„å±‚çº§å…³ç³»
   - ä¾¿äºåç»­æ‰©å±•å­è·¯ç”±

#### âŒ å¸¸è§é™·é˜±

1. **å¿˜è®°åœ¨layoutä¸­æ·»åŠ  `<router-view />`**
   - ç°è±¡ï¼šå­è·¯ç”±æ— æ³•æ¸²æŸ“
   - æ£€æŸ¥ï¼šæ¯å±‚layoutéƒ½è¦æœ‰å¯¹åº”çš„router-viewå‡ºå£

2. **å‘½åè§†å›¾å¿˜è®°ä¼ é€’props**
   - ç°è±¡ï¼šç»„ä»¶æ— æ³•åŒºåˆ†è‡ªå·±çš„è§’è‰²
   - æ£€æŸ¥ï¼š`props` é…ç½®æ˜¯å¦ä¸ `components` å¯¹åº”

### 3. Flexboxå¸ƒå±€

#### âœ… é»„é‡‘æ³•åˆ™

```scss
/* æ»šåŠ¨å®¹å™¨çš„çˆ¶å…ƒç´  */
.parent {
  display: flex;
  flex-direction: column;
  overflow: hidden;  /* â­ çˆ¶å®¹å™¨ç¦æ­¢æ»šåŠ¨ */
}

/* æ»šåŠ¨å®¹å™¨æœ¬èº« */
.scrollable {
  flex: 1;
  min-height: 0;     /* â­ å…³é”®ï¼å…è®¸flexå‹ç¼© */
  overflow-y: auto;  /* â­ å­å®¹å™¨å¯æ»šåŠ¨ */
}
```

**è®°å¿†å£è¯€**ï¼š
- çˆ¶çº§ `overflow: hidden`
- å­çº§ `min-height: 0`
- æ»šåŠ¨åŒº `overflow-y: auto`

#### âŒ å¸¸è§é”™è¯¯

```scss
/* âŒ é”™è¯¯ï¼šç¼ºå°‘ min-height: 0 */
.scrollable {
  flex: 1;
  overflow-y: auto;  /* ä¸ç”Ÿæ•ˆï¼ */
}

/* âŒ é”™è¯¯ï¼šçˆ¶çº§æ²¡æœ‰é™åˆ¶é«˜åº¦ */
.parent {
  display: flex;
  /* æ²¡æœ‰ height æˆ– flex: 1 */
}
.scrollable {
  overflow-y: auto;  /* ä¸ç”Ÿæ•ˆï¼ */
}
```

### 4. CSSæ³¨é‡Šè¯­æ³•

#### âœ… æ¨èåšæ³•

```scss
/* âœ… åœ¨æ‰€æœ‰åœºæ™¯éƒ½æœ‰æ•ˆ */
.class {
  property: value; /* æ³¨é‡Š */
}
```

#### âŒ é¿å…çš„å†™æ³•

```scss
/* âŒ åœ¨Vue SFCä¸­å¯èƒ½å‡ºé”™ */
.class {
  property: value; // æ³¨é‡Š
}
```

**è§„åˆ™**ï¼š
- çº¯ `.scss` æ–‡ä»¶ï¼šä¸¤ç§æ³¨é‡Šéƒ½å¯ä»¥
- Vue `<style lang="scss">`ï¼šåªç”¨ `/* */`
- åŸå› ï¼šPostCSSå¯èƒ½åœ¨SCSSç¼–è¯‘å‰å¤„ç†ï¼Œå¯¼è‡´ `//` è¢«è¯¯è¯†åˆ«

### 5. åŸå‹è¿ç§»ç­–ç•¥

#### âœ… æ¨èæµç¨‹

1. **ä¿ç•™åŸæŠ€æœ¯æ ˆ**
   - ä¸è¦ç›²ç›®æ›¿æ¢åŸå‹ä½¿ç”¨çš„åº“ï¼ˆå¦‚Vditorï¼‰
   - ç›´æ¥å°†ä¾èµ–æ·»åŠ åˆ°ä¸»é¡¹ç›®

2. **è°ƒæ•´ç›®å½•ç»“æ„**
   - éµå¾ªä¸»é¡¹ç›®çš„ç›®å½•è§„èŒƒ
   - ä½¿ç”¨è·¯å¾„åˆ«åé¿å…ç›¸å¯¹è·¯å¾„æ··ä¹±

3. **é€æ­¥è¿ç§»æ–‡ä»¶**
   - å…ˆè¿ç§»æ•°æ®å±‚ï¼ˆstoresã€typesï¼‰
   - å†è¿ç§»è§†å›¾å±‚ï¼ˆlayoutsã€pagesã€componentsï¼‰
   - æœ€åé…ç½®è·¯ç”±å’Œå¯åŠ¨é¡¹

4. **æµ‹è¯•éªŒè¯**
   - æ¯è¿ç§»ä¸€ä¸ªæ¨¡å—å°±æµ‹è¯•ä¸€æ¬¡
   - é¿å…ä¸€æ¬¡æ€§è¿ç§»å¯¼è‡´éš¾ä»¥å®šä½é—®é¢˜

#### âŒ é¿å…çš„åšæ³•

1. **ç›²ç›®é‡æ„**
   - ä¸è¦åœ¨è¿ç§»æ—¶å¤§å¹…ä¿®æ”¹åŸå‹é€»è¾‘
   - å…ˆè¿ç§»èƒ½è·‘é€šï¼Œå†è€ƒè™‘ä¼˜åŒ–

2. **å¿½ç•¥æ ·å¼ç»†èŠ‚**
   - Flexboxã€overflowç­‰å¸ƒå±€å…³é”®ç‚¹è¦åŸæ ·ä¿ç•™
   - CSSå˜é‡ã€ä¸»é¢˜ç³»ç»Ÿè¦ä¸€å¹¶è¿ç§»

### 6. ä¾èµ–ç®¡ç†

#### âœ… æ·»åŠ æ–°åº“çš„æµç¨‹

1. **ä¿®æ”¹ `package.json`**
   ```json
   {
     "dependencies": {
       "element-plus": "^2.9.1",
       "vditor": "^3.10.7"
     }
   }
   ```

2. **åˆ›å»ºbootæ–‡ä»¶**
   ```typescript
   // Client/boot/element-plus.ts
   import { boot } from 'quasar/wrappers'
   import ElementPlus from 'element-plus'
   
   export default boot(({ app }) => {
     app.use(ElementPlus)
   })
   ```

3. **æ³¨å†Œåˆ°quasar.config.ts**
   ```typescript
   boot: ['axios', 'element-plus']
   ```

4. **å®‰è£…ä¾èµ–**
   ```bash
   npm install
   ```

#### âš ï¸ æ³¨æ„äº‹é¡¹

- Element Plusä¸Quasarå…±å­˜æ—¶ï¼Œä¼˜å…ˆä½¿ç”¨Quasarç»„ä»¶
- ä»…åœ¨Quasarä¸æ”¯æŒçš„åœºæ™¯ä½¿ç”¨Element Plus
- é¿å…æ ·å¼å†²çªï¼ˆé€šè¿‡ä½œç”¨åŸŸCSSæ§åˆ¶ï¼‰

---

## æ ‡å‡†å·¥ä½œæµç¨‹

### å·¥ä½œæµ1ï¼šæ·»åŠ æ–°é¡µé¢ç³»ç»Ÿ

#### é˜¶æ®µ1ï¼šè§„åˆ’ä¸è®¾è®¡ ğŸ“‹

**è¾“å…¥**ï¼šéœ€æ±‚æè¿°ã€åŸå‹æˆ–å‚è€ƒè®¾è®¡

**æ­¥éª¤**ï¼š

1. **åˆ›å»ºè®¾è®¡æ–‡æ¡£**
   ```
   Document/Design/{åŠŸèƒ½åç§°}/
     â”œâ”€â”€ åˆå§‹éœ€æ±‚åˆ†æ.md
     â”œâ”€â”€ å…·ä½“Design.md
     â””â”€â”€ æ–‡æ¡£å‚è€ƒ.md
   ```

2. **ç¡®å®šç›®å½•ç»“æ„**
   - ç¡®å®šæ–°ç³»ç»Ÿåœ¨ `Client/GUI/` ä¸‹çš„ä½ç½®
   - è§„åˆ’ `Index`ã€`layouts`ã€`PagesLayout`ã€`components` çš„æ–‡ä»¶
   - è§„åˆ’ `stores` çš„æ¨¡å—ç»“æ„

3. **ç¡®å®šæŠ€æœ¯é€‰å‹**
   - åˆ—å‡ºéœ€è¦çš„æ–°ä¾èµ–ï¼ˆå¦‚Element Plusã€Vditorï¼‰
   - ç¡®è®¤ä¸ç°æœ‰æŠ€æœ¯æ ˆçš„å…¼å®¹æ€§

4. **è®¾è®¡è·¯ç”±ç»“æ„**
   ```typescript
   /new-system (å…¥å£)
     â””â”€â”€ '' (å¸ƒå±€)
           â””â”€â”€ '' (å†…å®¹åˆ†å‘)
   ```

**è¾“å‡º**ï¼šè¯¦ç»†çš„è®¾è®¡æ–‡æ¡£ï¼ˆå¦‚æœ¬æ¬¡çš„ `Design.md`ï¼‰

---

#### é˜¶æ®µ2ï¼šæ•°æ®å±‚æ­å»º ğŸ’¾

**æ­¥éª¤**ï¼š

1. **å®šä¹‰TypeScriptç±»å‹**
   ```typescript
   // Client/stores/{module}/{subModule}/types.ts
   export interface DataType { /* ... */ }
   ```

2. **åˆ›å»ºMockæ•°æ®**
   ```typescript
   // Client/stores/{module}/{subModule}/{name}.mock.ts
   export const mockData: DataType[] = [ /* ... */ ]
   ```

3. **ç¼–å†™Pinia Store**
   ```typescript
   // Client/stores/{module}/{subModule}/{name}.store.ts
   export const useXxxStore = defineStore('{module}-{subModule}', () => {
     const data = ref<DataType[]>([])
     
     function loadData() {
       data.value = mockData
     }
     
     return { data, loadData }
   })
   ```

4. **åˆ›å»ºæ¨¡å—ç´¢å¼•**
   ```typescript
   // Client/stores/{module}/{subModule}/index.ts
   export * from './types'
   export * from './{name}.store'
   export * from './{name}.mock'
   
   // Client/stores/{module}/index.ts
   export * from './{subModule}'
   ```

**éªŒè¯**ï¼šåœ¨æµè§ˆå™¨Consoleä¸­æµ‹è¯•Storeèƒ½å¦æ­£å¸¸å¯¼å…¥å’Œä½¿ç”¨

---

#### é˜¶æ®µ3ï¼šå¸ƒå±€å±‚æ­å»º ğŸ—ï¸

**æ­¥éª¤**ï¼š

1. **åˆ›å»ºç³»ç»Ÿå…¥å£ç»„ä»¶**
   ```vue
   <!-- Client/GUI/Index/{SystemName}.vue -->
   <template>
     <router-view />
   </template>
   ```

2. **åˆ›å»ºå¸ƒå±€ç»„ä»¶ï¼ˆLayoutï¼‰**
   ```vue
   <!-- Client/GUI/layouts/{SystemName}Layout.vue -->
   <template>
     <div class="{system}-layout">
       <!-- Flexboxç»“æ„ -->
       <router-view name="left" />
       <router-view name="center" />
       <router-view name="right" />
     </div>
   </template>
   ```

3. **ç¼–å†™å¸ƒå±€æ ·å¼ï¼ˆSCSSï¼‰**
   ```scss
   // Client/GUI/layouts/{SystemName}Layout.scss
   .{system}-layout {
     display: flex;
     height: 100vh;
     overflow: hidden;  /* å…³é”® */
     
     .left-panel {
       flex: 0 0 250px;
       min-height: 0;   /* å…³é”® */
     }
     
     .center-panel {
       flex: 1;
       min-height: 0;   /* å…³é”® */
       overflow-y: auto;
     }
   }
   ```

**éªŒè¯**ï¼šåœ¨æµè§ˆå™¨ä¸­æ£€æŸ¥å¸ƒå±€æ˜¯å¦æ­£ç¡®ï¼Œæ»šåŠ¨è¡Œä¸ºæ˜¯å¦ç¬¦åˆé¢„æœŸ

---

#### é˜¶æ®µ4ï¼šé¡µé¢å±‚æ­å»º ğŸ“„

**æ­¥éª¤**ï¼š

1. **åˆ›å»ºé¡µé¢ç»„ä»¶**
   ```vue
   <!-- Client/GUI/PagesLayout/{SystemName}.{PageName}.vue -->
   <template>
     <div class="{system}-{page}">
       <ComponentA />
       <ComponentB />
     </div>
   </template>
   
   <script setup lang="ts">
   import ComponentA from '@components/{SystemName}.{PageName}/ComponentA.vue'
   </script>
   
   <style scoped lang="scss">
   @import './{SystemName}.{PageName}.scss';
   </style>
   ```

2. **ç¼–å†™è§†è§‰æ ·å¼ï¼ˆSCSSï¼‰**
   ```scss
   // Client/GUI/PagesLayout/{SystemName}.{PageName}.scss
   .{system}-{page} {
     background: var(--custom-bg);
     color: var(--custom-text);
     padding: 16px;
   }
   ```

**éªŒè¯**ï¼šåœ¨æµè§ˆå™¨ä¸­æ£€æŸ¥æ ·å¼æ˜¯å¦æ­£ç¡®åº”ç”¨

---

#### é˜¶æ®µ5ï¼šç»„ä»¶å±‚æ­å»º ğŸ§©

**æ­¥éª¤**ï¼š

1. **åˆ›å»ºç»„ä»¶ç›®å½•**
   ```
   Client/GUI/components/{SystemName}.{PageName}/
     â”œâ”€â”€ {Category1}/
     â”‚   â”œâ”€â”€ Component1.vue
     â”‚   â””â”€â”€ Component2.vue
     â””â”€â”€ {Category2}/
         â””â”€â”€ Component3.vue
   ```

2. **ç¼–å†™ä¸šåŠ¡ç»„ä»¶**
   ```vue
   <!-- Componentç¤ºä¾‹ -->
   <template>
     <div class="component">
       <!-- ç»„ä»¶å†…å®¹ -->
     </div>
   </template>
   
   <script setup lang="ts">
   import { useXxxStore } from '@stores/{module}'
   
   const store = useXxxStore()
   </script>
   
   <style scoped lang="scss">
   .component {
     /* ç»„ä»¶æ ·å¼ */
   }
   </style>
   ```

**éªŒè¯**ï¼šæµ‹è¯•ç»„ä»¶ä¸Storeçš„äº¤äº’æ˜¯å¦æ­£å¸¸

---

#### é˜¶æ®µ6ï¼šè·¯ç”±é…ç½® ğŸ›¤ï¸

**æ­¥éª¤**ï¼š

1. **æ·»åŠ è·¯ç”±è§„åˆ™**
   ```typescript
   // Client/GUI/router/routes.ts
   const routes: RouteRecordRaw[] = [
     // ... ç°æœ‰è·¯ç”±
     {
       path: '/{system}',
       component: () => import('@index/{SystemName}.vue'),
       children: [
         {
           path: '',
           component: () => import('@layouts/{SystemName}Layout.vue'),
           children: [
             {
               path: '',
               name: '{system}-main',
               components: {
                 left: () => import('@pages/{SystemName}.LeftPanel.vue'),
                 center: () => import('@pages/{SystemName}.CenterPanel.vue'),
                 right: () => import('@pages/{SystemName}.RightPanel.vue')
               }
             }
           ]
         }
       ]
     }
   ]
   ```

2. **æµ‹è¯•è·¯ç”±è·³è½¬**
   ```typescript
   // åœ¨éœ€è¦è·³è½¬çš„åœ°æ–¹
   import { useRouter } from 'vue-router'
   
   const router = useRouter()
   router.push('/{system}')
   ```

**éªŒè¯**ï¼šæ‰‹åŠ¨åœ¨æµè§ˆå™¨åœ°å€æ è¾“å…¥è·¯ç”±ï¼Œæ£€æŸ¥æ˜¯å¦èƒ½æ­£ç¡®æ¸²æŸ“

---

#### é˜¶æ®µ7ï¼šElectroné›†æˆï¼ˆå¤šçª—å£åœºæ™¯ï¼‰ ğŸªŸ

**é€‚ç”¨åœºæ™¯**ï¼šéœ€è¦åœ¨ç‹¬ç«‹çª—å£ä¸­æ‰“å¼€æ–°ç³»ç»Ÿ

**æ­¥éª¤**ï¼š

1. **ä¿®æ”¹çª—å£åŠ è½½é€»è¾‘**
   ```typescript
   // src-electron/core/app-manager.ts
   private load{System}Window(windowProcess: {System}WindowProcess) {
     if (isDevEnvironment) {
       const baseUrl = process.env.APP_URL as string
       const url = `${baseUrl}#/{system}`
       void windowProcess.window.loadURL(url)
       windowProcess.window.webContents.openDevTools()
       return
     }
     
     void windowProcess.window.loadFile(
       path.join(__dirname, '../../index.html'),
       { hash: '/{system}' }
     )
   }
   ```

2. **åœ¨ç”Ÿå‘½å‘¨æœŸé’©å­ä¸­è°ƒç”¨**
   ```typescript
   else if (windowProcess.type === '{system}') {
     this.load{System}Window(windowProcess as {System}WindowProcess)
   }
   ```

3. **é…ç½®IPC handlersï¼ˆå¦‚éœ€çª—å£æ§åˆ¶ï¼‰**
   ```typescript
   ipcMain.handle('window:operation', async (event, request) => {
     const windowProcess = this.resolveWindowProcessFromEvent(event)
     // æ‰§è¡Œæ“ä½œ
   })
   ```

**éªŒè¯**ï¼š
- æ–°çª—å£èƒ½å¦æ­£å¸¸æ‰“å¼€
- è·¯ç”±æ˜¯å¦æ­£ç¡®åŠ è½½
- å¼€å‘å·¥å…·ä¸­æ— æŠ¥é”™

---

#### é˜¶æ®µ8ï¼šä¾èµ–ä¸æ ·å¼é›†æˆ ğŸ“¦

**æ­¥éª¤**ï¼š

1. **æ·»åŠ æ–°ä¾èµ–**
   ```json
   // package.json
   {
     "dependencies": {
       "new-library": "^x.x.x"
     }
   }
   ```

2. **åˆ›å»ºbootæ–‡ä»¶ï¼ˆå¦‚éœ€å…¨å±€æ³¨å†Œï¼‰**
   ```typescript
   // Client/boot/new-library.ts
   import { boot } from 'quasar/wrappers'
   import NewLibrary from 'new-library'
   import 'new-library/dist/style.css'
   
   export default boot(({ app }) => {
     app.use(NewLibrary)
   })
   ```

3. **æ³¨å†Œåˆ°quasar.config.ts**
   ```typescript
   boot: [
     // ... ç°æœ‰boot
     'new-library'
   ],
   
   // å¦‚éœ€è·¯å¾„åˆ«å
   alias.push({
     find: '@{alias}',
     replacement: path.resolve(__dirname, 'Client/{path}')
   })
   ```

4. **å®‰è£…ä¾èµ–**
   ```bash
   npm install
   ```

**éªŒè¯**ï¼š
- å¼€å‘æœåŠ¡å™¨èƒ½å¦æ­£å¸¸å¯åŠ¨
- æ–°åº“çš„ç»„ä»¶/APIèƒ½å¦æ­£å¸¸ä½¿ç”¨

---

#### é˜¶æ®µ9ï¼šæµ‹è¯•ä¸è°ƒè¯• ğŸ›

**æµ‹è¯•æ¸…å•**ï¼š

- [ ] è·¯ç”±è·³è½¬æ˜¯å¦æ­£å¸¸
- [ ] æ•°æ®åŠ è½½æ˜¯å¦æ­£ç¡®
- [ ] ç»„ä»¶æ¸²æŸ“æ˜¯å¦ç¬¦åˆé¢„æœŸ
- [ ] æ ·å¼æ˜¯å¦æ­£ç¡®åº”ç”¨
- [ ] Flexboxå¸ƒå±€æ˜¯å¦å“åº”æ­£ç¡®
- [ ] æ»šåŠ¨åŒºåŸŸæ˜¯å¦æ­£å¸¸å·¥ä½œ
- [ ] ï¼ˆå¤šçª—å£ï¼‰çª—å£æ“ä½œæ˜¯å¦æ­£ç¡®
- [ ] ï¼ˆå¤šçª—å£ï¼‰IPCé€šä¿¡æ˜¯å¦æ­£å¸¸
- [ ] æµè§ˆå™¨Consoleæ— é”™è¯¯
- [ ] Linteræ— è­¦å‘Š

**å¸¸è§è°ƒè¯•å·¥å…·**ï¼š
```bash
# è¿è¡Œå¼€å‘æœåŠ¡å™¨
npm run dev

# æ£€æŸ¥ç±»å‹é”™è¯¯
npx vue-tsc --noEmit

# æ£€æŸ¥Linteré—®é¢˜
npx eslint Client/
```

---

#### é˜¶æ®µ10ï¼šæ–‡æ¡£ä¸æ€»ç»“ ğŸ“

**æ­¥éª¤**ï¼š

1. **æ›´æ–°è®¾è®¡æ–‡æ¡£**
   - è®°å½•å®é™…å®ç°ä¸è®¡åˆ’çš„å·®å¼‚
   - è¡¥å……é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

2. **åˆ›å»ºæ€»ç»“æŠ¥å‘Š**
   ```
   Document/æ€»ç»“/{åŠŸèƒ½åç§°}å®ç°æ€»ç»“_{æ—¥æœŸ}.md
   ```
   - å‚è€ƒæœ¬æ–‡æ¡£çš„ç»“æ„
   - è®°å½•å…³é”®æŠ€æœ¯ç‚¹å’Œç»éªŒæ•™è®­

3. **æ›´æ–°å·¥ä½œæµæ–‡æ¡£**
   ```
   Document/Workflow/{åŠŸèƒ½åç§°}æ·»åŠ æµç¨‹.md
   ```
   - æç‚¼æ ‡å‡†åŒ–æµç¨‹
   - ä¸ºåç»­ç±»ä¼¼å·¥ä½œæä¾›æ¨¡æ¿

---

### å·¥ä½œæµ2ï¼šåŸå‹ç³»ç»Ÿè¿ç§»

#### è¾“å…¥
- ç‹¬ç«‹è¿è¡Œçš„åŸå‹é¡¹ç›®
- åŸå‹ä½¿ç”¨çš„æŠ€æœ¯æ ˆåˆ—è¡¨

#### æ ‡å‡†æ­¥éª¤

1. **è¯„ä¼°æŠ€æœ¯æ ˆå…¼å®¹æ€§**
   - æ£€æŸ¥åŸå‹ä¾èµ–æ˜¯å¦ä¸ä¸»é¡¹ç›®å†²çª
   - å†³å®šæ˜¯ä¿ç•™åŸæŠ€æœ¯è¿˜æ˜¯æ›¿æ¢

2. **è§„åˆ’ç›®å½•æ˜ å°„**
   ```
   åŸå‹/src/components/       -> ä¸»é¡¹ç›®/Client/GUI/components/{Module}/
   åŸå‹/src/views/            -> ä¸»é¡¹ç›®/Client/GUI/PagesLayout/
   åŸå‹/src/stores/           -> ä¸»é¡¹ç›®/Client/stores/{module}/
   åŸå‹/src/types/            -> ä¸»é¡¹ç›®/Client/types/ æˆ– stores/{module}/types.ts
   ```

3. **è°ƒæ•´å¯¼å…¥è·¯å¾„**
   - å°†ç›¸å¯¹è·¯å¾„æ”¹ä¸ºåˆ«åè·¯å¾„
   - æ›´æ–°æ‰€æœ‰ `import` è¯­å¥

4. **è¿ç§»é¡ºåº**
   ```
   ç±»å‹å®šä¹‰ -> Mockæ•°æ® -> Store -> å¸ƒå±€ -> é¡µé¢ -> ç»„ä»¶ -> è·¯ç”±
   ```

5. **é€æ­¥éªŒè¯**
   - æ¯è¿ç§»ä¸€å±‚å°±è¿è¡Œä¸€æ¬¡æµ‹è¯•
   - ç¡®ä¿æ— TypeScripté”™è¯¯å’ŒLinterè­¦å‘Š

#### æ³¨æ„äº‹é¡¹
- âš ï¸ ä¿ç•™åŸå‹çš„å…³é”®å¸ƒå±€é€»è¾‘ï¼ˆå¦‚Flexboxã€overflowå¤„ç†ï¼‰
- âš ï¸ CSSå˜é‡ã€ä¸»é¢˜ç³»ç»Ÿè¦å®Œæ•´è¿ç§»
- âš ï¸ ä¸è¦åœ¨è¿ç§»æ—¶å¤§å¹…é‡æ„é€»è¾‘

---

## é™„å½•

### A. å…³é”®æ–‡ä»¶æ¸…å•

#### æ–°å¢æ–‡ä»¶

**å‰ç«¯ï¼ˆClient/ï¼‰**

```
Client/
â”œâ”€â”€ boot/
â”‚   â””â”€â”€ element-plus.ts                                          â­ æ–°å¢
â”‚
â”œâ”€â”€ GUI/
â”‚   â”œâ”€â”€ Index/
â”‚   â”‚   â””â”€â”€ ProjectPageSystem.vue                                â­ æ–°å¢
â”‚   â”‚
â”‚   â”œâ”€â”€ layouts/
â”‚   â”‚   â”œâ”€â”€ ProjectMainLayout.vue                                â­ æ–°å¢
â”‚   â”‚   â””â”€â”€ ProjectMainLayout.scss                               â­ æ–°å¢
â”‚   â”‚
â”‚   â”œâ”€â”€ PagesLayout/
â”‚   â”‚   â”œâ”€â”€ ProjectPage.Shell.vue                                â­ æ–°å¢
â”‚   â”‚   â”œâ”€â”€ ProjectPage.Shell.scss                               â­ æ–°å¢
â”‚   â”‚   â”œâ”€â”€ ProjectPage.MainPanel.vue                            â­ æ–°å¢
â”‚   â”‚   â””â”€â”€ ProjectPage.MainPanel.scss                           â­ æ–°å¢
â”‚   â”‚
â”‚   â””â”€â”€ components/
â”‚       â”œâ”€â”€ ProjectPage.Shell/                                   â­ æ–°å¢ç›®å½•
â”‚       â”‚   â”œâ”€â”€ Navbar/
â”‚       â”‚   â”‚   â””â”€â”€ ProjectNavbar.vue
â”‚       â”‚   â”œâ”€â”€ FileTree/
â”‚       â”‚   â”‚   â”œâ”€â”€ FileTreeToolbar.vue
â”‚       â”‚   â”‚   â””â”€â”€ FileTreeContent.vue
â”‚       â”‚   â””â”€â”€ Outline/
â”‚       â”‚       â””â”€â”€ OutlineContent.vue
â”‚       â”‚
â”‚       â””â”€â”€ ProjectPage.MainPanel/                               â­ æ–°å¢ç›®å½•
â”‚           â””â”€â”€ Markdown/
â”‚               â”œâ”€â”€ MarkdownTab.vue
â”‚               â”œâ”€â”€ MarkdownEditor.vue
â”‚               â””â”€â”€ MarkdownViewer.vue
â”‚
â””â”€â”€ stores/
    â””â”€â”€ projectPage/                                             â­ æ–°å¢æ¨¡å—
        â”œâ”€â”€ index.ts
        â””â”€â”€ Markdown/
            â”œâ”€â”€ index.ts
            â”œâ”€â”€ markdown.store.ts
            â”œâ”€â”€ markdown.mock.ts
            â””â”€â”€ types.ts
```

**åç«¯ï¼ˆsrc-electron/ï¼‰**

æ— æ–°å¢æ–‡ä»¶ï¼Œä»…ä¿®æ”¹ç°æœ‰æ–‡ä»¶

#### ä¿®æ”¹æ–‡ä»¶

```
âœï¸ Nimbria/package.json
âœï¸ Nimbria/quasar.config.ts
âœï¸ Nimbria/Client/GUI/router/routes.ts
âœï¸ Nimbria/src-electron/core/app-manager.ts
âœï¸ Nimbria/src-electron/services/window-service/window-manager.ts
âœï¸ Nimbria/src-electron/services/window-service/process-manager.ts
```

---

### B. ä¾èµ–å˜æ›´

**æ–°å¢ä¾èµ–**

```json
{
  "dependencies": {
    "element-plus": "^2.9.1",
    "@element-plus/icons-vue": "^2.3.1",
    "vditor": "^3.10.7"
  }
}
```

**ä¾èµ–ç”¨é€”**

| ä¾èµ– | ç”¨é€” | ä½¿ç”¨åœºæ™¯ |
|-----|------|---------|
| `element-plus` | UIç»„ä»¶åº“ | å®¹å™¨å¸ƒå±€ã€æ ‡ç­¾é¡µã€æ–‡ä»¶æ ‘ |
| `@element-plus/icons-vue` | Element Pluså›¾æ ‡åº“ | æ–‡ä»¶æ ‘å›¾æ ‡ã€å·¥å…·æ å›¾æ ‡ |
| `vditor` | Markdownç¼–è¾‘å™¨ | æ–‡æ¡£ç¼–è¾‘å’Œé¢„è§ˆ |

---

### C. è·¯å¾„åˆ«åé…ç½®

**quasar.config.ts**

```typescript
alias.push(
  { find: '@', replacement: path.resolve(__dirname, 'Client') },
  { find: '@types', replacement: path.resolve(__dirname, 'Client/types') },
  { find: '@components', replacement: path.resolve(__dirname, 'Client/GUI/components') },
  { find: '@layouts', replacement: path.resolve(__dirname, 'Client/GUI/layouts') },
  { find: '@pages', replacement: path.resolve(__dirname, 'Client/GUI/PagesLayout') },
  { find: '@stores', replacement: path.resolve(__dirname, 'Client/stores') },
  { find: '@index', replacement: path.resolve(__dirname, 'Client/GUI/Index') }
)
```

**ä½¿ç”¨ç¤ºä¾‹**

```typescript
// âœ… æ¨è
import { useMarkdownStore } from '@stores/projectPage'
import ProjectNavbar from '@components/ProjectPage.Shell/Navbar/ProjectNavbar.vue'
import type { MarkdownFile } from '@stores/projectPage/Markdown/types'

// âŒ ä¸æ¨è
import { useMarkdownStore } from '../../../stores/projectPage'
import ProjectNavbar from '../../components/ProjectPage.Shell/Navbar/ProjectNavbar.vue'
```

---

### D. CSSå˜é‡æ¸…å•

**Obsidianä¸»é¢˜å˜é‡**

```scss
.project-main-layout {
  --obsidian-bg-primary: #ffffff;       /* ä¸»èƒŒæ™¯è‰² */
  --obsidian-bg-secondary: #f5f6f8;     /* æ¬¡çº§èƒŒæ™¯è‰² */
  --obsidian-border: #e3e5e8;           /* è¾¹æ¡†é¢œè‰² */
  --obsidian-text-primary: #2e3338;     /* ä¸»æ–‡å­—é¢œè‰² */
  --obsidian-text-secondary: #6a6d74;   /* æ¬¡çº§æ–‡å­—é¢œè‰² */
  --obsidian-accent: #5b7fff;           /* å¼ºè°ƒè‰² */
  --obsidian-hover-bg: #e9e9e9;         /* æ‚¬åœèƒŒæ™¯è‰² */
  --obsidian-font-text: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  --obsidian-font-mono: 'Menlo', 'Consolas', monospace;
}
```

**ä½¿ç”¨æ–¹å¼**

```scss
.component {
  background: var(--obsidian-bg-primary);
  color: var(--obsidian-text-primary);
  border: 1px solid var(--obsidian-border);
}
```

---

### E. IPCé€šé“æ¸…å•

**çª—å£æ“ä½œé€šé“**

| é€šé“å | æ–¹å‘ | å‚æ•° | è¿”å›å€¼ | ç”¨é€” |
|-------|------|------|-------|------|
| `window:minimize` | Renderer â†’ Main | `{ windowId?: string }` | `void` | æœ€å°åŒ–çª—å£ |
| `window:maximize` | Renderer â†’ Main | `{ windowId?: string }` | `void` | æœ€å¤§åŒ–çª—å£ |
| `window:unmaximize` | Renderer â†’ Main | `{ windowId?: string }` | `void` | å–æ¶ˆæœ€å¤§åŒ– |
| `window:close` | Renderer â†’ Main | `{ windowId?: string }` | `void` | å…³é—­çª—å£ |
| `window:is-maximized` | Renderer â†’ Main | `{ windowId?: string }` | `boolean` | æŸ¥è¯¢æœ€å¤§åŒ–çŠ¶æ€ |

**è°ƒç”¨ç¤ºä¾‹**

```typescript
// Rendererè¿›ç¨‹
await window.nimbria.window.minimize()
await window.nimbria.window.maximize()
await window.nimbria.window.close()
const isMax = await window.nimbria.window.isMaximized()
```

---

## ä¸‹ä¸€é˜¶æ®µå·¥ä½œå»ºè®®

### ä¼˜å…ˆçº§1ï¼šä¿®å¤ç±»å‹å®šä¹‰ ğŸ”§

**é—®é¢˜**ï¼šå½“å‰ä½¿ç”¨ `as any` ç»•è¿‡ç±»å‹æ£€æŸ¥

**ä»»åŠ¡**ï¼š
1. æ£€æŸ¥ `Client/types/window.d.ts` ä¸­çš„ç±»å‹å®šä¹‰
2. ç¡®ä¿ä¸ `preload.ts` æš´éœ²çš„APIç»“æ„ä¸€è‡´
3. ç§»é™¤æ‰€æœ‰ `as any` æ–­è¨€

**é¢„æœŸæˆæœ**ï¼š
- å®Œæ•´çš„TypeScriptç±»å‹å®‰å…¨
- IDEè‡ªåŠ¨è¡¥å…¨æ”¯æŒ

---

### ä¼˜å…ˆçº§2ï¼šå®ç°çœŸå®æ–‡ä»¶ç³»ç»Ÿé›†æˆ ğŸ’¾

**å½“å‰çŠ¶æ€**ï¼šä½¿ç”¨Mockæ•°æ®

**ä»»åŠ¡**ï¼š
1. å®ç°æ–‡ä»¶ç³»ç»Ÿè¯»å–APIï¼ˆElectron Mainè¿›ç¨‹ï¼‰
2. åˆ›å»ºIPCé€šé“ç”¨äºæ–‡ä»¶æ“ä½œ
3. æ›¿æ¢Mockæ•°æ®ä¸ºçœŸå®æ–‡ä»¶æ ‘
4. å®ç°æ–‡ä»¶ä¿å­˜åŠŸèƒ½

**é¢„æœŸæˆæœ**ï¼š
- çœŸå®é¡¹ç›®æ–‡ä»¶ç®¡ç†
- æ–‡ä»¶å†…å®¹æŒä¹…åŒ–

---

### ä¼˜å…ˆçº§3ï¼šæ‰©å±•Markdownç¼–è¾‘åŠŸèƒ½ âœï¸

**å½“å‰çŠ¶æ€**ï¼šåŸºç¡€ç¼–è¾‘å’Œé¢„è§ˆ

**å¯é€‰åŠŸèƒ½**ï¼š
1. æ–‡ä»¶é‡å‘½åã€ç§»åŠ¨ã€åˆ é™¤
2. æ–°å»ºæ–‡ä»¶/æ–‡ä»¶å¤¹
3. æ–‡ä»¶æœç´¢
4. å®æ—¶åä½œï¼ˆå¤šçª—å£åŒæ­¥ï¼‰
5. å†å²ç‰ˆæœ¬ç®¡ç†

---

### ä¼˜å…ˆçº§4ï¼šæ€§èƒ½ä¼˜åŒ– âš¡

**æ½œåœ¨ä¼˜åŒ–ç‚¹**ï¼š
1. å¤§æ–‡ä»¶æ ‘çš„è™šæ‹Ÿæ»šåŠ¨
2. Vditoræ‡’åŠ è½½
3. æ ‡ç­¾é¡µå†…å®¹ç¼“å­˜ç­–ç•¥
4. æ–‡ä»¶å˜æ›´ç›‘å¬ä¼˜åŒ–

---

### ä¼˜å…ˆçº§5ï¼šæµ‹è¯•è¦†ç›– ğŸ§ª

**ä»»åŠ¡**ï¼š
1. å•å…ƒæµ‹è¯•ï¼šStoreé€»è¾‘æµ‹è¯•
2. ç»„ä»¶æµ‹è¯•ï¼šå…³é”®ç»„ä»¶çš„æ¸²æŸ“æµ‹è¯•
3. E2Eæµ‹è¯•ï¼šå®Œæ•´çš„ç”¨æˆ·æµç¨‹æµ‹è¯•
4. IPCé€šä¿¡æµ‹è¯•

---

## ç»“è¯­

æœ¬æ¬¡é›†æˆå·¥ä½œæˆåŠŸå°†Obsidiané£æ ¼çš„Markdownç¼–è¾‘å™¨åŸå‹è¿ç§»åˆ°Nimbriaä¸»åº”ç”¨ï¼Œå®ç°äº†ï¼š

âœ… **å¤šçª—å£æ¶æ„**ï¼šç‹¬ç«‹é¡¹ç›®çª—å£ï¼Œäº’ä¸å¹²æ‰°  
âœ… **æ¨¡å—åŒ–è®¾è®¡**ï¼šæ¸…æ™°çš„ç›®å½•ç»“æ„å’ŒèŒè´£åˆ’åˆ†  
âœ… **å¯å¤ç”¨ç»„ä»¶**ï¼šShellè®¾è®¡æ¨¡å¼å‡å°‘ä»£ç é‡å¤  
âœ… **ç±»å‹å®‰å…¨**ï¼šå®Œæ•´çš„TypeScriptç±»å‹å®šä¹‰ï¼ˆå¾…å®Œå–„ï¼‰  
âœ… **æ ·å¼éš”ç¦»**ï¼šObsidianä¸»é¢˜ä¸Quasarä¸»é¢˜å…±å­˜

é€šè¿‡æœ¬æ¬¡å®è·µï¼Œæˆ‘ä»¬æ€»ç»“å‡ºäº†æ ‡å‡†åŒ–çš„å·¥ä½œæµç¨‹ï¼Œä¸ºåç»­ç±»ä¼¼åŠŸèƒ½çš„å¼€å‘æä¾›äº†å¯å‚è€ƒçš„æ¨¡æ¿ã€‚

**å…³é”®ç»éªŒ**ï¼š
1. ğŸ”‘ Electronå¤šçª—å£éœ€è¦é€šè¿‡ `event.sender` ç²¾ç¡®è¯†åˆ«è°ƒç”¨æº
2. ğŸ”‘ Flexboxæ»šåŠ¨å®¹å™¨éœ€è¦ `min-height: 0` å’Œæ­£ç¡®çš„overflowæ§åˆ¶
3. ğŸ”‘ Vue SFCä¸­çš„CSSæ³¨é‡Šåº”ä½¿ç”¨ `/* */` è€Œé `//`
4. ğŸ”‘ åŸå‹è¿ç§»åº”ä¼˜å…ˆä¿ç•™åŸæŠ€æœ¯æ ˆå’Œå…³é”®å¸ƒå±€é€»è¾‘
5. ğŸ”‘ è·¯å¾„åˆ«åèƒ½æ˜¾è‘—æé«˜ä»£ç å¯ç»´æŠ¤æ€§

---

**æ–‡æ¡£ç”Ÿæˆæ—¶é—´**ï¼š2025å¹´10æœˆ6æ—¥  
**ä¸‹æ¬¡æ›´æ–°æ—¶æœº**ï¼šå®Œæˆä¼˜å…ˆçº§1-2ä»»åŠ¡å

---

*æ­¤æ–‡æ¡£ç”±Nimbriaå¼€å‘å›¢é˜Ÿç”Ÿæˆï¼ŒåŸºäºå®é™…å¼€å‘è¿‡ç¨‹æ€»ç»“ã€‚*

