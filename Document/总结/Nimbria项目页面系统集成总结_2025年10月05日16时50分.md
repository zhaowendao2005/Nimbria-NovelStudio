# Nimbriaé¡¹ç›®é¡µé¢ç³»ç»Ÿé›†æˆæ€»ç»“æŠ¥å‘Š
**ç”Ÿæˆæ—¶é—´ï¼š** 2025å¹´10æœˆ05æ—¥ 16:50  
**é¡¹ç›®ï¼š** Nimbria NovelStudio  
**å·¥ä½œä¸»é¢˜ï¼š** é›†æˆObsidiané£æ ¼Markdownç¼–è¾‘å™¨åŸå‹åˆ°ä¸»ç¨‹åºä½œä¸ºé¡¹ç›®é¡µé¢ç³»ç»Ÿ

---

## ğŸ“‹ ç›®å½•
1. [å·²å®ç°çš„åŠŸèƒ½](#å·²å®ç°çš„åŠŸèƒ½)
2. [æŠ€æœ¯å®ç°ç»†èŠ‚](#æŠ€æœ¯å®ç°ç»†èŠ‚)
3. [é¡¹ç›®è§„èŒƒä¸ä¹ æƒ¯](#é¡¹ç›®è§„èŒƒä¸ä¹ æƒ¯)
4. [è¸©å‘ä¸ç»éªŒæ€»ç»“](#è¸©å‘ä¸ç»éªŒæ€»ç»“)
5. [æ ‡å‡†å·¥ä½œæµç¨‹æ€»ç»“](#æ ‡å‡†å·¥ä½œæµç¨‹æ€»ç»“)

---

## å·²å®ç°çš„åŠŸèƒ½

### 1. é¡¹ç›®é¡µé¢ç³»ç»Ÿæ¶æ„æ­å»º âœ…
- **Shellè®¾è®¡æ¨¡å¼**ï¼šé‡‡ç”¨å¯å¤ç”¨çš„Shellç»„ä»¶æ¶æ„
  - `ProjectPage.Shell.vue`ï¼šå·¦å³æ é€šç”¨Shellï¼Œé€šè¿‡`type` propåŒºåˆ†
  - `ProjectPage.MainPanel.vue`ï¼šä¸­é—´ä¸»é¢æ¿ï¼ŒåŒ…å«Tabç³»ç»Ÿ
  - å‡å°‘æ–‡ä»¶æ•°é‡ï¼Œæé«˜å¤ç”¨æ€§

### 2. ä¸‰æ è‡ªé€‚åº”å¸ƒå±€ âœ…
- **Element Plusåˆ†éš”é¢æ¿**ï¼šå®ç°å¯æ‹–æ‹½çš„ä¸‰æ å¸ƒå±€
  - å·¦æ ï¼ˆ328pxï¼‰ï¼šå¯¼èˆªæ ï¼ˆ48pxï¼‰+ æ–‡ä»¶æ ‘ï¼ˆ280pxï¼‰
  - ä¸­æ ï¼ˆè‡ªé€‚åº”ï¼‰ï¼šMarkdownç¼–è¾‘/é¢„è§ˆåŒºåŸŸ
  - å³æ ï¼ˆ280pxï¼‰ï¼šæ–‡æ¡£å¤§çº²
- **æ‹–æ‹½åˆ†éš”å™¨**ï¼šæ”¯æŒåŠ¨æ€è°ƒæ•´æ å®½ï¼ˆ200-600pxèŒƒå›´ï¼‰

### 3. Markdownç¼–è¾‘å™¨é›†æˆ âœ…
- **Vditorå¼•æ“**ï¼šä»åŸå‹é¡¹ç›®å®Œæ•´è¿ç§»
  - `MarkdownEditor.vue`ï¼šæ‰€è§å³æ‰€å¾—ç¼–è¾‘å™¨
  - `MarkdownViewer.vue`ï¼šMarkdowné™æ€æ¸²æŸ“
  - `MarkdownTab.vue`ï¼šTabå®¹å™¨ + é¢åŒ…å±‘å¯¼èˆª + æ¨¡å¼åˆ‡æ¢
- **Tabç³»ç»Ÿ**ï¼šå¤šæ–‡ä»¶æ ‡ç­¾é¡µç®¡ç†
  - æ‰“å¼€/å…³é—­æ–‡ä»¶
  - ç¼–è¾‘/é¢„è§ˆæ¨¡å¼åˆ‡æ¢
  - æœªä¿å­˜çŠ¶æ€æ ‡è®°ï¼ˆisDirtyï¼‰

### 4. å ä½ç»„ä»¶æ¡†æ¶ âœ…
- **Shellç»„ä»¶**ï¼š
  - `ProjectNavbar.vue`ï¼šå·¦ä¾§çª„å¯¼èˆªæ ï¼ˆå ä½ï¼‰
  - `FileTreeToolbar.vue`ï¼šæ–‡ä»¶æ ‘å·¥å…·æ ï¼ˆå ä½ï¼‰
  - `FileTreeContent.vue`ï¼šæ–‡ä»¶æ ‘å†…å®¹ï¼ˆå ä½ï¼‰
  - `OutlineContent.vue`ï¼šæ–‡æ¡£å¤§çº²ï¼ˆå ä½ï¼‰

### 5. çŠ¶æ€ç®¡ç†ï¼ˆPiniaï¼‰ âœ…
- **æ¨¡å—åŒ–Storeæ¶æ„**ï¼š
  - `stores/projectPage/Markdown/markdown.store.ts`ï¼šMarkdownçŠ¶æ€
  - `stores/projectPage/Markdown/markdown.mock.ts`ï¼šMockæ•°æ®
  - `stores/projectPage/Markdown/types.ts`ï¼šç±»å‹å®šä¹‰
- **çŠ¶æ€å†…å®¹**ï¼š
  - æ–‡ä»¶æ ‘æ•°æ®ï¼ˆfileTreeï¼‰
  - æ‰“å¼€çš„Tabåˆ—è¡¨ï¼ˆopenTabsï¼‰
  - å½“å‰æ´»åŠ¨Tabï¼ˆactiveTabIdï¼‰
  - å¯¼èˆªå†å²ï¼ˆnavigationHistoryï¼‰

### 6. è·¯ç”±é…ç½® âœ…
- **å‘½åè§†å›¾ï¼ˆNamed Viewsï¼‰**ï¼šå®ç°ä¸‰æ å†…å®¹è·¯ç”±æ§åˆ¶
  ```typescript
  {
    path: '/project',
    components: {
      left: ProjectPage.Shell,    // props: { type: 'left' }
      center: ProjectPage.MainPanel,
      right: ProjectPage.Shell     // props: { type: 'right' }
    }
  }
  ```

### 7. çª—å£æ§åˆ¶ç³»ç»Ÿ âœ…
- **è‡ªå®šä¹‰æ ‡é¢˜æ **ï¼šæ›¿ä»£ç³»ç»Ÿé»˜è®¤æ ‡é¢˜æ 
  - æœ€å°åŒ–æŒ‰é’®
  - æœ€å¤§åŒ–/è¿˜åŸæŒ‰é’®ï¼ˆå›¾æ ‡åŠ¨æ€åˆ‡æ¢ï¼‰
  - å…³é—­æŒ‰é’®
  - çª—å£æ‹–æ‹½åŒºåŸŸï¼ˆ`q-electron-drag`ï¼‰
- **çª—å£è¯†åˆ«ä¿®å¤**ï¼šé€šè¿‡`event.sender`æ­£ç¡®è¯†åˆ«å½“å‰æ“ä½œçª—å£
  - ä¿®å¤äº†é¡¹ç›®çª—å£æŒ‰é’®é”™è¯¯æ“ä½œä¸»çª—å£çš„bug

### 8. å¼€å‘ç¯å¢ƒå¢å¼º âœ…
- **DevToolsè‡ªåŠ¨æ‰“å¼€**ï¼šé¡¹ç›®çª—å£å¼€å‘æ¨¡å¼è‡ªåŠ¨æ‰“å¼€è°ƒè¯•å·¥å…·
- **é¡¹ç›®è·¯ç”±åŠ è½½**ï¼šé¡¹ç›®çª—å£æ­£ç¡®åŠ è½½`#/project`è·¯ç”±

---

## æŠ€æœ¯å®ç°ç»†èŠ‚

### ä½¿ç”¨çš„æ¡†æ¶ä¸åº“

#### å‰ç«¯æŠ€æœ¯æ ˆ
| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| Vue 3 | - | å‰ç«¯æ¡†æ¶ï¼ˆComposition APIï¼‰ |
| Quasar | - | ä¸»UIæ¡†æ¶ï¼ˆç”¨äºçª—å£æ§åˆ¶æ ï¼‰ |
| Element Plus | ^2.9.1 | è¾…åŠ©UIæ¡†æ¶ï¼ˆåˆ†éš”é¢æ¿ã€Tabç³»ç»Ÿï¼‰ |
| @element-plus/icons-vue | ^2.3.1 | Element Pluså›¾æ ‡åº“ |
| Vditor | ^3.10.7 | Markdownç¼–è¾‘å™¨å¼•æ“ |
| Pinia | - | çŠ¶æ€ç®¡ç† |
| Vue Router | - | è·¯ç”±ç®¡ç† |

#### åç«¯æŠ€æœ¯æ ˆ
| æŠ€æœ¯ | ç”¨é€” |
|------|------|
| Electron | æ¡Œé¢åº”ç”¨æ¡†æ¶ |
| IPCé€šä¿¡ | æ¸²æŸ“è¿›ç¨‹ â†” ä¸»è¿›ç¨‹é€šä¿¡ |
| MessagePort | è¿›ç¨‹é—´æ¶ˆæ¯ä¼ é€’ |

### æ ¸å¿ƒAPIä¸æ–¹æ³•

#### Electronä¸»è¿›ç¨‹ IPC Handlers
```typescript
// çª—å£æ§åˆ¶ç›¸å…³
ipcMain.handle('window:minimize', ...)     // æœ€å°åŒ–çª—å£
ipcMain.handle('window:maximize', ...)     // æœ€å¤§åŒ–çª—å£
ipcMain.handle('window:unmaximize', ...)   // è¿˜åŸçª—å£
ipcMain.handle('window:close', ...)        // å…³é—­çª—å£
ipcMain.handle('window:is-maximized', ...) // æŸ¥è¯¢æœ€å¤§åŒ–çŠ¶æ€

// é¡¹ç›®çª—å£ç®¡ç†
ipcMain.handle('project:create-window', ...) // åˆ›å»ºé¡¹ç›®çª—å£
```

#### å‰ç«¯Preloadæš´éœ²çš„API
```typescript
window.nimbria.window.minimize()      // æœ€å°åŒ–
window.nimbria.window.maximize()      // æœ€å¤§åŒ–
window.nimbria.window.unmaximize()    // è¿˜åŸ
window.nimbria.window.close()         // å…³é—­
window.nimbria.window.isMaximized()   // æŸ¥è¯¢çŠ¶æ€
```

#### æ ¸å¿ƒæœåŠ¡æ–¹æ³•

**AppManager (`app-manager.ts`)**
```typescript
// æ–°å¢æ–¹æ³•
loadProjectWindow(windowProcess)                    // åŠ è½½é¡¹ç›®çª—å£URL
handleWindowOperationFromEvent(event, operation)    // ä»eventè¯†åˆ«çª—å£æ‰§è¡Œæ“ä½œ
resolveWindowProcessFromEvent(event, windowId?)     // ä»event.senderè§£æçª—å£è¿›ç¨‹
```

**WindowManager (`window-manager.ts`)**
```typescript
// æ–°å¢æ–¹æ³•
getProcessByWindowId(windowId: number)  // é€šè¿‡BrowserWindow.idæŸ¥æ‰¾è¿›ç¨‹
```

**ProcessManager (`process-manager.ts`)**
```typescript
// æ–°å¢æ–¹æ³•
getProcessByWindowId(windowId: number)  // éå†è¿›ç¨‹æ˜ å°„æŸ¥æ‰¾åŒ¹é…çª—å£
```

#### Pinia Storeæ–¹æ³•
```typescript
// markdown.store.ts
initializeFileTree()           // åˆå§‹åŒ–æ–‡ä»¶æ ‘ï¼ˆåŠ è½½mockæ•°æ®ï¼‰
openFile(filePath)            // æ‰“å¼€æ–‡ä»¶åˆ°æ–°Tab
closeTab(tabId)               // å…³é—­æŒ‡å®šTab
switchTab(tabId)              // åˆ‡æ¢æ´»åŠ¨Tab
updateTabContent(tabId, content) // æ›´æ–°Tabå†…å®¹
toggleTabMode(tabId)          // åˆ‡æ¢ç¼–è¾‘/é¢„è§ˆæ¨¡å¼
navigateToFile(filePath)      // å¯¼èˆªåˆ°æ–‡ä»¶ï¼ˆæ·»åŠ å†å²è®°å½•ï¼‰
canGoBack / canGoForward      // å¯¼èˆªå†å²æŸ¥è¯¢
goBack / goForward            // å†å²å‰è¿›åé€€
```

---

## é¡¹ç›®è§„èŒƒä¸ä¹ æƒ¯

### ç›®å½•ç»“æ„è§„èŒƒ

#### æºä»£ç ä¸¥æ ¼åˆ†ç¦»
```
D:\code\Large-scale integrated projec\Nimbria-NovelStudio\
â”œâ”€â”€ Nimbria\                          # æºä»£ç ç›®å½•ï¼ˆä¸å«æ–‡æ¡£ï¼‰
â”‚   â”œâ”€â”€ Client\                       # å‰ç«¯ä»£ç 
â”‚   â”‚   â”œâ”€â”€ GUI\                      # è§†å›¾å±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ Index\                # ç³»ç»Ÿå…¥å£ç‚¹
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ HomeSystem.vue
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ProjectPageSystem.vue    # âœ… æ–°å¢
â”‚   â”‚   â”‚   â”œâ”€â”€ layouts\              # å¸ƒå±€å®¹å™¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ MainLayout.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProjectMainLayout.vue    # âœ… æ–°å¢
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ProjectMainLayout.scss   # âœ… æ–°å¢
â”‚   â”‚   â”‚   â”œâ”€â”€ PagesLayout\          # é¡µé¢çº§ç»„ä»¶
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProjectPage.Shell.vue           # âœ… æ–°å¢ï¼ˆå¤ç”¨ï¼‰
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProjectPage.Shell.scss          # âœ… æ–°å¢
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProjectPage.MainPanel.vue       # âœ… æ–°å¢
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ProjectPage.MainPanel.scss      # âœ… æ–°å¢
â”‚   â”‚   â”‚   â””â”€â”€ components\           # ä¸šåŠ¡ç»„ä»¶
â”‚   â”‚   â”‚       â”œâ”€â”€ ProjectPage.Shell\              # âœ… æ–°å¢ç›®å½•
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ Navbar\
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ FileTree\
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ Outline\
â”‚   â”‚   â”‚       â””â”€â”€ ProjectPage.MainPanel\          # âœ… æ–°å¢ç›®å½•
â”‚   â”‚   â”‚           â””â”€â”€ Markdown\
â”‚   â”‚   â”œâ”€â”€ stores\                   # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ projectPage\          # âœ… æ–°å¢æ¨¡å—
â”‚   â”‚   â”‚       â””â”€â”€ Markdown\         # âœ… ä¸šåŠ¡å­æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ types\                    # ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ boot\                     # Quasarå¯åŠ¨æ–‡ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ element-plus.ts       # âœ… æ–°å¢
â”‚   â”‚   â””â”€â”€ Utils\                    # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ src-electron\                 # Electronä¸»è¿›ç¨‹
â”‚       â”œâ”€â”€ core\
â”‚       â”‚   â””â”€â”€ app-manager.ts        # âœ… ä¿®æ”¹
â”‚       â””â”€â”€ services\
â”‚           â””â”€â”€ window-service\
â”‚               â”œâ”€â”€ window-manager.ts # âœ… ä¿®æ”¹
â”‚               â””â”€â”€ process-manager.ts # âœ… ä¿®æ”¹
â””â”€â”€ Document\                         # æ–‡æ¡£ç›®å½•ï¼ˆä¸å«æºä»£ç ï¼‰
    â”œâ”€â”€ Design\
    â”‚   â””â”€â”€ é›†æˆObsidiané£æ ¼çš„é¡¹ç›®ç®¡ç†é¡µ\
    â”‚       â””â”€â”€ Design.md             # âœ… è®¾è®¡æ–‡æ¡£
    â””â”€â”€ æ€»ç»“\
        â””â”€â”€ [æœ¬æ–‡ä»¶]
```

#### å…³é”®è§„èŒƒ
1. **ä¸¥æ ¼ç¦æ­¢**ï¼šæ ¹ç›®å½•å­˜æ”¾æºä»£ç ï¼ˆé™¤é…ç½®æ–‡ä»¶å¤–ï¼‰
2. **æºä»£ç ä½ç½®**ï¼š`Nimbria\` ç›®å½•
3. **æ–‡æ¡£ä½ç½®**ï¼š`Document\` ç›®å½•
4. **å‚è€ƒé¡¹ç›®ä½ç½®**ï¼š`Reference\` ç›®å½•

### æ–‡ä»¶å‘½åè§„èŒƒ

#### Vueç»„ä»¶
- **PascalCase**ï¼š`ProjectMainLayout.vue`ã€`FileTreeContent.vue`
- **é¡µé¢çº§ç»„ä»¶åç¼€è§„èŒƒ**ï¼š
  - Systemå…¥å£ï¼š`*System.vue`ï¼ˆå¦‚`ProjectPageSystem.vue`ï¼‰
  - Layoutå®¹å™¨ï¼š`*Layout.vue`ï¼ˆå¦‚`ProjectMainLayout.vue`ï¼‰
  - PagesLayoutï¼š`*Page.*.vue`ï¼ˆå¦‚`ProjectPage.Shell.vue`ï¼‰

#### æ ·å¼æ–‡ä»¶
- **ä¸ç»„ä»¶åŒå**ï¼š`ProjectMainLayout.scss` å¯¹åº” `ProjectMainLayout.vue`
- **åˆ†ç¦»å…³æ³¨ç‚¹**ï¼š
  - `layouts/*.scss`ï¼šå¸ƒå±€æ ·å¼ï¼ˆflexã€overflowã€é«˜åº¦ï¼‰
  - `PagesLayout/*.scss`ï¼šè§†è§‰æ ·å¼ï¼ˆé¢œè‰²ã€èƒŒæ™¯ã€è¾¹æ¡†ï¼‰

#### ç›®å½•å‘½å
- **ä¿æŒç®€æ´**ï¼š`components`ã€`layouts`ã€`stores`
- **ä¸šåŠ¡æ¨¡å—åŒ–**ï¼š`ProjectPage.Shell/`ã€`ProjectPage.MainPanel/`
- **çŠ¶æ€å­æ¨¡å—**ï¼š`stores/projectPage/Markdown/`

### å¯¼å…¥è·¯å¾„è§„èŒƒ

#### è·¯å¾„åˆ«åé…ç½®ï¼ˆ`quasar.config.ts`ï¼‰
```typescript
alias: {
  '@types': path.resolve(__dirname, 'Client/types'),
  '@components': path.resolve(__dirname, 'Client/GUI/components'),
  '@layouts': path.resolve(__dirname, 'Client/GUI/layouts'),
  '@pages': path.resolve(__dirname, 'Client/GUI/PagesLayout'),
  '@index': path.resolve(__dirname, 'Client/GUI/Index'),
  '@stores': path.resolve(__dirname, 'Client/stores'),
  '@utils': path.resolve(__dirname, 'Client/Utils'),
}
```

#### å¯¼å…¥ç¤ºä¾‹
```typescript
// âœ… æ­£ç¡®ï¼šä½¿ç”¨åˆ«å
import ProjectNavbar from '@components/ProjectPage.Shell/Navbar/ProjectNavbar.vue'
import { useMarkdownStore } from '@stores/projectPage'
import type { MarkdownFile } from '@types/markdown'

// âŒ é”™è¯¯ï¼šè·¨çˆ¶ç›®å½•ç›¸å¯¹è·¯å¾„
import ProjectNavbar from '../../../components/ProjectPage.Shell/Navbar/ProjectNavbar.vue'
```

### TypeScriptç±»å‹è§„èŒƒ

#### ç±»å‹æ–‡ä»¶ç»„ç»‡
```
Client/types/
â”œâ”€â”€ core/              # æ ¸å¿ƒç³»ç»Ÿç±»å‹ï¼ˆwindowã€nimbriaï¼‰
â”œâ”€â”€ domain/            # é¢†åŸŸç±»å‹ï¼ˆprojectã€filesystemï¼‰
â””â”€â”€ shared/            # å…±äº«å·¥å…·ç±»å‹

stores/projectPage/Markdown/
â””â”€â”€ types.ts           # æ¨¡å—ä¸“ç”¨ç±»å‹
```

#### ç±»å‹å¯¼å…¥
```typescript
// æ ¸å¿ƒç±»å‹
import type { Project, Chapter } from '@types/domain/project'

// æ¨¡å—ç±»å‹
import type { MarkdownFile, MarkdownTab } from '@stores/projectPage/Markdown/types'
```

### CSSæ¶æ„è§„èŒƒ

#### Flexå¸ƒå±€é»„é‡‘é“¾è·¯
```scss
// 1ï¸âƒ£ æ ¹å®¹å™¨ï¼šå›ºå®šé«˜åº¦ + flexåˆ—å¸ƒå±€
.root {
  height: 100vh;
  display: flex;
  flex-direction: column;
  overflow: hidden;  // ç¦æ­¢æ»šåŠ¨
}

// 2ï¸âƒ£ å­å®¹å™¨ï¼šflexå æ®å‰©ä½™ç©ºé—´ + min-height: 0
.content {
  flex: 1;
  min-height: 0;     // ğŸ”‘ å…³é”®ï¼å…è®¸flexå‹ç¼©
  overflow: hidden;  // é“¾å¼ä¼ é€’
}

// 3ï¸âƒ£ å¯æ»šåŠ¨åŒºåŸŸï¼šoverflow-y: auto
.scrollable {
  flex: 1;
  min-height: 0;
  overflow-y: auto;  // âœ… æœ€ç»ˆæ»šåŠ¨ç‚¹
}
```

#### ä¸‰å¤§æ ¸å¿ƒåŸåˆ™
1. **min-height: 0**ï¼šæ¯å±‚flexå­å…ƒç´ å¿…é¡»è®¾ç½®
2. **overflow: hiddené“¾**ï¼šä»æ ¹åˆ°æ»šåŠ¨çˆ¶å…ƒç´ ä¿æŒhidden
3. **!importantè¦†ç›–**ï¼šè¦†ç›–UIæ¡†æ¶é»˜è®¤æ ·å¼æ—¶ä½¿ç”¨

---

## è¸©å‘ä¸ç»éªŒæ€»ç»“

### 1. CSSæ³¨é‡Šè¯­æ³•é”™è¯¯ âš ï¸

**é”™è¯¯ç°è±¡ï¼š**
```
[postcss] Unknown word //
```

**åŸå› åˆ†æï¼š**
- CSSä¸æ”¯æŒ`//`å•è¡Œæ³¨é‡Šï¼Œåªæ”¯æŒ`/* */`æ³¨é‡Š
- SCSSæ”¯æŒ`//`ï¼Œä½†åœ¨`<style scoped>`ä¸­å¯èƒ½è¢«å½“ä½œCSSå¤„ç†

**è§£å†³æ–¹æ¡ˆï¼š**
```scss
// âŒ é”™è¯¯
min-height: 0; // å…³é”®ï¼

// âœ… æ­£ç¡®
min-height: 0; /* å…³é”®ï¼ */
```

**ç»éªŒæ€»ç»“ï¼š**
- Vueå•æ–‡ä»¶ç»„ä»¶ä¸­ç»Ÿä¸€ä½¿ç”¨`/* */`æ³¨é‡Š
- å³ä½¿ä½¿ç”¨`lang="scss"`ï¼Œä¹Ÿå»ºè®®ä½¿ç”¨`/* */`ä»¥é¿å…å¤„ç†å™¨å·®å¼‚

---

### 2. çª—å£æ§åˆ¶æŒ‰é’®æ“ä½œé”™è¯¯çª—å£ ğŸ›

**é”™è¯¯ç°è±¡ï¼š**
- ç‚¹å‡»é¡¹ç›®çª—å£çš„æœ€å°åŒ–/å…³é—­æŒ‰é’®
- å®é™…è¢«æœ€å°åŒ–/å…³é—­çš„æ˜¯ä¸»çª—å£

**é—®é¢˜æ ¹å› ï¼š**
```typescript
// project-preload.ts ä¼ é€’ç©ºå¯¹è±¡
minimize: () => ipcRenderer.invoke('window:minimize', {})

// app-manager.ts é»˜è®¤è¿”å›ä¸»çª—å£
private resolveWindowProcess(windowId?: string) {
  if (!windowId) {
    return this.getMainProcess()  // âš ï¸ æ²¡æœ‰windowIdæ—¶è¿”å›ä¸»çª—å£
  }
  return this.windowManager.getProcess(windowId)
}
```

**è§£å†³æ–¹æ¡ˆï¼š**
1. **ä½¿ç”¨event.senderè¯†åˆ«çª—å£**ï¼š
   ```typescript
   ipcMain.handle('window:minimize', async (event, request) => {
     return this.handleWindowOperationFromEvent(event, 'minimize', request)
   })
   ```

2. **æ–°å¢çª—å£è¯†åˆ«æ–¹æ³•**ï¼š
   ```typescript
   private resolveWindowProcessFromEvent(
     event: Electron.IpcMainInvokeEvent,
     windowId?: string
   ): WindowProcess | null {
     if (windowId) return this.windowManager.getProcess(windowId)
     
     const senderWindow = BrowserWindow.fromWebContents(event.sender)
     return this.windowManager.getProcessByWindowId(senderWindow.id)
   }
   ```

3. **åœ¨WindowManager/ProcessManagerä¸­æ·»åŠ æ”¯æŒ**ï¼š
   ```typescript
   // window-manager.ts
   public getProcessByWindowId(windowId: number): WindowProcess | null {
     return this.processManager.getProcessByWindowId(windowId)
   }
   
   // process-manager.ts
   public getProcessByWindowId(windowId: number): WindowProcess | null {
     for (const entry of this.processes.values()) {
       if (entry.process.window.id === windowId) {
         return entry.process
       }
     }
     return null
   }
   ```

**ç»éªŒæ€»ç»“ï¼š**
- **IPCé€šä¿¡ä¸­ä¸è¦ä¾èµ–å¯é€‰å‚æ•°**ï¼šå¯é€‰å‚æ•°å¯èƒ½å¯¼è‡´é»˜è®¤è¡Œä¸ºé”™è¯¯
- **ä¼˜å…ˆä½¿ç”¨eventå¯¹è±¡**ï¼š`event.sender`å¯ä»¥å¯é åœ°è¯†åˆ«å‘é€è€…
- **åˆ†å±‚å®ç°**ï¼šåœ¨Managerå±‚æä¾›é€šç”¨æŸ¥è¯¢æ–¹æ³•ï¼ŒAppManagerå±‚è°ƒç”¨

---

### 3. TypeScriptç±»å‹é”™è¯¯ï¼šwindow.nimbria.windowä¸å­˜åœ¨ âš ï¸

**é”™è¯¯ç°è±¡ï¼š**
```
ç±»å‹"{ fs: ...; file: ...; project: ... }"ä¸Šä¸å­˜åœ¨å±æ€§"window"ã€‚
```

**åŸå› åˆ†æï¼š**
- TypeScript linteræœªæ­£ç¡®è¯†åˆ«preloadä¸­æš´éœ²çš„window API
- `window.nimbria`çš„ç±»å‹å®šä¹‰å¯èƒ½æœ‰å»¶è¿ŸåŠ è½½é—®é¢˜

**ä¸´æ—¶è§£å†³æ–¹æ¡ˆï¼š**
```typescript
// ä½¿ç”¨ç±»å‹æ–­è¨€
const nimbriaAPI = window.nimbria as any
if (nimbriaAPI?.window?.minimize) {
  await nimbriaAPI.window.minimize()
}
```

**æ­£ç¡®è§£å†³æ–¹æ¡ˆï¼š**
- ç¡®ä¿`Client/types/core/nimbria.d.ts`å’Œ`window.d.ts`æ­£ç¡®å£°æ˜
- åœ¨`tsconfig.json`ä¸­åŒ…å«ç±»å‹å£°æ˜æ–‡ä»¶
- æ£€æŸ¥preloadæ˜¯å¦æ­£ç¡®æš´éœ²API

**ç»éªŒæ€»ç»“ï¼š**
- TypeScriptç±»å‹å£°æ˜ä¸è¿è¡Œæ—¶å®ç°è¦ä¿æŒåŒæ­¥
- ä½¿ç”¨`as any`åªæ˜¯ä¸´æ—¶æ–¹æ¡ˆï¼Œåº”ä¿®å¤ç±»å‹å®šä¹‰

---

### 4. Flexå¸ƒå±€æ»šåŠ¨å¤±æ•ˆ âš ï¸

**é”™è¯¯ç°è±¡ï¼š**
- è®¾ç½®äº†`overflow-y: auto`ï¼Œä½†å†…å®¹æº¢å‡ºä¸æ˜¾ç¤ºæ»šåŠ¨æ¡
- æˆ–è€…æ•´ä¸ªé¡µé¢æ»šåŠ¨è€Œä¸æ˜¯æŒ‡å®šåŒºåŸŸæ»šåŠ¨

**åŸå› åˆ†æï¼š**
- çˆ¶å…ƒç´ æ²¡æœ‰é™åˆ¶é«˜åº¦ï¼Œå­å…ƒç´ å¯ä»¥æ— é™æ‰©å±•
- ç¼ºå°‘`min-height: 0`å¯¼è‡´flexå­å…ƒç´ ä¸å‹ç¼©

**è§£å†³æ–¹æ¡ˆï¼ˆé»„é‡‘é“¾è·¯ï¼‰ï¼š**
```scss
// çˆ¶å®¹å™¨é“¾
.layout {
  height: 100vh;
  display: flex;
  flex-direction: column;
  overflow: hidden;  // 1ï¸âƒ£
}

.content {
  flex: 1;
  min-height: 0;     // 2ï¸âƒ£ å…³é”®ï¼
  overflow: hidden;  // 3ï¸âƒ£
}

.panel {
  height: 100%;
  display: flex;
  flex-direction: column;
  overflow: hidden;  // 4ï¸âƒ£
}

// æœ€ç»ˆæ»šåŠ¨åŒºåŸŸ
.scrollable {
  flex: 1;
  min-height: 0;     // 5ï¸âƒ£
  overflow-y: auto;  // âœ… ç»ˆç‚¹
}
```

**ç»éªŒæ€»ç»“ï¼š**
- **ä»æ ¹åˆ°å¶é€å±‚æ£€æŸ¥**ï¼šç¡®ä¿æ¯ä¸€å±‚éƒ½ç¬¦åˆflexè§„åˆ™
- **ä½¿ç”¨å¼€å‘è€…å·¥å…·**ï¼šæ£€æŸ¥å…ƒç´ å®é™…é«˜åº¦ï¼Œå®šä½å“ªä¸€å±‚å‡ºé—®é¢˜
- **è®°ä½å£è¯€**ï¼š"overflow hiddené“¾ï¼Œmin-heightæ¯å±‚ï¼Œautoåœ¨ç»ˆç‚¹"

---

### 5. Element Plusæ ·å¼è¦†ç›–é—®é¢˜ âš ï¸

**é”™è¯¯ç°è±¡ï¼š**
- è®¾ç½®äº†`min-height: 0`ï¼Œä½†Element Plusçš„Tabå†…å®¹åŒºåŸŸä»ç„¶ä¸å‹ç¼©

**åŸå› åˆ†æï¼š**
- Element Plusç»„ä»¶æœ‰é»˜è®¤çš„`min-height`æ ·å¼
- éœ€è¦ä½¿ç”¨`!important`è¦†ç›–

**è§£å†³æ–¹æ¡ˆï¼š**
```scss
.markdown-tabs {
  :deep(.el-tabs__content) {
    flex: 1;
    min-height: 0 !important;  // âœ… å¿…é¡»!important
    overflow: hidden;
  }
}
```

**ç»éªŒæ€»ç»“ï¼š**
- UIæ¡†æ¶ç»„ä»¶æ ·å¼é€šå¸¸æœ‰è¾ƒé«˜ä¼˜å…ˆçº§
- ä½¿ç”¨`:deep()`ç©¿é€ç»„ä»¶æ ·å¼
- å¿…è¦æ—¶ä½¿ç”¨`!important`ï¼Œä½†è¦æ³¨é‡Šè¯´æ˜åŸå› 

---

### 6. è·¯ç”±å‘½åè§†å›¾propsä¼ é€’ ğŸ“

**å®ç°è¦ç‚¹ï¼š**
```typescript
// routes.ts
{
  path: '',
  components: {
    left: () => import('@pages/ProjectPage.Shell.vue'),
    center: () => import('@pages/ProjectPage.MainPanel.vue'),
    right: () => import('@pages/ProjectPage.Shell.vue')
  },
  props: {
    left: { type: 'left' },    // âœ… ä¸ºå‘½åè§†å›¾ä¼ é€’props
    center: {},
    right: { type: 'right' }
  }
}
```

**ç»éªŒæ€»ç»“ï¼š**
- å‘½åè§†å›¾çš„`props`å¿…é¡»æ˜¯å¯¹è±¡ï¼Œæ¯ä¸ªkeyå¯¹åº”ä¸€ä¸ªè§†å›¾
- åˆ©ç”¨propså¯ä»¥å®ç°ç»„ä»¶å¤ç”¨ï¼Œå‡å°‘é‡å¤ä»£ç 

---

### 7. æ–°ä¾èµ–åŒ…å®‰è£…è§„èŒƒ ğŸ“¦

**æ­£ç¡®æµç¨‹ï¼š**
1. **ç›´æ¥ä¿®æ”¹`package.json`**ï¼Œä¸ä½¿ç”¨`npm install <package>`
2. **æä¾›æ¸…æ™°çš„ä¾èµ–åˆ—è¡¨**ç»™ç”¨æˆ·
3. **ç”¨æˆ·ç»Ÿä¸€æ‰§è¡Œå®‰è£…**ï¼š`npm install`

**æœ¬æ¬¡æ–°å¢ä¾èµ–ï¼š**
```json
{
  "element-plus": "^2.9.1",
  "@element-plus/icons-vue": "^2.3.1",
  "vditor": "^3.10.7"
}
```

**ç»éªŒæ€»ç»“ï¼š**
- é¿å…AIæ‰§è¡Œ`npm install`ï¼ˆå¯èƒ½å› ç¯å¢ƒé—®é¢˜å¤±è´¥ï¼‰
- æ‰¹é‡å®‰è£…ä¾èµ–æ›´é«˜æ•ˆ
- ä¿®æ”¹package.jsonåæé†’ç”¨æˆ·æ‰§è¡Œå®‰è£…

---

### 8. Quasar Bootæ–‡ä»¶æ³¨å†Œ ğŸš€

**æ–°å¢Bootæ–‡ä»¶æ­¥éª¤ï¼š**
1. **åˆ›å»ºbootæ–‡ä»¶**ï¼š`Client/boot/element-plus.ts`
2. **åœ¨`quasar.config.ts`ä¸­æ³¨å†Œ**ï¼š
   ```typescript
   boot: [
     'axios',
     'framework-init',
     'element-plus'  // âœ… æ–°å¢
   ]
   ```

**ç»éªŒæ€»ç»“ï¼š**
- Bootæ–‡ä»¶ç”¨äºå…¨å±€åˆå§‹åŒ–ï¼ˆæ’ä»¶æ³¨å†Œã€é…ç½®ç­‰ï¼‰
- æŒ‰é¡ºåºæ‰§è¡Œï¼Œæ³¨æ„ä¾èµ–å…³ç³»
- Element Pluséœ€è¦å…¨å±€æ³¨å†Œæ‰èƒ½åœ¨æ‰€æœ‰ç»„ä»¶ä¸­ä½¿ç”¨

---

## æ ‡å‡†å·¥ä½œæµç¨‹æ€»ç»“

### æ–°åŠŸèƒ½é›†æˆé€šç”¨æµç¨‹ï¼ˆä»¥æœ¬æ¬¡ä¸ºä¾‹ï¼‰

#### é˜¶æ®µ1ï¼šéœ€æ±‚åˆ†æä¸è®¾è®¡ ğŸ“‹

**æ­¥éª¤1.1ï¼šç†è§£åŸå‹ä¸ç›®æ ‡**
- åˆ†æåŸå‹é¡¹ç›®ç»“æ„ï¼ˆ`Reference/Reference-Page/ReferencePage`ï¼‰
- ç¡®å®šæŠ€æœ¯æ ˆå·®å¼‚ï¼ˆæœ¬ä¾‹ï¼šåŸå‹ç”¨Element Plusï¼Œä¸»ç¨‹åºç”¨Quasarï¼‰
- å†³å®šé›†æˆç­–ç•¥ï¼ˆæœ¬ä¾‹ï¼šä¿ç•™åŸå‹æŠ€æœ¯æ ˆï¼Œä¸¤æ¡†æ¶å…±å­˜ï¼‰

**æ­¥éª¤1.2ï¼šæ¶æ„è®¾è®¡**
- è®¾è®¡ç›®å½•ç»“æ„ï¼ˆéµå¾ªé¡¹ç›®è§„èŒƒï¼‰
- è®¾è®¡ç»„ä»¶å±‚çº§ï¼ˆIndex â†’ Layout â†’ PagesLayout â†’ Componentsï¼‰
- è®¾è®¡çŠ¶æ€ç®¡ç†ï¼ˆæ¨¡å—åŒ–Storeï¼‰
- è®¾è®¡è·¯ç”±ç»“æ„ï¼ˆå‘½åè§†å›¾ vs åµŒå¥—è·¯ç”±ï¼‰

**æ­¥éª¤1.3ï¼šåˆ›å»ºè®¾è®¡æ–‡æ¡£**
- æ–‡æ¡£ä½ç½®ï¼š`Document/Design/åŠŸèƒ½åç§°/Design.md`
- å†…å®¹åŒ…æ‹¬ï¼š
  - ç›®æ ‡ç›®å½•ç»“æ„
  - æ¶æ„å±‚çº§å›¾
  - æ–‡ä»¶è¿ç§»æ¸…å•
  - æŠ€æœ¯å†³ç­–è¯´æ˜
  - æ½œåœ¨é£é™©ç‚¹

**æœ¬é˜¶æ®µäº§å‡ºï¼š**
- âœ… `Design.md`è®¾è®¡æ–‡æ¡£
- âœ… ç›®å½•ç»“æ„è§„åˆ’
- âœ… æ–‡ä»¶æ¸…å•ï¼ˆ13ä¸ªæ–°æ–‡ä»¶ï¼‰

---

#### é˜¶æ®µ2ï¼šåŸºç¡€ç¯å¢ƒå‡†å¤‡ ğŸ› ï¸

**æ­¥éª¤2.1ï¼šä¾èµ–åŒ…ç®¡ç†**
```bash
# 1. ä¿®æ”¹ package.json
# 2. æä¾›ä¾èµ–åˆ—è¡¨ç»™ç”¨æˆ·
# 3. ç”¨æˆ·æ‰§è¡Œï¼š npm install
```

**æ­¥éª¤2.2ï¼šé…ç½®Quasar**
- æ·»åŠ Bootæ–‡ä»¶ï¼ˆå¦‚`element-plus.ts`ï¼‰
- é…ç½®è·¯å¾„åˆ«åï¼ˆ`quasar.config.ts`ï¼‰
- æ³¨å†Œå…¨å±€ç»„ä»¶/æ’ä»¶

**æ­¥éª¤2.3ï¼šç±»å‹å®šä¹‰å‡†å¤‡**
- åˆ›å»ºæ¨¡å—ä¸“ç”¨ç±»å‹æ–‡ä»¶ï¼ˆ`types.ts`ï¼‰
- æ£€æŸ¥å…¨å±€ç±»å‹å£°æ˜ï¼ˆ`*.d.ts`ï¼‰

**æœ¬é˜¶æ®µäº§å‡ºï¼š**
- âœ… æ–°ä¾èµ–å·²æ·»åŠ åˆ°`package.json`
- âœ… Bootæ–‡ä»¶å·²æ³¨å†Œ
- âœ… è·¯å¾„åˆ«åå·²é…ç½®
- âœ… ç±»å‹æ–‡ä»¶å·²åˆ›å»º

---

#### é˜¶æ®µ3ï¼šå‰ç«¯é¡µé¢æ­å»º ğŸ¨

**æ­¥éª¤3.1ï¼šè‡ªåº•å‘ä¸Šåˆ›å»ºç»„ä»¶**

**3.1.1 æœ€åº•å±‚ï¼šçº¯UIç»„ä»¶**
```
components/
â”œâ”€â”€ ProjectPage.Shell/
â”‚   â”œâ”€â”€ Navbar/ProjectNavbar.vue         # å ä½ç»„ä»¶
â”‚   â”œâ”€â”€ FileTree/FileTreeToolbar.vue     # å ä½ç»„ä»¶
â”‚   â”œâ”€â”€ FileTree/FileTreeContent.vue     # å ä½ç»„ä»¶
â”‚   â””â”€â”€ Outline/OutlineContent.vue       # å ä½ç»„ä»¶
â””â”€â”€ ProjectPage.MainPanel/
    â””â”€â”€ Markdown/
        â”œâ”€â”€ MarkdownEditor.vue           # âœ… ä»åŸå‹è¿ç§»
        â”œâ”€â”€ MarkdownViewer.vue           # âœ… ä»åŸå‹è¿ç§»
        â””â”€â”€ MarkdownTab.vue              # âœ… ä»åŸå‹è¿ç§»
```

**è¿ç§»è¦ç‚¹ï¼š**
- æ›´æ–°å¯¼å…¥è·¯å¾„ä¸ºåˆ«å
- ä¿æŒç»„ä»¶å†…éƒ¨é€»è¾‘ä¸å˜
- é€‚é…Pinia storeå¼•ç”¨

**3.1.2 ä¸­é—´å±‚ï¼šPagesLayoutç»„ä»¶**
```
PagesLayout/
â”œâ”€â”€ ProjectPage.Shell.vue         # å·¦/å³æ Shellï¼ˆå¯å¤ç”¨ï¼‰
â”œâ”€â”€ ProjectPage.Shell.scss
â”œâ”€â”€ ProjectPage.MainPanel.vue     # ä¸­æ ä¸»é¢æ¿
â””â”€â”€ ProjectPage.MainPanel.scss
```

**è®¾è®¡è¦ç‚¹ï¼š**
- Shellç»„ä»¶æ¥æ”¶`type` propå®ç°å¤ç”¨
- MainPanelç›´æ¥åŒ…å«Tabç³»ç»Ÿé€»è¾‘
- æ ·å¼æ–‡ä»¶ä¸“æ³¨è§†è§‰è¡¨ç°ï¼ˆé¢œè‰²ã€è¾¹è·ï¼‰

**3.1.3 å®¹å™¨å±‚ï¼šLayoutç»„ä»¶**
```
layouts/
â”œâ”€â”€ ProjectMainLayout.vue         # ä¸‰æ å®¹å™¨ + åˆ†éš”å™¨æ‹–æ‹½
â””â”€â”€ ProjectMainLayout.scss        # å¸ƒå±€æ ·å¼ï¼ˆflexã€overflowï¼‰
```

**èŒè´£åˆ’åˆ†ï¼š**
- **Layout.vue**ï¼šç»“æ„ + æ‹–æ‹½é€»è¾‘ + çª—å£æ§åˆ¶
- **Layout.scss**ï¼šå¸ƒå±€æ§åˆ¶ï¼ˆflexé“¾è·¯ã€é«˜åº¦ã€overflowï¼‰

**3.1.4 å…¥å£å±‚ï¼šIndexç»„ä»¶**
```
Index/
â””â”€â”€ ProjectPageSystem.vue         # æœ€å°å…¥å£ï¼ˆä»…<router-view />ï¼‰
```

**æ­¥éª¤3.2ï¼šçŠ¶æ€ç®¡ç†ï¼ˆPinia Storeï¼‰**
```typescript
// 1. åˆ›å»ºç±»å‹å®šä¹‰
stores/projectPage/Markdown/types.ts

// 2. åˆ›å»ºMockæ•°æ®
stores/projectPage/Markdown/markdown.mock.ts

// 3. åˆ›å»ºStore
stores/projectPage/Markdown/markdown.store.ts

// 4. åˆ›å»ºæ¨¡å—å¯¼å‡º
stores/projectPage/Markdown/index.ts
stores/projectPage/index.ts
```

**æ­¥éª¤3.3ï¼šè·¯ç”±é…ç½®**
```typescript
// routes.ts
{
  path: '/project',
  component: () => import('@index/ProjectPageSystem.vue'),
  children: [
    {
      path: '',
      component: () => import('@layouts/ProjectMainLayout.vue'),
      children: [
        {
          path: '',
          name: 'project-workspace',
          components: {
            left: () => import('@pages/ProjectPage.Shell.vue'),
            center: () => import('@pages/ProjectPage.MainPanel.vue'),
            right: () => import('@pages/ProjectPage.Shell.vue')
          },
          props: {
            left: { type: 'left' },
            right: { type: 'right' }
          }
        }
      ]
    }
  ]
}
```

**æœ¬é˜¶æ®µäº§å‡ºï¼š**
- âœ… 13ä¸ªVueç»„ä»¶å·²åˆ›å»º
- âœ… 4ä¸ªSCSSæ ·å¼æ–‡ä»¶å·²åˆ›å»º
- âœ… Pinia Storeå·²é…ç½®
- âœ… è·¯ç”±å·²é…ç½®

---

#### é˜¶æ®µ4ï¼šElectronåç«¯é›†æˆ âš¡

**æ­¥éª¤4.1ï¼šè¯†åˆ«è§¦å‘ç‚¹**
- æœ¬ä¾‹ï¼šç”¨æˆ·åœ¨ä¸»çª—å£ç‚¹å‡»é¡¹ç›®
- è°ƒç”¨ï¼š`projectStore.selectAndOpenProject(project)`
- è§¦å‘ï¼š`window.nimbria.project.createWindow(projectPath)`

**æ­¥éª¤4.2ï¼šåˆ›å»ºçª—å£é€»è¾‘**

**4.2.1 ä¿®æ”¹`app-manager.ts`**
```typescript
// 1. åœ¨registerIpcHandlers()ä¸­å·²æœ‰å¤„ç†
ipcMain.handle('project:create-window', async (_event, request) => {
  const process = await this.windowManager.createProjectWindow(request.projectPath)
  return { success: true, processId: process.id }
})

// 2. âœ… æ–°å¢ï¼šåŠ è½½é¡¹ç›®çª—å£URL
private loadProjectWindow(windowProcess: WindowProcess) {
  if (isDevEnvironment) {
    const baseUrl = process.env.APP_URL as string
    const projectUrl = `${baseUrl}#/project`
    void windowProcess.window.loadURL(projectUrl)
    windowProcess.window.webContents.openDevTools()  // å¼€å‘æ¨¡å¼æ‰“å¼€DevTools
    return
  }
  
  void windowProcess.window.loadFile(
    path.join(__dirname, '../../index.html'),
    { hash: '/project' }
  )
}

// 3. âœ… æ–°å¢ï¼šåœ¨lifecycleHooks.onReadyä¸­è°ƒç”¨
else if (windowProcess.type === 'project') {
  this.loadProjectWindow(windowProcess)
}
```

**æ­¥éª¤4.3ï¼šçª—å£æ§åˆ¶IPCï¼ˆæœ¬æ¬¡é‡åˆ°çš„bugä¿®å¤ï¼‰**

**4.3.1 é—®é¢˜ï¼šæ— windowIdå¯¼è‡´é»˜è®¤æ“ä½œä¸»çª—å£**
- ä¿®æ”¹IPC handlersæ¥æ”¶`event`å‚æ•°
- ä½¿ç”¨`event.sender`è¯†åˆ«çª—å£

**4.3.2 æ–°å¢æ–¹æ³•**
```typescript
// app-manager.ts
private handleWindowOperationFromEvent(event, operation, request)
private resolveWindowProcessFromEvent(event, windowId?)

// window-manager.ts
public getProcessByWindowId(windowId: number)

// process-manager.ts
public getProcessByWindowId(windowId: number)
```

**æ­¥éª¤4.4ï¼šæµ‹è¯•éªŒè¯**
- ä¸»çª—å£åŠŸèƒ½æ­£å¸¸
- é¡¹ç›®çª—å£èƒ½æ­£ç¡®æ‰“å¼€
- é¡¹ç›®çª—å£æ§åˆ¶æŒ‰é’®æ“ä½œæ­£ç¡®çª—å£
- DevToolsåœ¨å¼€å‘æ¨¡å¼æ­£å¸¸æ‰“å¼€

**æœ¬é˜¶æ®µäº§å‡ºï¼š**
- âœ… é¡¹ç›®çª—å£åˆ›å»ºæµç¨‹å®Œå–„
- âœ… çª—å£URLåŠ è½½é€»è¾‘å®ç°
- âœ… çª—å£æ§åˆ¶bugä¿®å¤
- âœ… DevToolsè‡ªåŠ¨æ‰“å¼€

---

#### é˜¶æ®µ5ï¼šUIç»†èŠ‚ä¼˜åŒ– ğŸ’…

**æ­¥éª¤5.1ï¼šçª—å£æ§åˆ¶æ è®¾è®¡**
```vue
<!-- æ ‡é¢˜æ ç»“æ„ -->
<q-bar class="project-titlebar q-electron-drag">
  <div class="project-titlebar__left">
    <q-icon name="auto_stories" />
    <span>Nimbria Project</span>
  </div>
  <q-space />
  <q-btn icon="minimize" @click="minimizeWindow" />
  <q-btn :icon="isMaximized ? '...' : '...'" @click="toggleMaximize" />
  <q-btn icon="close" @click="closeWindow" />
</q-bar>
```

**æ ·å¼è°ƒæ•´ï¼š**
- é¢œè‰²ä¸ä¸»ç¨‹åºä¿æŒä¸€è‡´ï¼ˆç™½è‰²èƒŒæ™¯ï¼‰
- æŒ‰é’®hoveræ•ˆæœ
- å…³é—­æŒ‰é’®hoverçº¢è‰²é«˜äº®
- æŒ‰é’®å‚ç›´å¯¹é½å¾®è°ƒï¼ˆ`position: relative; top: -5px`ï¼‰

**æ­¥éª¤5.2ï¼šCSSç»†èŠ‚ä¿®å¤**
- ç»Ÿä¸€æ³¨é‡Šæ ¼å¼ï¼ˆ`/* */`è€Œé`//`ï¼‰
- æ·»åŠ æµè§ˆå™¨å‰ç¼€ï¼ˆ`-webkit-user-select`ï¼‰
- Flexå¸ƒå±€é»„é‡‘é“¾è·¯æ£€æŸ¥

**æœ¬é˜¶æ®µäº§å‡ºï¼š**
- âœ… çª—å£æ§åˆ¶æ æ ·å¼å®Œå–„
- âœ… CSSå…¼å®¹æ€§ä¿®å¤
- âœ… æŒ‰é’®å¯¹é½è°ƒæ•´

---

#### é˜¶æ®µ6ï¼šæµ‹è¯•ä¸æ–‡æ¡£ ğŸ“

**æ­¥éª¤6.1ï¼šåŠŸèƒ½æµ‹è¯•æ¸…å•**
- [ ] ä¸»çª—å£æ­£å¸¸å¯åŠ¨
- [ ] ç‚¹å‡»é¡¹ç›®æ‰“å¼€é¡¹ç›®çª—å£
- [ ] é¡¹ç›®çª—å£ä¸‰æ å¸ƒå±€æ­£ç¡®
- [ ] é¡¹ç›®çª—å£å¯æ‹–æ‹½
- [ ] é¡¹ç›®çª—å£æœ€å°åŒ–/æœ€å¤§åŒ–/å…³é—­æ­£å¸¸
- [ ] Tabç³»ç»Ÿæ­£å¸¸å·¥ä½œ
- [ ] Mockæ•°æ®æ­£ç¡®åŠ è½½
- [ ] DevToolsæ­£å¸¸æ‰“å¼€

**æ­¥éª¤6.2ï¼šç”Ÿæˆæ€»ç»“æŠ¥å‘Š**
- ä½ç½®ï¼š`Document/æ€»ç»“/åŠŸèƒ½åç§°_æ—¶é—´æˆ³.md`
- å†…å®¹ï¼šå·²å®ç°åŠŸèƒ½ã€APIä½¿ç”¨ã€è§„èŒƒæ€»ç»“ã€è¸©å‘ç»éªŒã€æ ‡å‡†æµç¨‹

**æœ¬é˜¶æ®µäº§å‡ºï¼š**
- âœ… åŠŸèƒ½æµ‹è¯•é€šè¿‡
- âœ… æ€»ç»“æŠ¥å‘Šå·²ç”Ÿæˆ

---

### æµç¨‹æ¨¡æ¿ï¼ˆå¯å¤ç”¨ï¼‰

```markdown
# æ–°åŠŸèƒ½é›†æˆæ ‡å‡†æµç¨‹

## ç¬¬1é˜¶æ®µï¼šéœ€æ±‚åˆ†æ (1-2å°æ—¶)
- [ ] åˆ†æåŸå‹/éœ€æ±‚æ–‡æ¡£
- [ ] ç¡®å®šæŠ€æœ¯æ ˆ
- [ ] è®¾è®¡ç›®å½•ç»“æ„
- [ ] åˆ›å»ºDesign.md

## ç¬¬2é˜¶æ®µï¼šç¯å¢ƒå‡†å¤‡ (0.5-1å°æ—¶)
- [ ] ä¿®æ”¹package.json
- [ ] é…ç½®Bootæ–‡ä»¶
- [ ] é…ç½®è·¯å¾„åˆ«å
- [ ] åˆ›å»ºç±»å‹æ–‡ä»¶

## ç¬¬3é˜¶æ®µï¼šå‰ç«¯å¼€å‘ (3-6å°æ—¶)
- [ ] åˆ›å»ºåº•å±‚UIç»„ä»¶
- [ ] åˆ›å»ºPagesLayoutç»„ä»¶
- [ ] åˆ›å»ºLayoutå®¹å™¨
- [ ] åˆ›å»ºIndexå…¥å£
- [ ] é…ç½®Pinia Store
- [ ] é…ç½®è·¯ç”±

## ç¬¬4é˜¶æ®µï¼šåç«¯é›†æˆ (1-3å°æ—¶)
- [ ] è¯†åˆ«è§¦å‘ç‚¹
- [ ] å®ç°IPC handlers
- [ ] å¤„ç†çª—å£ç”Ÿå‘½å‘¨æœŸ
- [ ] æµ‹è¯•IPCé€šä¿¡

## ç¬¬5é˜¶æ®µï¼šä¼˜åŒ–æµ‹è¯• (1-2å°æ—¶)
- [ ] UIç»†èŠ‚è°ƒæ•´
- [ ] CSSå…¼å®¹æ€§ä¿®å¤
- [ ] åŠŸèƒ½æµ‹è¯•
- [ ] è¾¹ç¼˜æƒ…å†µæµ‹è¯•

## ç¬¬6é˜¶æ®µï¼šæ–‡æ¡£æ€»ç»“ (0.5-1å°æ—¶)
- [ ] ç”Ÿæˆæ€»ç»“æŠ¥å‘Š
- [ ] æ›´æ–°ç›¸å…³æ–‡æ¡£
- [ ] æäº¤ä»£ç 

**æ€»è®¡ï¼šçº¦7-15å°æ—¶**
```

---

## é™„å½•

### æœ¬æ¬¡ä¿®æ”¹çš„æ–‡ä»¶æ¸…å•

#### æ–°å¢æ–‡ä»¶ï¼ˆ17ä¸ªï¼‰
```
Client/boot/element-plus.ts
Client/GUI/Index/ProjectPageSystem.vue
Client/GUI/layouts/ProjectMainLayout.vue
Client/GUI/layouts/ProjectMainLayout.scss
Client/GUI/PagesLayout/ProjectPage.Shell.vue
Client/GUI/PagesLayout/ProjectPage.Shell.scss
Client/GUI/PagesLayout/ProjectPage.MainPanel.vue
Client/GUI/PagesLayout/ProjectPage.MainPanel.scss
Client/GUI/components/ProjectPage.Shell/Navbar/ProjectNavbar.vue
Client/GUI/components/ProjectPage.Shell/FileTree/FileTreeToolbar.vue
Client/GUI/components/ProjectPage.Shell/FileTree/FileTreeContent.vue
Client/GUI/components/ProjectPage.Shell/Outline/OutlineContent.vue
Client/GUI/components/ProjectPage.MainPanel/Markdown/MarkdownEditor.vue
Client/GUI/components/ProjectPage.MainPanel/Markdown/MarkdownViewer.vue
Client/GUI/components/ProjectPage.MainPanel/Markdown/MarkdownTab.vue
Client/stores/projectPage/Markdown/types.ts
Client/stores/projectPage/Markdown/markdown.mock.ts
Client/stores/projectPage/Markdown/markdown.store.ts
Client/stores/projectPage/Markdown/index.ts
Client/stores/projectPage/index.ts
```

#### ä¿®æ”¹æ–‡ä»¶ï¼ˆ5ä¸ªï¼‰
```
Nimbria/package.json                                    # æ–°å¢ä¾èµ–
Nimbria/quasar.config.ts                                # Boot + åˆ«å
Nimbria/Client/GUI/router/routes.ts                     # æ–°å¢è·¯ç”±
Nimbria/src-electron/core/app-manager.ts                # çª—å£åŠ è½½ + IPCä¿®å¤
Nimbria/src-electron/services/window-service/window-manager.ts   # æ–°å¢æŸ¥è¯¢æ–¹æ³•
Nimbria/src-electron/services/window-service/process-manager.ts  # æ–°å¢æŸ¥è¯¢æ–¹æ³•
```

### æŠ€æœ¯å€ºåŠ¡ä¸å¾…å®Œå–„åŠŸèƒ½

#### çŸ­æœŸï¼ˆä¸‹ä¸€è¿­ä»£ï¼‰
- [ ] å®ç°FileTreeçš„çœŸå®æ–‡ä»¶è¯»å–ï¼ˆæ›¿æ¢Mockï¼‰
- [ ] å®ç°Markdownæ–‡ä»¶ä¿å­˜åŠŸèƒ½
- [ ] å®ç°æ–‡æ¡£å¤§çº²è‡ªåŠ¨æå–
- [ ] å®ç°å·¦ä¾§å¯¼èˆªæ åŠŸèƒ½

#### ä¸­æœŸ
- [ ] é¡¹ç›®é…ç½®æŒä¹…åŒ–
- [ ] çª—å£çŠ¶æ€è®°å¿†ï¼ˆå¤§å°ã€ä½ç½®ï¼‰
- [ ] å¤šæ–‡ä»¶ç¼–è¾‘ååŒ
- [ ] ä¸»é¢˜åˆ‡æ¢æ”¯æŒ

#### é•¿æœŸ
- [ ] æ’ä»¶ç³»ç»Ÿæ‰©å±•
- [ ] å®æ—¶åä½œç¼–è¾‘
- [ ] ç‰ˆæœ¬æ§åˆ¶é›†æˆ

---

## ç»“è®º

æœ¬æ¬¡å·¥ä½œæˆåŠŸå®Œæˆäº†**Obsidiané£æ ¼Markdownç¼–è¾‘å™¨åŸå‹åˆ°Nimbriaä¸»ç¨‹åºçš„é›†æˆ**ï¼Œå»ºç«‹äº†å®Œæ•´çš„**é¡¹ç›®é¡µé¢ç³»ç»Ÿæ¶æ„**ã€‚é€šè¿‡Shellè®¾è®¡æ¨¡å¼ï¼Œå®ç°äº†ç»„ä»¶å¤ç”¨å’Œä»£ç ä¼˜åŒ–ã€‚ä¿®å¤äº†å…³é”®çš„çª—å£æ§åˆ¶bugï¼Œç¡®ä¿äº†å¤šçª—å£ç³»ç»Ÿçš„ç¨³å®šè¿è¡Œã€‚

æ€»ç»“çš„**æ ‡å‡†å·¥ä½œæµç¨‹**å¯ä½œä¸ºåç»­ç±»ä¼¼åŠŸèƒ½é›†æˆçš„å‚è€ƒæ¨¡æ¿ï¼Œæ˜¾è‘—é™ä½å¼€å‘æˆæœ¬ã€‚æ–‡æ¡£ä¸­è®°å½•çš„**è¸©å‘ç»éªŒ**ä¸ºå›¢é˜Ÿç§¯ç´¯äº†å®è´µçš„æŠ€æœ¯çŸ¥è¯†ã€‚

---

**æŠ¥å‘Šç”Ÿæˆæ—¶é—´ï¼š** 2025å¹´10æœˆ05æ—¥ 16:50  
**ä¸‹ä¸€æ­¥å·¥ä½œï¼š** å®ç°FileTreeçœŸå®æ–‡ä»¶ç³»ç»Ÿé›†æˆï¼Œå®Œå–„Markdownä¿å­˜åŠŸèƒ½

