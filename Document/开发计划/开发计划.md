# ğŸ“Š LLM Translate å¼€å‘è®¡åˆ’

## ğŸ¯ é¡¹ç›®ç°çŠ¶

1. [x] å®Œæˆæ ‡ç­¾é¡µè·¨é¢æ¿çš„æ‹–æ‹½ 
2. [x] å®Œæˆæ ‡ç­¾é¡µæ‹–å‡ºä½œä¸ºç‹¬ç«‹çš„çª—å£
3. [ ] é¡¹ç›®é¡µå®ç°è°ƒå‡ºhomepageçª—å£
4. [x] ä¿®å¤é¡¹ç›®é¡µç¼“å­˜å¯¼è‡´å¤šé¢æ¿å¼‚å¸¸çš„é—®é¢˜

---

## ğŸ“ æ–‡ä»¶æ¶æ„ä¿®æ”¹æ ‘

å®Œæ•´çš„å¼€å‘æµç¨‹åˆ†ä¸º 8 ä¸ªä¼˜å…ˆçº§ï¼Œæ¶‰åŠå‰åç«¯å…± 15+ ä¸ªæ–‡ä»¶çš„ä¿®æ”¹å’Œæ–°å¢ã€‚ä¸‹é¢æ˜¯è¯¦ç»†çš„ä¿®æ”¹æ¸…å•ï¼š

### **ç¬¬ä¸€å±‚ï¼šæ–°å¢æ ¸å¿ƒæœåŠ¡æ¨¡å—**

```
Nimbria/src-electron/services/llm-translate-service/
â”‚
â”œâ”€â”€ [æ–°å¢æ–‡ä»¶] llm-translation-client.ts
â”‚   â””â”€â”€ å†…éƒ¨æ¨¡å—ï¼š
â”‚       â”œâ”€â”€ LlmTranslationClient ç±»
â”‚       â”‚   â”œâ”€â”€ constructor(config, llmConfigManager)
â”‚       â”‚   â”œâ”€â”€ translateStream(request, callbacks) - æµå¼ç¿»è¯‘æ‰§è¡Œ
â”‚       â”‚   â”œâ”€â”€ translate(request) - éæµå¼ç¿»è¯‘æ‰§è¡Œ
â”‚       â”‚   â”œâ”€â”€ initClient() - LangChain å®¢æˆ·ç«¯åˆå§‹åŒ–
â”‚       â”‚   â”œâ”€â”€ getModelConfig(modelId) - è·å–æ¨¡å‹é…ç½®
â”‚       â”‚   â”œâ”€â”€ estimateTokens(text) - Token å¿«é€Ÿä¼°ç®—
â”‚       â”‚   â”œâ”€â”€ countTokensAccurate(text) - Token ç²¾ç¡®è®¡ç®—
â”‚       â”‚   â”œâ”€â”€ calculateCost(inputTokens, outputTokens) - è´¹ç”¨è®¡ç®—
â”‚       â”‚   â””â”€â”€ classifyError(error) - é”™è¯¯åˆ†ç±»
â”‚       â””â”€â”€ äº‹ä»¶å‘å°„ï¼štranslation:start, translation:progress, translation:complete, translation:error
â”‚
â”œâ”€â”€ [æ–°å¢æ–‡ä»¶] task-state-manager.ts
â”‚   â””â”€â”€ å†…éƒ¨æ¨¡å—ï¼š
â”‚       â”œâ”€â”€ TaskStateManager ç±»
â”‚       â”‚   â”œâ”€â”€ setProjectDatabase(db) - ç»‘å®šæ•°æ®åº“
â”‚       â”‚   â”œâ”€â”€ initializeTask(taskId, batchId, estimatedTokens) - åˆå§‹åŒ–ä»»åŠ¡çŠ¶æ€
â”‚       â”‚   â”œâ”€â”€ updateState(taskId, newStatus, additionalData) - æ›´æ–°ä»»åŠ¡çŠ¶æ€
â”‚       â”‚   â”œâ”€â”€ updateProgress(taskId, chunk, currentTokens) - æ›´æ–°è¿›åº¦ï¼ˆèŠ‚æµï¼‰
â”‚       â”‚   â”œâ”€â”€ markComplete(taskId, result) - æ ‡è®°ä»»åŠ¡å®Œæˆ
â”‚       â”‚   â”œâ”€â”€ markError(taskId, errorType, errorMessage, retryCount) - æ ‡è®°ä»»åŠ¡é”™è¯¯
â”‚       â”‚   â”œâ”€â”€ pauseTask(taskId) - æš‚åœä»»åŠ¡ [æ–°å¢]
â”‚       â”‚   â”œâ”€â”€ getState(taskId) - è·å–ä»»åŠ¡çŠ¶æ€å¿«ç…§
â”‚       â”‚   â”œâ”€â”€ getBatchStates(batchId) - è·å–æ‰¹æ¬¡æ‰€æœ‰ä»»åŠ¡çŠ¶æ€
â”‚       â”‚   â”œâ”€â”€ cleanup(taskId) - æ¸…ç†å•ä¸ªä»»åŠ¡çŠ¶æ€
â”‚       â”‚   â”œâ”€â”€ cleanupBatch(batchId) - æ¸…ç†æ‰¹æ¬¡çŠ¶æ€
â”‚       â”‚   â”œâ”€â”€ shouldEmitProgress(taskId) - èŠ‚æµåˆ¤æ–­
â”‚       â”‚   â”œâ”€â”€ persistState(snapshot) - çŠ¶æ€æŒä¹…åŒ–
â”‚       â”‚   â”œâ”€â”€ persistProgress(taskId, progress, currentTokens) - è¿›åº¦æŒä¹…åŒ–
â”‚       â”‚   â”œâ”€â”€ persistCompletion(taskId, result) - å®Œæˆç»“æœæŒä¹…åŒ–
â”‚       â”‚   â””â”€â”€ persistError(taskId, errorType, errorMessage, retryCount) - é”™è¯¯ä¿¡æ¯æŒä¹…åŒ–
â”‚       â””â”€â”€ äº‹ä»¶å‘å°„ï¼šstate:change, progress:update, task:complete, task:error
â”‚
â”œâ”€â”€ [ä¿®æ”¹æ–‡ä»¶] translation-executor.ts
â”‚   â””â”€â”€ å†…éƒ¨æ¨¡å—ä¿®æ”¹ï¼š
â”‚       â”œâ”€â”€ TranslationExecutor ç±» [ä¿®æ”¹]
â”‚       â”‚   â”œâ”€â”€ constructor() - æ–°å¢ taskStateManager å‚æ•°
â”‚       â”‚   â”œâ”€â”€ executeTasks() - æ·»åŠ  TaskStateManager åˆå§‹åŒ–é€»è¾‘
â”‚       â”‚   â”œâ”€â”€ worker() - æ·»åŠ ä»»åŠ¡æš‚åœæ£€æŸ¥
â”‚       â”‚   â””â”€â”€ executeTask() - [é‡æ„] å®Œå…¨é‡å†™
â”‚       â”‚       â”œâ”€â”€ æ­¥éª¤1ï¼šè·å–ä»»åŠ¡ä¿¡æ¯
â”‚       â”‚       â”œâ”€â”€ æ­¥éª¤2ï¼šåˆå§‹åŒ–ä»»åŠ¡çŠ¶æ€ï¼ˆTaskStateManagerï¼‰
â”‚       â”‚       â”œâ”€â”€ æ­¥éª¤3ï¼šæ›´æ–°çŠ¶æ€ä¸º waiting
â”‚       â”‚       â”œâ”€â”€ æ­¥éª¤4ï¼šåˆ›å»º LlmTranslationClient é…ç½®
â”‚       â”‚       â”œâ”€â”€ æ­¥éª¤5ï¼šåˆ›å»ºç¿»è¯‘å®¢æˆ·ç«¯å®ä¾‹
â”‚       â”‚       â”œâ”€â”€ æ­¥éª¤6ï¼šæ„å»ºç¿»è¯‘è¯·æ±‚
â”‚       â”‚       â”œâ”€â”€ æ­¥éª¤7ï¼šæ‰§è¡Œç¿»è¯‘æµï¼ˆregisterProgressHandlerï¼‰
â”‚       â”‚       â”œâ”€â”€ æ­¥éª¤8ï¼šæ ‡è®°ä»»åŠ¡å®Œæˆï¼ˆmarkCompleteï¼‰
â”‚       â”‚       â””â”€â”€ æ­¥éª¤9ï¼šæ›´æ–°æ‰¹æ¬¡ç»Ÿè®¡
â”‚       â””â”€â”€ æ–°å¢æ–¹æ³•ï¼šclassifyError()
â”‚
â”œâ”€â”€ [ä¿®æ”¹æ–‡ä»¶] llm-translate-service.ts
â”‚   â””â”€â”€ å†…éƒ¨æ¨¡å—ä¿®æ”¹ï¼š
â”‚       â”œâ”€â”€ LlmTranslateService ç±» [ä¿®æ”¹]
â”‚       â”‚   â”œâ”€â”€ initialize() - æ–°å¢ï¼šTaskStateManager åˆ›å»ºå’Œåˆå§‹åŒ–
â”‚       â”‚   â”œâ”€â”€ createBatch() - ä¿æŒä¸å˜ï¼ˆé…ç½®å·²åŒ…å«åœ¨ metadata ä¸­ï¼‰
â”‚       â”‚   â”œâ”€â”€ getTasks() - [ä¿®æ”¹] æ·»åŠ å­—æ®µåˆ«åæ˜ å°„ âœ… å·²å®Œæˆ
â”‚       â”‚   â”œâ”€â”€ getTask() - [ä¿®æ”¹] æ·»åŠ å­—æ®µåˆ«åæ˜ å°„ âœ… å·²å®Œæˆ
â”‚       â”‚   â”œâ”€â”€ getBatches() - [ä¿®æ”¹] æ·»åŠ å­—æ®µåˆ«åæ˜ å°„ âœ… å·²å®Œæˆ
â”‚       â”‚   â”œâ”€â”€ getBatch() - [ä¿®æ”¹] æ·»åŠ å­—æ®µåˆ«åæ˜ å°„ âœ… å·²å®Œæˆ
â”‚       â”‚   â”œâ”€â”€ loadBatches() - [ä¿®æ”¹] æ·»åŠ å­—æ®µåˆ«åæ˜ å°„ âœ… å·²å®Œæˆ
â”‚       â”‚   â”œâ”€â”€ handleTerminatedTasks() - [ä¿®æ”¹] æ·»åŠ å­—æ®µåˆ«åæ˜ å°„ âœ… å·²å®Œæˆ
â”‚       â”‚   â”œâ”€â”€ handleRecoveryTasks() - [æ–°å¢] å¯åŠ¨æ—¶å¼‚å¸¸ä»»åŠ¡æ¢å¤
â”‚       â”‚   â”‚   â”œâ”€â”€ æŸ¥è¯¢æ‰€æœ‰ 'sending' çŠ¶æ€çš„ä»»åŠ¡
â”‚       â”‚   â”‚   â”œâ”€â”€ å°†å…¶è½¬ä¸º 'error' çŠ¶æ€
â”‚       â”‚   â”‚   â””â”€â”€ è®°å½•é”™è¯¯ä»£ç ï¼š'APP_CRASHED'
â”‚       â”‚   â”œâ”€â”€ pauseTask(taskId) - [æ–°å¢] æš‚åœä»»åŠ¡å¤„ç†
â”‚       â”‚   â”œâ”€â”€ retryFailedTasks() - æ–°å¢æˆ–ä¿®æ”¹ï¼šé›†æˆ TaskStateManager
â”‚       â”‚   â””â”€â”€ updateBatchStats() - åŒæ­¥ TaskStateManager æ•°æ®åˆ°æ•°æ®åº“
â”‚       â””â”€â”€ æ–°å¢å±æ€§ï¼štaskStateManager
â”‚
â”œâ”€â”€ [ä¿®æ”¹æ–‡ä»¶] types.ts
â”‚   â””â”€â”€ å†…éƒ¨æ¨¡å—ä¿®æ”¹ï¼š
â”‚       â”œâ”€â”€ å¯¼å‡ºå·²æœ‰ç±»å‹ï¼šTranslationClientConfig, TranslationRequest, TranslationResult
â”‚       â”œâ”€â”€ å¯¼å‡ºå·²æœ‰ç±»å‹ï¼šErrorType, TranslationStreamCallbacks
â”‚       â”œâ”€â”€ [æ–°å¢] TaskStatus ç±»å‹
â”‚       â”œâ”€â”€ [æ–°å¢] TaskMetadata æ¥å£
â”‚       â”œâ”€â”€ [æ–°å¢] Task æ¥å£ï¼ˆæ‰©å±•ï¼‰
â”‚       â”‚   â”œâ”€â”€ æ–°å¢å­—æ®µï¼šerrorType, errorMessage, retryCount
â”‚       â”‚   â”œâ”€â”€ æ–°å¢å­—æ®µï¼šmetadata, metadataJson
â”‚       â”‚   â””â”€â”€ ä¿®æ”¹å­—æ®µï¼šstatus çš„å¯é€‰å€¼
â”‚       â”œâ”€â”€ [æ–°å¢] TaskStateChangeEvent æ¥å£
â”‚       â”œâ”€â”€ [æ–°å¢] TaskProgressUpdateEvent æ¥å£
â”‚       â”œâ”€â”€ [æ–°å¢] TaskCompletionEvent æ¥å£
â”‚       â””â”€â”€ [æ–°å¢] TaskErrorEvent æ¥å£
â”‚
â””â”€â”€ export-service.ts - ä¿æŒä¸å˜ï¼ˆé€»è¾‘ä¸å—å½±å“ï¼‰
```

---

### **ç¬¬äºŒå±‚ï¼šå‰ç«¯ä¸»è¦é¡µé¢å’Œç»„ä»¶ä¿®æ”¹**

```
Nimbria/Client/GUI/DemoPage/LlmTranslate/
â”‚
â”œâ”€â”€ [æ–°å¢æ–‡ä»¶] components/ModelSelector.vue
â”‚   â””â”€â”€ å†…éƒ¨æ¨¡å—ï¼š
â”‚       â”œâ”€â”€ æ¨¡æ¿éƒ¨åˆ†ï¼š
â”‚       â”‚   â”œâ”€â”€ El-Select ä¸‹æ‹‰æ¡†ï¼ˆæ”¯æŒåˆ†ç»„ï¼‰
â”‚       â”‚   â”œâ”€â”€ æŒ‰æä¾›å•†åˆ†ç»„å±•ç¤ºæ¨¡å‹
â”‚       â”‚   â””â”€â”€ æ˜¾ç¤ºæ¨¡å‹åç§°ã€æä¾›å•†ä¿¡æ¯
â”‚       â”œâ”€â”€ è„šæœ¬éƒ¨åˆ†ï¼š
â”‚       â”‚   â”œâ”€â”€ props: modelId (v-model)
â”‚       â”‚   â”œâ”€â”€ data: providers åˆ—è¡¨, selectedModel
â”‚       â”‚   â”œâ”€â”€ computed: groupedModels() - æŒ‰æä¾›å•†åˆ†ç»„
â”‚       â”‚   â”œâ”€â”€ methods:
â”‚       â”‚   â”‚   â”œâ”€â”€ loadProviders() - ä» LlmConfigManager è·å–
â”‚       â”‚   â”‚   â”œâ”€â”€ onModelSelect(modelId) - é€‰æ‹©å˜æ›´å›è°ƒ
â”‚       â”‚   â”‚   â””â”€â”€ getModelInfo(modelId) - è·å–æ¨¡å‹å®Œæ•´ä¿¡æ¯
â”‚       â”‚   â””â”€â”€ onMounted: åˆå§‹åŒ–åŠ è½½æä¾›å•†åˆ—è¡¨
â”‚       â””â”€â”€ æ ·å¼éƒ¨åˆ†ï¼šæä¾›å•†åˆ†ç»„æ ·å¼
â”‚
â”œâ”€â”€ [ä¿®æ”¹æ–‡ä»¶] components/HomePage.vue
â”‚   â””â”€â”€ å†…éƒ¨æ¨¡å—ä¿®æ”¹ï¼š
â”‚       â”œâ”€â”€ æ¨¡æ¿éƒ¨åˆ† [ä¿®æ”¹]ï¼š
â”‚       â”‚   â”œâ”€â”€ ç¬¬ 215-223 è¡Œï¼šæ›¿æ¢åŸç®€å•ä¸‹æ‹‰æ¡†
â”‚       â”‚   â””â”€â”€ æ–°å¢ï¼š<ModelSelector v-model="store.modelId" />
â”‚       â”œâ”€â”€ è„šæœ¬éƒ¨åˆ† [ä¿®æ”¹]ï¼š
â”‚       â”‚   â”œâ”€â”€ importsï¼šæ–°å¢ ModelSelector ç»„ä»¶
â”‚       â”‚   â”œâ”€â”€ data: ç¡®ä¿ modelId æ•°æ®ç»‘å®š
â”‚       â”‚   â”œâ”€â”€ methods.createNewBatch() - ä¿æŒé€»è¾‘
â”‚       â”‚   â”‚   â”œâ”€â”€ æ£€æŸ¥ modelId æ˜¯å¦é€‰æ‹©
â”‚       â”‚   â”‚   â””â”€â”€ éªŒè¯ modelId æ ¼å¼ï¼ˆproviderId.modelNameï¼‰
â”‚       â”‚   â””â”€â”€ methods.validateModelId() - [æ–°å¢]
â”‚       â””â”€â”€ æ ·å¼éƒ¨åˆ†ï¼šä¿æŒä¸å˜
â”‚
â”œâ”€â”€ [ä¿®æ”¹æ–‡ä»¶] components/TaskManagePage.vue
â”‚   â””â”€â”€ å†…éƒ¨æ¨¡å—ä¿®æ”¹ï¼š
â”‚       â”œâ”€â”€ æ¨¡æ¿éƒ¨åˆ† [ä¿®æ”¹]ï¼š
â”‚       â”‚   â”œâ”€â”€ ç¬¬ 276-309 è¡Œï¼šä»»åŠ¡å¡ç‰‡ header åŒºåŸŸ
â”‚       â”‚   â”œâ”€â”€ åŸçŠ¶æ€æ ‡ç­¾ï¼š<span class="status-tag">{{ task.status }}</span>
â”‚       â”‚   â””â”€â”€ æ–°ç‰ˆæœ¬ï¼š
â”‚       â”‚   â”‚   â”œâ”€â”€ çŠ¶æ€æ ‡ç­¾ä¿æŒ
â”‚       â”‚   â”‚   â”œâ”€â”€ æ–°å¢ï¼šé”™è¯¯ä»£ç æ˜¾ç¤º <span v-if="task.errorType">{{ task.errorType }}</span>
â”‚       â”‚   â”‚   â””â”€â”€ æ–°å¢ï¼šæš‚åœæŒ‰é’® <button v-if="task.status === 'sending'">â¸ æš‚åœ</button>
â”‚       â”‚   â”œâ”€â”€ ç¬¬ 380-400 è¡Œï¼šè¿›åº¦æ¡æ˜¾ç¤º [ä¿®æ”¹]
â”‚       â”‚   â”‚   â”œâ”€â”€ åŸå§‹è¿›åº¦è®¡ç®—ï¼štask.progress
â”‚       â”‚   â”‚   â””â”€â”€ ä¿æŒä¸å˜ï¼ˆå·²ç”±åç«¯è®¡ç®—ï¼‰
â”‚       â”‚   â”œâ”€â”€ ç¬¬ 310-340 è¡Œï¼šæ–°å¢è¿›åº¦æ¡åŒºåŸŸï¼ˆä»»åŠ¡å¡ç‰‡å†…ï¼‰[æ–°å¢]
â”‚       â”‚   â”‚   â”œâ”€â”€ ä½ç½®ï¼šçŠ¶æ€æ ‡ç­¾ä¸‹æ–¹ã€åŸå†…å®¹ä¸Šæ–¹
â”‚       â”‚   â”‚   â”œâ”€â”€ æ˜¾ç¤ºæ¡ä»¶ï¼štask.status === 'sending' æˆ– task.status === 'waiting'
â”‚       â”‚   â”‚   â”œâ”€â”€ è¿›åº¦æ¡æ ·å¼ï¼š
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ ä½¿ç”¨ el-progress ç»„ä»¶
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ :percentage="task.progress"
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ :stroke-width="2"
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ é¢œè‰²æ ¹æ®çŠ¶æ€ï¼šsending='#409eff', waiting='#67c23a'
â”‚       â”‚   â”‚   â”‚   â””â”€â”€ ä¸‹æ–¹æ˜¾ç¤ºï¼štask.replyTokens / task.predictedTokens tokens
â”‚       â”‚   â”‚   â””â”€â”€ å“åº”å¼æ›´æ–°ï¼šç›‘å¬ task.progress å˜åŒ–ï¼Œå®æ—¶åŒæ­¥æ˜¾ç¤º
â”‚       â”‚   â””â”€â”€ ç¬¬ 415-440 è¡Œï¼šä»»åŠ¡ç»Ÿè®¡åŒºåŸŸ [ä¿®æ”¹]
â”‚       â”‚   â”‚   â”œâ”€â”€ æ˜¾ç¤ºå½“å‰æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡æ•°
â”‚       â”‚   â”‚   â””â”€â”€ æ˜¾ç¤ºå„ç§çŠ¶æ€çš„ä»»åŠ¡ç»Ÿè®¡
â”‚       â”œâ”€â”€ è„šæœ¬éƒ¨åˆ† [ä¿®æ”¹]ï¼š
â”‚       â”‚   â”œâ”€â”€ data: æ–°å¢ selectedTaskId, threadDrawerVisible
â”‚       â”‚   â”œâ”€â”€ computed:
â”‚       â”‚   â”‚   â”œâ”€â”€ currentTask() - è·å–å½“å‰é€‰ä¸­ä»»åŠ¡ âœ… å·²æœ‰
â”‚       â”‚   â”‚   â””â”€â”€ taskStatistics() - ç»Ÿè®¡å„ç§çŠ¶æ€çš„ä»»åŠ¡æ•° [æ–°å¢]
â”‚       â”‚   â”œâ”€â”€ methods:
â”‚       â”‚   â”‚   â”œâ”€â”€ pauseTask(taskId) - [æ–°å¢]
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ è°ƒç”¨ IPC æ¥å£ï¼šipc-invoke('pause-task', taskId)
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ æ˜¾ç¤ºç¡®è®¤å¯¹è¯æ¡†
â”‚       â”‚   â”‚   â”‚   â””â”€â”€ ä»»åŠ¡çŠ¶æ€å˜ä¸º 'paused'
â”‚       â”‚   â”‚   â”œâ”€â”€ onTaskClick(taskId) - [ä¿®æ”¹]
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ è®¾ç½® selectedTaskId
â”‚       â”‚   â”‚   â”‚   â””â”€â”€ æ‰“å¼€ ThreadDrawerï¼ˆå·²æœ‰é€»è¾‘ï¼‰
â”‚       â”‚   â”‚   â”œâ”€â”€ onThreadDrawerClose() - [æ–°å¢]
â”‚       â”‚   â”‚   â”‚   â””â”€â”€ é‡ç½® selectedTaskId
â”‚       â”‚   â”‚   â””â”€â”€ äº‹ä»¶ç›‘å¬ï¼šç›‘å¬ä»»åŠ¡çŠ¶æ€å˜åŒ–ï¼Œå®æ—¶æ›´æ–°åˆ—è¡¨
â”‚       â”‚   â””â”€â”€ onMounted: åˆå§‹åŒ–äº‹ä»¶ç›‘å¬
â”‚       â””â”€â”€ æ ·å¼éƒ¨åˆ†ï¼š
â”‚           â”œâ”€â”€ .status-bar æ–°ç±»
â”‚           â”œâ”€â”€ .error-code æ–°ç±»ï¼ˆçº¢è‰²æ˜¾ç¤ºï¼‰
â”‚           â””â”€â”€ .btn-pause æ–°ç±»ï¼ˆé»„è‰²è­¦å‘Šè‰²ï¼‰
â”‚
â”‚       **è¯¦ç»†æ ·ä¾‹ä»£ç ï¼š**
â”‚       ```vue
â”‚       <!-- ä»»åŠ¡å¡ç‰‡å†…å®¹ç¤ºä¾‹ -->
â”‚       <div class="task-card">
â”‚         <!-- Headerï¼šçŠ¶æ€å’ŒæŒ‰é’® -->
â”‚         <div class="card-header">
â”‚           <div class="status-bar">
â”‚             <span class="status-tag" :class="task.status">
â”‚               {{ task.status }}
â”‚             </span>
â”‚             <span v-if="task.errorType" class="error-code">
â”‚               {{ task.errorType }}
â”‚             </span>
â”‚             <button v-if="task.status === 'sending'" class="btn-pause">
â”‚               â¸ æš‚åœ
â”‚             </button>
â”‚           </div>
â”‚         </div>
â”‚
â”‚         <!-- è¿›åº¦æ¡åŒºåŸŸï¼ˆä»»åŠ¡å¡ç‰‡å†…æ–°å¢ï¼‰[ä¼˜å…ˆçº§ 6]-->
â”‚         <div v-if="task.status === 'sending' || task.status === 'waiting'" class="progress-section">
â”‚           <el-progress
â”‚             :percentage="task.progress"
â”‚             :stroke-width="2"
â”‚             :color="task.status === 'sending' ? '#409eff' : '#67c23a'"
â”‚           ></el-progress>
â”‚           <div class="progress-info">
â”‚             {{ task.replyTokens }} / {{ task.predictedTokens }} tokens ({{ task.progress.toFixed(0) }}%)
â”‚           </div>
â”‚         </div>
â”‚
â”‚         <!-- åŸæœ‰å†…å®¹ -->
â”‚         <div class="card-content">
â”‚           <p class="task-content">{{ task.content }}</p>
â”‚         </div>
â”‚       </div>
â”‚       ```
â”‚
â”‚       **CSS æ ·å¼ï¼š**
â”‚       ```scss
â”‚       .progress-section {
â”‚         margin: 8px 0;
â”‚         padding: 8px 0;
â”‚         border-top: 1px solid #f0f0f0;
â”‚         border-bottom: 1px solid #f0f0f0;
â”‚
â”‚         :deep(.el-progress) {
â”‚           margin-bottom: 4px;
â”‚         }
â”‚
â”‚         .progress-info {
â”‚           font-size: 12px;
â”‚           color: #909399;
â”‚           text-align: right;
â”‚           margin-top: 4px;
â”‚         }
â”‚       }
â”‚       ```
â”‚
â”‚       **å“åº”å¼ç‰¹æ€§ï¼š**
â”‚       - âœ… å®æ—¶å“åº” task.progress çš„å˜åŒ–ï¼ˆ0-100ï¼‰
â”‚       - âœ… åŸºäºåç«¯è®¡ç®—çš„è¿›åº¦ï¼ˆpredictedTokens vs replyTokensï¼‰
â”‚       - âœ… é¢œè‰²åŒºåˆ†ï¼šsending è“è‰² / waiting ç»¿è‰²
â”‚       - âœ… è‡ªåŠ¨éšè—ï¼šä»»åŠ¡å®Œæˆæˆ–å¤±è´¥æ—¶æ¶ˆå¤±
â”‚
â”œâ”€â”€ [ä¿®æ”¹æ–‡ä»¶] components/ThreadDrawer.vue
â”‚   â””â”€â”€ å†…éƒ¨æ¨¡å—ä¿®æ”¹ï¼š
â”‚       â”œâ”€â”€ æ¨¡æ¿éƒ¨åˆ† [ä¿®æ”¹]ï¼š
â”‚       â”‚   â”œâ”€â”€ ç¬¬ 28-79 è¡Œï¼šé…ç½®æ˜¾ç¤ºåŒºåŸŸ âœ… å·²æœ‰
â”‚       â”‚   â”‚   â”œâ”€â”€ æ¨¡å‹åç§°ï¼štask.metadata?.modelName
â”‚       â”‚   â”‚   â”œâ”€â”€ æä¾›å•†ï¼štask.metadata?.providerId
â”‚       â”‚   â”‚   â”œâ”€â”€ ç³»ç»Ÿæç¤ºè¯ï¼š<details> å±•å¼€æ˜¾ç¤º
â”‚       â”‚   â”‚   â”œâ”€â”€ åˆ†ç‰‡ç­–ç•¥ï¼štask.metadata?.chunkStrategy
â”‚       â”‚   â”‚   â”œâ”€â”€ åˆ†ç‰‡å¤§å°ï¼štask.metadata?.chunkSize
â”‚       â”‚   â”‚   â”œâ”€â”€ å¹¶å‘æ•°ï¼štask.metadata?.concurrency
â”‚       â”‚   â”‚   â”œâ”€â”€ æ¸©åº¦å‚æ•°ï¼štask.metadata?.temperature
â”‚       â”‚   â”‚   â”œâ”€â”€ æœ€å¤§ Tokenï¼štask.metadata?.maxTokens
â”‚       â”‚   â”‚   â””â”€â”€ å›å¤æ¨¡å¼ï¼štask.metadata?.replyMode
â”‚       â”‚   â”œâ”€â”€ ç¬¬ 80-120 è¡Œï¼šçŠ¶æ€ä¿¡æ¯åŒºåŸŸ [ä¿®æ”¹]
â”‚       â”‚   â”‚   â”œâ”€â”€ çŠ¶æ€æ ‡ç­¾ï¼štask.statusï¼ˆå½©è‰²æ¸²æŸ“ï¼‰
â”‚       â”‚   â”‚   â”œâ”€â”€ é”™è¯¯ä»£ç ï¼štask.errorType ï¼ˆçº¢è‰²æ˜¾ç¤ºï¼‰
â”‚       â”‚   â”‚   â”œâ”€â”€ é”™è¯¯æ¶ˆæ¯ï¼štask.errorMessage
â”‚       â”‚   â”‚   â”œâ”€â”€ é‡è¯•æ¬¡æ•°ï¼štask.retryCount
â”‚       â”‚   â”‚   â””â”€â”€ è¿›åº¦æ¡ï¼ˆå®æ—¶æ›´æ–°ï¼‰
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ :style="{ width: task.progress + '%' }"
â”‚       â”‚   â”‚   â”‚   â””â”€â”€ æ˜¾ç¤ºç™¾åˆ†æ¯”æ–‡æœ¬
â”‚       â”‚   â”œâ”€â”€ ç¬¬ 121-180 è¡Œï¼šToken ç»Ÿè®¡åŒºåŸŸ [ä¿®æ”¹]
â”‚       â”‚   â”‚   â”œâ”€â”€ è¾“å…¥ Tokenï¼štask.inputTokens
â”‚       â”‚   â”‚   â”œâ”€â”€ è¾“å‡º Tokenï¼ˆå®é™…ï¼‰ï¼štask.replyTokens
â”‚       â”‚   â”‚   â”œâ”€â”€ è¾“å‡º Tokenï¼ˆé¢„æµ‹ï¼‰ï¼štask.predictedTokens
â”‚       â”‚   â”‚   â”œâ”€â”€ è¿›åº¦ç™¾åˆ†æ¯”ï¼š(task.replyTokens / task.predictedTokens * 100).toFixed(2)%
â”‚       â”‚   â”‚   â””â”€â”€ è´¹ç”¨ä¼°ç®—ï¼štask.cost
â”‚       â”‚   â”œâ”€â”€ ç¬¬ 181-250 è¡Œï¼šç¿»è¯‘ç»“æœåŒºåŸŸ [æ–°å¢]
â”‚       â”‚   â”‚   â”œâ”€â”€ åŸå§‹å†…å®¹ï¼štask.content
â”‚       â”‚   â”‚   â”œâ”€â”€ ç¿»è¯‘ç»“æœï¼štask.translation ï¼ˆå®æ—¶æ›´æ–°ï¼‰
â”‚       â”‚   â”‚   â””â”€â”€ æ—¶é—´æˆ³ä¿¡æ¯
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ å‘é€æ—¶é—´ï¼štask.sentTime
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ å®Œæˆæ—¶é—´ï¼štask.replyTime
â”‚       â”‚   â”‚   â”‚   â””â”€â”€ è€—æ—¶ï¼štask.durationMs ms
â”‚       â”‚   â””â”€â”€ ç¬¬ 251-280 è¡Œï¼šæ“ä½œæŒ‰é’®åŒºåŸŸ [æ–°å¢]
â”‚       â”‚       â”œâ”€â”€ æš‚åœ/ç»§ç»­ æŒ‰é’®ï¼ˆæ¡ä»¶æ˜¾ç¤ºï¼‰
â”‚       â”‚       â”œâ”€â”€ é‡è¯• æŒ‰é’®ï¼ˆä»…é”™è¯¯çŠ¶æ€ï¼‰
â”‚       â”‚       â””â”€â”€ å…³é—­ æŒ‰é’®
â”‚       â”œâ”€â”€ è„šæœ¬éƒ¨åˆ† [ä¿®æ”¹]ï¼š
â”‚       â”‚   â”œâ”€â”€ props: task (Task interface)
â”‚       â”‚   â”œâ”€â”€ data: autoRefresh, refreshInterval
â”‚       â”‚   â”œâ”€â”€ computed:
â”‚       â”‚   â”‚   â”œâ”€â”€ taskProgress() - è®¡ç®—è¿›åº¦ç™¾åˆ†æ¯” [æ–°å¢]
â”‚       â”‚   â”‚   â”œâ”€â”€ formattedStatus() - æ ¼å¼åŒ–çŠ¶æ€æ–‡æœ¬ [æ–°å¢]
â”‚       â”‚   â”‚   â””â”€â”€ costDisplay() - æ ¼å¼åŒ–è´¹ç”¨æ˜¾ç¤º [æ–°å¢]
â”‚       â”‚   â”œâ”€â”€ methods:
â”‚       â”‚   â”‚   â”œâ”€â”€ pauseTask() - [æ–°å¢] è°ƒç”¨æš‚åœæ¥å£
â”‚       â”‚   â”‚   â”œâ”€â”€ retryTask() - [æ–°å¢] è°ƒç”¨é‡è¯•æ¥å£
â”‚       â”‚   â”‚   â””â”€â”€ formatTime() - æ—¶é—´æ ¼å¼åŒ–è¾…åŠ©å‡½æ•° [æ–°å¢]
â”‚       â”‚   â”œâ”€â”€ watchers:
â”‚       â”‚   â”‚   â””â”€â”€ watch task.translation - å®æ—¶æ»šåŠ¨åˆ°åº•éƒ¨ [æ–°å¢]
â”‚       â”‚   â””â”€â”€ onMounted/onUnmounted: è‡ªåŠ¨åˆ·æ–°æ§åˆ¶ [æ–°å¢]
â”‚       â””â”€â”€ æ ·å¼éƒ¨åˆ†ï¼š
â”‚           â”œâ”€â”€ .config-section - é…ç½®åŒºåŸŸæ ·å¼
â”‚           â”œâ”€â”€ .status-section - çŠ¶æ€åŒºåŸŸæ ·å¼
â”‚           â”œâ”€â”€ .progress-bar - è¿›åº¦æ¡æ ·å¼ï¼ˆå¸¦åŠ¨ç”»ï¼‰
â”‚           â”œâ”€â”€ .translation-result - ç¿»è¯‘ç»“æœåŒºåŸŸæ ·å¼
â”‚           â””â”€â”€ .token-stats - Token ç»Ÿè®¡æ ·å¼
â”‚
â””â”€â”€ [ä¿®æ”¹æ–‡ä»¶] stores/translate.store.ts
    â””â”€â”€ å†…éƒ¨æ¨¡å—ä¿®æ”¹ï¼š
        â”œâ”€â”€ State [ä¿®æ”¹]ï¼š
        â”‚   â”œâ”€â”€ ç°æœ‰å­—æ®µä¿æŒä¸å˜
        â”‚   â”œâ”€â”€ æ–°å¢ï¼šenableRealTimeUpdateï¼ˆå®æ—¶æ›´æ–°å¼€å…³ï¼‰
        â”‚   â””â”€â”€ æ–°å¢ï¼štaskStateCacheï¼ˆä»»åŠ¡çŠ¶æ€ç¼“å­˜ï¼‰
        â”œâ”€â”€ Getters [ä¿®æ”¹]ï¼š
        â”‚   â”œâ”€â”€ ç°æœ‰ Getters ä¿æŒä¸å˜
        â”‚   â””â”€â”€ æ–°å¢ï¼šgetTaskState(taskId)
        â”œâ”€â”€ Actions [ä¿®æ”¹]ï¼š
        â”‚   â”œâ”€â”€ fetchTaskList() - ä¿æŒä¸å˜
        â”‚   â”œâ”€â”€ subscribeTaskUpdates() - [æ–°å¢]
        â”‚   â”‚   â”œâ”€â”€ è®¢é˜…åç«¯ä»»åŠ¡çŠ¶æ€å˜åŒ–äº‹ä»¶
        â”‚   â”‚   â”œâ”€â”€ å®æ—¶æ›´æ–° store ä¸­çš„ä»»åŠ¡çŠ¶æ€
        â”‚   â”‚   â””â”€â”€ è§¦å‘ UI å“åº”å¼æ›´æ–°
        â”‚   â”œâ”€â”€ pauseTask(taskId) - [æ–°å¢]
        â”‚   â”‚   â”œâ”€â”€ è°ƒç”¨åç«¯ IPCï¼šipc-invoke('pause-task', taskId)
        â”‚   â”‚   â”œâ”€â”€ æ›´æ–°æœ¬åœ°çŠ¶æ€
        â”‚   â”‚   â””â”€â”€ è¿”å›æˆåŠŸ/å¤±è´¥ç»“æœ
        â”‚   â””â”€â”€ unsubscribeTaskUpdates() - [æ–°å¢]
        â”‚       â””â”€â”€ æ¸…ç†äº‹ä»¶ç›‘å¬
        â””â”€â”€ Persistence å±‚ [ä¿®æ”¹]ï¼š
            â”œâ”€â”€ ç°æœ‰æŒä¹…åŒ–é€»è¾‘ä¿æŒä¸å˜
            â””â”€â”€ æ–°å¢ï¼šå®æ—¶æ¨é€äº‹ä»¶å¤„ç†
```

---

### **ç¬¬ä¸‰å±‚ï¼šå‰ç«¯ç±»å‹å®šä¹‰ä¿®æ”¹**

```
Nimbria/Client/GUI/DemoPage/LlmTranslate/types/
â”‚
â”œâ”€â”€ [ä¿®æ”¹æ–‡ä»¶] task.ts
â”‚   â””â”€â”€ å†…éƒ¨æ¨¡å—ä¿®æ”¹ï¼š
â”‚       â”œâ”€â”€ Task æ¥å£ [æ‰©å±•]
â”‚       â”‚   â”œâ”€â”€ åŸæœ‰å­—æ®µä¿æŒ
â”‚       â”‚   â”œâ”€â”€ æ–°å¢å­—æ®µï¼šerrorType?: string ï¼ˆé”™è¯¯ç±»å‹ä»£ç ï¼‰
â”‚       â”‚   â”œâ”€â”€ æ–°å¢å­—æ®µï¼šerrorMessage?: string ï¼ˆé”™è¯¯ä¿¡æ¯ï¼‰
â”‚       â”‚   â”œâ”€â”€ æ–°å¢å­—æ®µï¼šretryCount: number ï¼ˆé‡è¯•æ¬¡æ•°ï¼‰
â”‚       â”‚   â”œâ”€â”€ æ–°å¢å­—æ®µï¼šmetadata?: TaskMetadata ï¼ˆä»»åŠ¡å…ƒæ•°æ®ï¼‰
â”‚       â”‚   â”œâ”€â”€ æ–°å¢å­—æ®µï¼šmetadataJson?: string ï¼ˆå…ƒæ•°æ® JSONï¼‰
â”‚       â”‚   â””â”€â”€ ä¿®æ”¹å­—æ®µï¼šstatus çš„ç±»å‹å€¼
â”‚       â””â”€â”€ TaskStatus ç±»å‹ [æ–°å¢]
â”‚           â”œâ”€â”€ 'unsent' - æœªå‘é€
â”‚           â”œâ”€â”€ 'waiting' - ç­‰å¾…ä¸­
â”‚           â”œâ”€â”€ 'sending' - å‘é€ä¸­
â”‚           â”œâ”€â”€ 'throttled' - é™æµ
â”‚           â”œâ”€â”€ 'completed' - å·²å®Œæˆ
â”‚           â”œâ”€â”€ 'error' - é”™è¯¯
â”‚           â””â”€â”€ 'paused' - å·²æš‚åœ
â”‚
â”œâ”€â”€ [æ–°å¢æ–‡ä»¶] model.ts
â”‚   â””â”€â”€ å†…éƒ¨æ¨¡å—ï¼š
â”‚       â”œâ”€â”€ ModelOption æ¥å£
â”‚       â”‚   â”œâ”€â”€ modelId: string ï¼ˆæ ¼å¼ï¼šproviderId.modelNameï¼‰
â”‚       â”‚   â”œâ”€â”€ modelName: string ï¼ˆæ˜¾ç¤ºåç§°ï¼‰
â”‚       â”‚   â”œâ”€â”€ providerId: string ï¼ˆæä¾›å•† IDï¼‰
â”‚       â”‚   â”œâ”€â”€ providerName: string ï¼ˆæä¾›å•†åç§°ï¼‰
â”‚       â”‚   â””â”€â”€ isActive: boolean ï¼ˆæ˜¯å¦å·²æ¿€æ´»ï¼‰
â”‚       â””â”€â”€ ModelGroup æ¥å£
â”‚           â”œâ”€â”€ providerId: string
â”‚           â”œâ”€â”€ providerName: string
â”‚           â””â”€â”€ models: ModelOption[]
â”‚
â”œâ”€â”€ [æ–°å¢æ–‡ä»¶] metadata.ts
â”‚   â””â”€â”€ å†…éƒ¨æ¨¡å—ï¼š
â”‚       â””â”€â”€ TaskMetadata æ¥å£
â”‚           â”œâ”€â”€ modelId: string
â”‚           â”œâ”€â”€ modelName: string
â”‚           â”œâ”€â”€ providerId: string
â”‚           â”œâ”€â”€ systemPrompt: string
â”‚           â”œâ”€â”€ chunkStrategy: 'line' | 'token'
â”‚           â”œâ”€â”€ chunkSize: number
â”‚           â”œâ”€â”€ concurrency: number
â”‚           â”œâ”€â”€ replyMode: 'complete' | 'streaming'
â”‚           â”œâ”€â”€ temperature: number
â”‚           â”œâ”€â”€ maxTokens: number
â”‚           â””â”€â”€ [å…¶ä»–é…ç½®å­—æ®µ]
â”‚
â””â”€â”€ [ä¿®æ”¹æ–‡ä»¶] batch.ts
    â””â”€â”€ å†…éƒ¨æ¨¡å—ä¿®æ”¹ï¼š
        â”œâ”€â”€ Batch æ¥å£ [ä¿®æ”¹]
        â”‚   â”œâ”€â”€ åŸæœ‰å­—æ®µä¿æŒ
        â”‚   â”œâ”€â”€ configJson: string ä¿æŒ
        â”‚   â”œâ”€â”€ æ–°å¢å­—æ®µï¼šconfig?: BatchConfig ï¼ˆè§£æåçš„é…ç½®å¯¹è±¡ï¼‰
        â”‚   â””â”€â”€ [å…¶ä»–å­—æ®µ]
        â””â”€â”€ BatchConfig æ¥å£ [å·²å­˜åœ¨]
```

---

### **ç¬¬å››å±‚ï¼šåç«¯ IPC æ¶ˆæ¯å¤„ç†ä¿®æ”¹**

```
Nimbria/src-electron/ipc/main-renderer/
â”‚
â””â”€â”€ [ä¿®æ”¹æ–‡ä»¶] llm-translate-handlers.ts
    â””â”€â”€ å†…éƒ¨æ¨¡å—ä¿®æ”¹ï¼š
        â”œâ”€â”€ IPC Handler æ³¨å†Œ [ä¿®æ”¹]ï¼š
        â”‚   â”œâ”€â”€ ipcMain.handle('get-batches', ...) - ä¿æŒä¸å˜
        â”‚   â”œâ”€â”€ ipcMain.handle('get-tasks', ...) - ä¿æŒä¸å˜
        â”‚   â”œâ”€â”€ ipcMain.handle('submit-tasks', ...) - ä¿æŒä¸å˜
        â”‚   â”‚   â”œâ”€â”€ æ–°å¢ï¼šè°ƒç”¨ TaskStateManager.initializeTask()
        â”‚   â”‚   â””â”€â”€ æ–°å¢ï¼šå‘å‡ºä»»åŠ¡æäº¤äº‹ä»¶
        â”‚   â”œâ”€â”€ ipcMain.handle('pause-task', ...) - [æ–°å¢]
        â”‚   â”‚   â”œâ”€â”€ å‚æ•°ï¼štaskId
        â”‚   â”‚   â”œâ”€â”€ è°ƒç”¨ TaskStateManager.pauseTask(taskId)
        â”‚   â”‚   â”œâ”€â”€ æ›´æ–°æ•°æ®åº“ä»»åŠ¡çŠ¶æ€ä¸º 'paused'
        â”‚   â”‚   â””â”€â”€ è¿”å›æ“ä½œç»“æœ
        â”‚   â”œâ”€â”€ ipcMain.handle('retry-task', ...) - [æ–°å¢]
        â”‚   â”‚   â”œâ”€â”€ å‚æ•°ï¼štaskId
        â”‚   â”‚   â”œâ”€â”€ é‡ç½®ä»»åŠ¡çŠ¶æ€ä¸º 'waiting'
        â”‚   â”‚   â””â”€â”€ æ”¾å›ä»»åŠ¡é˜Ÿåˆ—
        â”‚   â””â”€â”€ ipcMain.on('task-state-changed', ...) - [æ–°å¢]
        â”‚       â”œâ”€â”€ æ¥æ”¶æ¥è‡ªåç«¯çš„ä»»åŠ¡çŠ¶æ€å˜åŒ–äº‹ä»¶
        â”‚       â””â”€â”€ è½¬å‘ç»™æ‰€æœ‰ renderer è¿›ç¨‹
        â”‚
        â””â”€â”€ äº‹ä»¶å¹¿æ’­ [æ–°å¢]ï¼š
            â”œâ”€â”€ mainWindow.webContents.send('task:state-changed', event)
            â”œâ”€â”€ mainWindow.webContents.send('task:progress-updated', event)
            â”œâ”€â”€ mainWindow.webContents.send('task:completed', event)
            â””â”€â”€ mainWindow.webContents.send('task:error-occurred', event)
```

---

### **ç¬¬äº”å±‚ï¼šæ•°æ®åº“ç±»å‹å’Œåˆå§‹åŒ–ä¿®æ”¹**

```
Nimbria/src-electron/types/LlmTranslate/
â”‚
â”œâ”€â”€ [ä¿®æ”¹æ–‡ä»¶] backend/index.ts
â”‚   â””â”€â”€ å†…éƒ¨æ¨¡å—ä¿®æ”¹ï¼š
â”‚       â”œâ”€â”€ Task æ¥å£ [æ‰©å±•] âœ… å·²åœ¨è®¾è®¡æ–‡æ¡£ä¸­å®šä¹‰
â”‚       â”œâ”€â”€ TaskStatus ç±»å‹ [æ–°å¢] âœ… å·²åœ¨è®¾è®¡æ–‡æ¡£ä¸­å®šä¹‰
â”‚       â”œâ”€â”€ TaskMetadata æ¥å£ [æ–°å¢] âœ… å·²åœ¨è®¾è®¡æ–‡æ¡£ä¸­å®šä¹‰
â”‚       â”œâ”€â”€ Batch æ¥å£ - ä¿æŒä¸å˜
â”‚       â””â”€â”€ [å…¶ä»–ç±»å‹] - ä¿æŒä¸å˜
â”‚
â””â”€â”€ [ä¿®æ”¹æ–‡ä»¶] backend/database.ts
    â””â”€â”€ å†…éƒ¨æ¨¡å—ä¿®æ”¹ï¼š
        â”œâ”€â”€ initializeLlmTranslateSchema() - ä¿æŒä¸å˜ï¼ˆè¡¨å·²å­˜åœ¨ï¼‰
        â”œâ”€â”€ è¿ç§»è„šæœ¬ï¼ˆå¦‚éœ€ï¼‰ - æ·»åŠ æ–°å­—æ®µ
        â”‚   â”œâ”€â”€ è¿ç§»ï¼šALTER TABLE Llmtranslate_tasks ADD COLUMN error_type TEXT
        â”‚   â”œâ”€â”€ è¿ç§»ï¼šALTER TABLE Llmtranslate_tasks ADD COLUMN error_message TEXT
        â”‚   â”œâ”€â”€ è¿ç§»ï¼šALTER TABLE Llmtranslate_tasks ADD COLUMN retry_count INTEGER DEFAULT 0
        â”‚   â”œâ”€â”€ è¿ç§»ï¼šALTER TABLE Llmtranslate_tasks ADD COLUMN metadata_json TEXT
        â”‚   â””â”€â”€ [éªŒè¯æ‰€æœ‰å­—æ®µéƒ½å·²å­˜åœ¨]
        â””â”€â”€ å­—æ®µåˆ«åæ˜ å°„å·²å®Œæˆ âœ…
```

---

## ğŸ“‹ å®ç°ä¼˜å…ˆçº§å’Œä¾èµ–å…³ç³»

```
ä¼˜å…ˆçº§ 1: ModelSelector ç»„ä»¶ [å‰æï¼šæ— ]
  â””â”€ ä¼˜å…ˆçº§ 2: ThreadDrawer è¯¦æƒ…é¢æ¿å¢å¼º
      â””â”€ ä¼˜å…ˆçº§ 3: å¼‚å¸¸å¤„ç†ä¸çŠ¶æ€ç®¡ç†
          â”œâ”€ ä¼˜å…ˆçº§ 4: LlmTranslationClient
          â””â”€ ä¼˜å…ˆçº§ 5: TaskStateManager
              â”œâ”€ ä¼˜å…ˆçº§ 6: UI ç»„ä»¶è°ƒæ•´ï¼ˆä»»åŠ¡å¡ç‰‡ï¼‰
              â”œâ”€ ä¼˜å…ˆçº§ 7: äº‹ä»¶é©±åŠ¨é›†æˆ
              â””â”€ ä¼˜å…ˆçº§ 8: é€»è¾‘å®Œæ•´æ€§æ£€æŸ¥
```

---

## âœ… å·²å®Œæˆçš„å·¥ä½œ

- [x] å­—æ®µåˆ«åæ˜ å°„ä¿®å¤ï¼ˆ6 ä¸ª SQL æŸ¥è¯¢æ–¹æ³•ï¼‰
- [x] æ‰¹æ³¨æ–‡æ¡£å¤„ç†å’Œè®¾è®¡æ–‡æ¡£ç¼–å†™
- [x] æ–‡ä»¶æ¶æ„ä¿®æ”¹æ ‘è§„åˆ’

## â³ å¾…å®Œæˆçš„å·¥ä½œ

- [ ] ä¼˜å…ˆçº§ 1: ModelSelector.vue ç»„ä»¶å¼€å‘
- [ ] ä¼˜å…ˆçº§ 2: ThreadDrawer å¢å¼º
- [ ] ä¼˜å…ˆçº§ 3-8: æ ¸å¿ƒæœåŠ¡å’ŒçŠ¶æ€ç®¡ç†å¼€å‘

