# ğŸ® MC é…æ–¹ç¿»è¯‘å¤„ç†ç³»ç»Ÿ v1.0

ä¸€ä¸ªå®Œæ•´çš„è‡ªåŠ¨åŒ–è§£å†³æ–¹æ¡ˆï¼Œç”¨äºè§£æMinecrafté…æ–¹æ—¥å¿—ã€æå–ã€ç¿»è¯‘å’Œç”Ÿæˆä¼˜åŒ–çš„JSONç´¢å¼•ã€‚

## ğŸ“‹ ç³»ç»Ÿæ¶æ„

```
recipes.log (44726è¡Œ)
    â†“
[é˜¶æ®µ1] è§£ææ—¥å¿— â†’ recipes.raw.json (200ä¸‡è¡Œ)
    â†“
[é˜¶æ®µ2] æå–ç¿»è¯‘é”®ï¼ˆå»é‡ï¼‰ â†’ lang.yaml + lang.mapping.json
    â†“
[é˜¶æ®µ3] AIç¿»è¯‘ (å¯é€‰) â†’ lang.cn.yaml
    â†“
[é˜¶æ®µ4] åˆå¹¶ç¿»è¯‘ (å¯é€‰) â†’ recipes.cn.json
    â†“
[é˜¶æ®µ5] ç”Ÿæˆä¼˜åŒ–ç´¢å¼• â†’ å¤šä¸ªJSONç´¢å¼• + å¢é‡æ•°æ®
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚
- Node.js 14+ 
- npm æˆ– yarn

### å®‰è£…ä¾èµ–

```bash
cd McRecipe
npm install
```

### åŸºç¡€æ¨¡å¼ï¼ˆä»…è§£æå’Œæå–ï¼‰

```bash
npm run all -- --skip-translation
```

è¿™å°†æ‰§è¡Œï¼š
1. âœ… è§£ææ—¥å¿—
2. âœ… æå–ç¿»è¯‘é”®ï¼ˆå»é‡ï¼‰
3. âœ… ç”Ÿæˆä¼˜åŒ–ç´¢å¼•

### å®Œæ•´æ¨¡å¼ï¼ˆåŒ…æ‹¬AIç¿»è¯‘ï¼‰

#### ç¬¬ä¸€æ­¥ï¼šåŸºç¡€å¤„ç†

```bash
npm run all -- --skip-translation
```

ç”Ÿæˆæ–‡ä»¶ï¼š
- `output/recipes.raw.json` - è§£æåçš„åŸå§‹é…æ–¹
- `output/lang.yaml` - **å»é‡åçš„è‹±æ–‡åç§°**ï¼ˆç”¨äºç¿»è¯‘ï¼‰
- `output/lang.mapping.json` - IDæ˜ å°„å…³ç³»

#### ç¬¬äºŒæ­¥ï¼šAIç¿»è¯‘

**1. é…ç½®APIå¯†é’¥**

ç¼–è¾‘ `config.yaml`ï¼š

```yaml
llm:
  api_key: "sk-..."  # ä½ çš„OpenAI APIå¯†é’¥
  base_url: "https://api.openai.com/v1"
  model: "gpt-4o-mini"
  max_concurrent: 5  # å¹¶å‘æ•°ï¼ˆæ ¹æ®APIé™åˆ¶è°ƒæ•´ï¼‰
```

**2. è¿è¡Œç¿»è¯‘è„šæœ¬**

```bash
npm run translate
```

è„šæœ¬ä¼šï¼š
- âœ“ è¯»å–å»é‡åçš„ `lang.yaml`
- âœ“ å¹¶å‘è°ƒç”¨ OpenAI API
- âœ“ è·Ÿè¸ªæ¯ä¸ªæ‰¹æ¬¡çš„è¿›åº¦
- âœ“ æ”¯æŒæ–­ç‚¹ç»­ä¼ ï¼ˆä¸­æ–­åå¯ç»§ç»­ï¼‰
- âœ“ è¾“å‡ºç¿»è¯‘ç»“æœåˆ° `lang.cn.yaml`

**æ˜¾ç¤ºä¿¡æ¯ç¤ºä¾‹ï¼š**

```
è¿›åº¦: [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 40% 1000/2500 (å¤„ç†ä¸­:3) å¤±è´¥:2
```

#### ç¬¬ä¸‰æ­¥ï¼šå®Œæˆå¤„ç†

```bash
npm run all
```

è¿™å°†è‡ªåŠ¨ï¼š
1. âœ… æ£€æµ‹ç¿»è¯‘æ–‡ä»¶
2. âœ… åˆå¹¶ç¿»è¯‘ â†’ `recipes.cn.json`
3. âœ… ç”Ÿæˆæ‰€æœ‰ä¼˜åŒ–ç´¢å¼•

## ğŸ“Š ç”Ÿæˆçš„æ–‡ä»¶è¯¦è§£

### æ ¸å¿ƒæ–‡ä»¶

| æ–‡ä»¶ | å¤§å° | ç”¨é€” |
|------|------|------|
| `recipes.raw.json` | ~200MB | è§£æåçš„åŸå§‹é…æ–¹ |
| `lang.yaml` | ~1.5MB | å»é‡åçš„è‹±æ–‡åç§°ï¼ˆç¿»è¯‘ç”¨ï¼‰ |
| `lang.cn.yaml` | ~1.5MB | ä¸­æ–‡ç¿»è¯‘ç»“æœ |
| `recipes.cn.json` | ~200MB | å¸¦ä¸­æ–‡ç¿»è¯‘çš„é…æ–¹ |

### ä¼˜åŒ–ç´¢å¼•

#### 1. **items.index.json** - ç‰©å“å¿«é€ŸæŸ¥è¯¢
```json
{
  "minecraft:iron_ingot": {
    "name": "Iron Ingot",
    "nameCn": "é“é”­",
    "type": "item",
    "recipes": [123, 456, ...],
    "asInput": [...],
    "asOutput": [...]
  }
}
```

#### 2. **platforms.index.json** - å¹³å°ç´¢å¼•
```json
{
  "minecraft": {
    "name": "Minecraft",
    "recipes": [100, 200, ...],
    "itemCount": 5000
  }
}
```

#### 3. **recipe.graph.json** - StarChartå›¾æ•°æ®
ç”¨äºSigma.jså¯è§†åŒ–ï¼ŒåŒ…å«èŠ‚ç‚¹å’Œè¾¹çš„å®Œæ•´å®šä¹‰ã€‚

#### 4. **search.index.json** - å…¨æ–‡æœç´¢ç´¢å¼•
```json
{
  "items": [
    { "id": "minecraft:iron_ingot", "name": "Iron Ingot", "tags": [...] },
    ...
  ]
}
```

#### 5. **incremental/** - æŒ‰å¹³å°çš„å¢é‡æ•°æ®
```
incremental/
â”œâ”€â”€ minecraft.json
â”œâ”€â”€ gregtech.json
â”œâ”€â”€ tinkers.json
â””â”€â”€ ...
```

## ğŸ¯ æ ¸å¿ƒç‰¹æ€§

### âœ¨ å»é‡æœºåˆ¶

**é—®é¢˜**ï¼šä¸åŒçš„IDå¯èƒ½æœ‰ç›¸åŒçš„æ˜¾ç¤ºåç§°
- `minecraft:iron_ingot` â†’ "Iron Ingot"
- `some_mod:iron_ingot` â†’ "Iron Ingot"

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æå– **å”¯ä¸€çš„è‹±æ–‡åç§°** â†’ `lang.yaml`
2. ç¿»è¯‘æ—¶åªéœ€ç¿»è¯‘å»é‡åçš„å†…å®¹
3. é€šè¿‡æ˜ å°„æ–‡ä»¶ `lang.mapping.json` å»ºç«‹å…³ç³»
4. åˆå¹¶æ—¶è‡ªåŠ¨æ˜ å°„å›åŸå§‹ID

**æˆæœ¬èŠ‚çœ**ï¼š
- å‡å°‘ 30-50% çš„ç¿»è¯‘æˆæœ¬
- å‡å°‘ AI Token ä½¿ç”¨

### ğŸ”„ æ–­ç‚¹ç»­ä¼ 

ç¿»è¯‘ä¸­æ–­ï¼Ÿä¸ç”¨æ‹…å¿ƒï¼

- è‡ªåŠ¨ä¿å­˜è¿›åº¦åˆ° `translation_progress.json`
- å†æ¬¡è¿è¡Œæ—¶è‡ªåŠ¨ä»ä¸­æ–­å¤„ç»§ç»­
- å·²å®Œæˆçš„æ‰¹æ¬¡ä¸ä¼šé‡æ–°ç¿»è¯‘

### ğŸ“ˆ å®æ—¶è¿›åº¦è·Ÿè¸ª

```
è¿›åº¦: [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 50%
å·²å®Œæˆ: 1500/3000
å¤„ç†ä¸­: 5
å¤±è´¥: 0
é¢„è®¡å‰©ä½™: 2åˆ†é’Ÿ
```

### âš¡ å¹¶å‘ç¿»è¯‘

æ”¯æŒè‡ªå®šä¹‰å¹¶å‘æ•°é‡ï¼š

```yaml
llm:
  max_concurrent: 5  # åŒæ—¶æœ€å¤š5ä¸ªè¯·æ±‚
  batch_size: 300    # æ¯æ‰¹300ä¸ªåç§°
```

## ğŸ”§ è„šæœ¬è¯¦è§£

### 1. è§£æè„šæœ¬ - `1-parser.js`

```bash
npm run parse
```

- è¯»å– `recipes.log`
- é€è¡Œè§£æé…æ–¹æ•°æ®
- å¤„ç†å¤šç§é…æ–¹æ ¼å¼
- è¾“å‡º `recipes.raw.json`

### 2. æå–è„šæœ¬ - `2-extract-lang.js`

```bash
npm run extract
```

- ä»é…æ–¹ä¸­æå–æ‰€æœ‰ID
- æŒ‰ **æ˜¾ç¤ºåç§°** å»é‡
- ç”Ÿæˆ `lang.yaml`ï¼ˆå¾…ç¿»è¯‘ï¼‰
- ç”Ÿæˆ `lang.mapping.json`ï¼ˆIDæ˜ å°„ï¼‰

### 3. ç¿»è¯‘è„šæœ¬ - `translate-with-ai.js`

```bash
npm run translate
```

**å·¥ä½œæµ**ï¼š
1. è¯»å– `lang.yaml`
2. åˆ†æ‰¹å¤„ç†
3. å¹¶å‘è°ƒç”¨OpenAI API
4. å®æ—¶è·Ÿè¸ªè¿›åº¦
5. è¾“å‡º `lang.cn.yaml`

### 4. åˆå¹¶è„šæœ¬ - `3-merge-translation.js`

```bash
npm run merge
```

- åŠ è½½åŸå§‹é…æ–¹
- é€šè¿‡æ˜ å°„æŸ¥æ‰¾ä¸­æ–‡ç¿»è¯‘
- æ·»åŠ  `nameCn`ã€`platformCn` å­—æ®µ
- è¾“å‡º `recipes.cn.json`

### 5. ç´¢å¼•è„šæœ¬ - `4-generate-indexes.js`

```bash
npm run index
```

- ç”Ÿæˆç‰©å“ç´¢å¼•
- ç”Ÿæˆå¹³å°ç´¢å¼•
- ç”Ÿæˆå›¾æ•°æ®ï¼ˆä¾›Sigma.jsï¼‰
- ç”Ÿæˆæœç´¢ç´¢å¼•
- ç”Ÿæˆå¢é‡æ•°æ®

## ğŸ“Œ é…ç½®è¯¦è§£

### config.yaml å…³é”®å‚æ•°

```yaml
llm:
  api_key: "sk-..."              # OpenAIå¯†é’¥ï¼ˆå¿…éœ€ï¼‰
  base_url: "https://api.openai.com/v1"
  model: "gpt-4o-mini"           # ä½¿ç”¨çš„æ¨¡å‹
  temperature: 0.3               # 0=ç¨³å®šï¼Œ1=åˆ›æ„
  max_tokens: 2000               # æ¯æ¬¡è¯·æ±‚æœ€å¤§token
  
  max_concurrent: 5              # ğŸ’¡ å¹¶å‘æ•°ï¼ˆ5-10æ¨èï¼‰
  batch_size: 300                # ğŸ’¡ æ¯æ‰¹å¤§å°ï¼ˆ200-500æ¨èï¼‰
  retry_times: 3                 # å¤±è´¥é‡è¯•æ¬¡æ•°
  
  rate_limit:
    requests_per_minute: 50      # APIé™æµ
    tokens_per_minute: 40000     # Tokené™æµ
```

### æˆæœ¬è®¡ç®—ç¤ºä¾‹

ä»¥ 30,000 ä¸ªå»é‡åçš„åç§°ä¸ºä¾‹ï¼š

- æ¯ä¸ªåç§°å¹³å‡ 15 tokens
- æ€»å…±çº¦ 450,000 tokens
- GPT-4o-mini ä»·æ ¼ï¼š$0.000150 / 1000 tokens
- **é¢„è®¡è´¹ç”¨ï¼š$0.07 å·¦å³**

## âš ï¸ å¸¸è§é—®é¢˜

### Q: ç¿»è¯‘ä¸­é€”ä¸­æ–­äº†æ€ä¹ˆåŠï¼Ÿ

A: å†æ¬¡è¿è¡Œè„šæœ¬ä¼šè‡ªåŠ¨ç»§ç»­ï¼š
```bash
npm run translate
```

### Q: å¦‚ä½•è°ƒæ•´å¹¶å‘æ•°æé«˜é€Ÿåº¦ï¼Ÿ

A: ç¼–è¾‘ `config.yaml`ï¼š
```yaml
max_concurrent: 10  # æé«˜åˆ°10
batch_size: 200    # å‡å°æ‰¹æ¬¡
```

### Q: å¦‚ä½•ä½¿ç”¨å…¶ä»–LLMæœåŠ¡ï¼Ÿ

A: ä¿®æ”¹ `config.yaml` ä¸­çš„ `base_url`ï¼š
```yaml
base_url: "https://api.together.ai/v1"  # Together AI
base_url: "https://api.groq.com/v1"     # Groq
```

OpenAI SDK å…¼å®¹å¤šç§æœåŠ¡ã€‚

### Q: ç¿»è¯‘ç»“æœä¸æ»¡æ„æ€ä¹ˆåŠï¼Ÿ

A: ç›´æ¥ç¼–è¾‘ `lang.cn.yaml` è¿›è¡Œæ‰‹åŠ¨ä¿®æ­£ï¼Œç„¶åï¼š
```bash
npm run merge   # é‡æ–°åˆå¹¶
npm run index   # é‡æ–°ç”Ÿæˆç´¢å¼•
```

### Q: ç”Ÿæˆçš„ç´¢å¼•æ–‡ä»¶å¾ˆå¤§æ€ä¹ˆåŠï¼Ÿ

A: ä½¿ç”¨ `incremental/` ç›®å½•ä¸­çš„å¢é‡æ•°æ®ï¼ŒæŒ‰éœ€åŠ è½½æ¯ä¸ªå¹³å°ã€‚

## ğŸ¨ é›†æˆåˆ°StarChartç³»ç»Ÿ

1. å¤åˆ¶ `recipe.graph.json` åˆ°å‰ç«¯é¡¹ç›®
2. ç”¨ Sigma.js åŠ è½½è¯¥JSON
3. æ ¹æ®ç”¨æˆ·æ“ä½œåŠ è½½ `incremental/` ä¸­çš„å¹³å°æ•°æ®

```javascript
// åˆå§‹åŒ–å›¾
const graph = new graphology.Graph();
const data = require('recipe.graph.json');
graph.import(data);

// åŠ è½½å¹³å°æ•°æ®
const platform = require('incremental/minecraft.json');
graph.import(platform);
```

## ğŸ”„ å®Œæ•´å·¥ä½œæµï¼ˆå‚è€ƒï¼‰

```bash
# 1. åªåšåŸºç¡€å¤„ç†
npm run all -- -s

# 2. é…ç½®APIå¯†é’¥åç¿»è¯‘
# ç¼–è¾‘ config.yaml

# 3. è¿è¡Œç¿»è¯‘
npm run translate

# 4. å®Œæˆæ‰€æœ‰å¤„ç†
npm run all

# 5. æŸ¥çœ‹è¾“å‡º
ls -lh output/
```

## ğŸ“ æŠ€æœ¯æ”¯æŒ

é‡åˆ°é—®é¢˜ï¼ŸæŸ¥çœ‹ï¼š
- `translation.log` - ç¿»è¯‘æ—¥å¿—
- `translation_progress.json` - è¿›åº¦æ–‡ä»¶
- å„è„šæœ¬çš„è¯¦ç»†è¾“å‡º

## ğŸ“ è®¸å¯è¯

MIT

---

**æœ€åæ›´æ–°**: 2025-10-19
**ç‰ˆæœ¬**: 1.0.0
