<!-- 6ea12df1-638d-4214-913f-ebeef7c9937b 061a0ea2-8400-4c59-9bb4-ef8a29a8c6d4 -->
# 更新功能与架构设计文档

## 第一阶段：分析与规划

### 1. 代码库结构分析

- 深入分析 Client/stores 的所有模块，确认状态管理架构
- 分析 Client/Service 的服务层实现
- 分析 src-electron 的主进程架构和服务模块
- 分析 Client/GUI 的界面组织结构

### 2. 功能清单梳理

根据代码库和总结文档，整理出完整的功能清单：

- 主窗口系统（项目选择、创建、最近项目）
- 项目窗口系统（多窗口架构）
- Markdown编辑器（Vditor集成、编辑/预览模式）
- 文件树管理（递归渲染、展开折叠）
- Pane分屏系统（上下、左右分割、拖拽调整）
- 标签页系统（多标签、关闭、拆分到新窗口）
- 命令面板系统（插件化命令注册）
- 右侧栏系统（动态面板、多实例支持）
- 大纲面板（动态生成、文件关联）
- 文件服务（读写、监听、自动保存）
- 缓存系统（localStorage、electron-store）
- 设置系统（缓存管理、配置）

## 第二阶段：文档更新

### 1. 更新架构设计总览.md

当前文档过于抽象，需要更新为：

- 明确列出实际的模块名称（home、project、projectPage等）
- 补充 GUI 组件的实际组织结构
- 更新 stores 的实际模块划分
- 更新 Service 层的实际服务
- 补充 Electron 层的实际服务（file-service、markdown-service等）
- 添加路径别名的实际配置

### 2. 创建 Markdown编辑系统设计文档.md

新文档包含：

- Vditor编辑器集成方案
- 编辑模式与预览模式切换
- 文件的打开、编辑、保存流程
- 自动保存机制
- MarkdownStore 状态管理
- 文件服务与IPC通信
- 组件架构（MarkdownTab、MarkdownEditor、MarkdownViewer）

### 3. 创建 Pane分屏系统设计文档.md

新文档包含：

- 分屏系统的设计理念
- PaneLayout Store 状态管理
- 上下/左右分割的实现
- 拖拽分割线调整大小
- Tab与Pane的关系
- 焦点管理
- 右键菜单（拆分、关闭等）
- 滚动问题的解决方案（min-height: 0 等关键点）

### 4. 创建 文件系统与项目结构设计文档.md

新文档包含：

- 项目文件结构设计
- 文件树的递归渲染
- 文件监听机制（file-watcher）
- Markdown文件扫描（markdown-scanner）
- 文件读写服务（file-manager、markdown-reader、markdown-writer）
- 备份机制（markdown-backup）
- IPC通信协议（file-handlers、markdown-handlers）

### 5. 更新 多窗口系统设计文档.md

补充实际实现的细节：

- 标签页拆分到新窗口的实现
- 窗口间的握手机制
- URL参数传递状态
- 分离窗口的初始化流程
- 实际的窗口类型（main、project、project-detached）

### 6. 验证 命令面板与右栏-快速参考.md

检查是否需要更新：

- 验证插件系统的实际路径
- 验证API的实际接口
- 补充动态命令和多实例面板的说明

## 第三阶段：创建综合文档

### 7. 创建 已实现功能清单.md

新文档作为快速索引：

- 按模块分类列出所有已实现功能
- 每个功能标注对应的文件位置
- 标注实现时间（根据总结文档）
- 提供相关设计文档和总结文档的链接

## 实施要点

1. 所有文档都要基于实际代码，不是理论设计
2. 引用具体的文件路径和代码片段
3. 标注关键技术点和踩坑经验
4. 保持文档间的一致性和交叉引用
5. 使用中文书写
6. 遵循项目规范的文档格式

## 验证标准

每个文档完成后需要：

- 核对代码库中的实际实现
- 确保路径和命名与实际一致
- 检查是否覆盖了该模块的核心功能
- 验证技术细节的准确性

### To-dos

- [ ] 分析代码库结构（stores、Service、src-electron、GUI组件）并整理功能清单
- [ ] 更新架构设计总览.md，使其反映实际模块组织
- [ ] 创建Markdown编辑系统设计文档.md
- [ ] 创建Pane分屏系统设计文档.md
- [ ] 创建文件系统与项目结构设计文档.md
- [ ] 更新多窗口系统设计文档.md，补充标签页拆分等实际实现
- [ ] 验证并更新命令面板与右栏-快速参考.md
- [ ] 创建已实现功能清单.md作为快速索引